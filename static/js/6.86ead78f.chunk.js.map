{"version":3,"sources":["../../src/index.ts","../../../src/hooks/useDragDropManager.ts","../../../src/hooks/useIsomorphicLayoutEffect.ts","../../../src/hooks/useOptionalFactory.ts","../../../src/internals/wrapConnectorHooks.ts","../../../src/internals/isRef.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../src/hooks/useMonitorOutput.ts","../../../src/hooks/useCollector.ts","../../../src/hooks/useCollectedProps.ts","../../../src/core/DndContext.ts","../node_modules/fast-deep-equal/index.js","../../src/makeRequestCall.ts","../../../src/utils/js_utils.ts","../../src/EnterLeaveCounter.ts","../../../src/NativeDragSources/NativeDragSource.ts","../../src/NativeTypes.ts","../../../src/NativeDragSources/getDataFromDataTransfer.ts","../../../src/NativeDragSources/nativeTypesConfig.ts","../../../src/NativeDragSources/index.ts","../../src/BrowserDetector.ts","../../src/MonotonicInterpolant.ts","../../src/OffsetUtils.ts","../../src/OptionsReader.ts","../../src/HTML5BackendImpl.ts","../../../src/internals/registration.ts","../../../src/core/DndProvider.tsx","../node_modules/rc-upload/es/request.js","../node_modules/rc-upload/es/uid.js","../node_modules/rc-upload/es/attr-accept.js","../node_modules/rc-upload/es/traverseFileTree.js","../node_modules/rc-upload/es/AjaxUploader.js","../node_modules/rc-upload/es/Upload.js","../node_modules/rc-upload/es/index.js","../node_modules/antd/es/upload/Dragger.js","../node_modules/@ant-design/icons-svg/es/asn/PaperClipOutlined.js","../node_modules/@ant-design/icons/es/icons/PaperClipOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/PictureTwoTone.js","../node_modules/@ant-design/icons/es/icons/PictureTwoTone.js","../node_modules/@ant-design/icons-svg/es/asn/FileTwoTone.js","../node_modules/@ant-design/icons/es/icons/FileTwoTone.js","../node_modules/antd/es/upload/utils.js","../node_modules/@ant-design/icons-svg/es/asn/DeleteOutlined.js","../node_modules/@ant-design/icons/es/icons/DeleteOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/DownloadOutlined.js","../node_modules/@ant-design/icons/es/icons/DownloadOutlined.js","../node_modules/antd/es/progress/utils.js","../node_modules/antd/es/progress/Line.js","../node_modules/rc-progress/es/common.js","../node_modules/rc-progress/es/Line.js","../node_modules/rc-progress/es/Circle.js","../node_modules/antd/es/progress/Circle.js","../node_modules/antd/es/progress/Steps.js","../node_modules/antd/es/progress/progress.js","../node_modules/antd/es/progress/index.js","../node_modules/antd/es/upload/UploadList/ListItem.js","../node_modules/antd/es/upload/UploadList/index.js","../node_modules/antd/es/upload/useFreshState.js","../node_modules/antd/es/upload/Upload.js","../node_modules/antd/es/upload/index.js","../node_modules/react-dnd/node_modules/redux/es/redux.js","../../../../src/actions/dragDrop/types.ts","../../../../../src/actions/dragDrop/local/setClientOffset.ts","../../../../src/actions/dragDrop/beginDrag.ts","../../../../src/actions/dragDrop/drop.ts","../../../../src/actions/dragDrop/endDrag.ts","../../../src/utils/matchesType.ts","../../../../src/actions/dragDrop/hover.ts","../../../../src/actions/dragDrop/publishDragSource.ts","../../../src/classes/DragDropManagerImpl.ts","../../../../src/actions/dragDrop/index.ts","../../../src/utils/coords.ts","../../../src/utils/dirtiness.ts","../../../src/classes/DragDropMonitorImpl.ts","../../src/AsapQueue.ts","../../src/RawTask.ts","../../src/TaskFactory.ts","../../src/asap.ts","../../../src/actions/registry.ts","../../src/interfaces.ts","../../src/contracts.ts","../../../src/utils/getNextUniqueId.ts","../../../src/classes/HandlerRegistryImpl.ts","../../../src/utils/equality.ts","../../../src/reducers/dirtyHandlerIds.ts","../../../src/reducers/dragOffset.ts","../../../src/reducers/dragOperation.ts","../../../src/reducers/refCount.ts","../../../src/reducers/stateId.ts","../../../src/reducers/index.ts","../../src/createDragDropManager.ts","../../../../src/hooks/useDrop/connectors.ts","../../../src/internals/TargetConnector.ts","../../../src/internals/DropTargetMonitorImpl.ts","../../../../src/hooks/useDrop/DropTargetImpl.ts","../../../../src/hooks/useDrop/useRegisteredDropTarget.ts","../../../../src/hooks/useDrop/useDropTarget.ts","../../../../src/hooks/useDrop/useAccept.ts","../../../../src/hooks/useDrop/useDrop.ts","../../../../src/hooks/useDrop/useDropTargetMonitor.ts","../../../../src/hooks/useDrop/useDropTargetConnector.ts","../../../../src/hooks/useDrag/connectors.ts","../../../src/internals/SourceConnector.ts","../../../src/internals/DragSourceMonitorImpl.ts","../../../../src/hooks/useDrag/DragSourceImpl.ts","../../../../src/hooks/useDrag/useRegisteredDragSource.ts","../../../../src/hooks/useDrag/useDragSource.ts","../../../../src/hooks/useDrag/useDragType.ts","../../../../src/hooks/useDrag/useDrag.ts","../../../../src/hooks/useDrag/useDragSourceMonitor.ts","../../../../src/hooks/useDrag/useDragSourceConnector.ts","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v1.js"],"names":["invariant","condition","format","args","isProduction","undefined","Error","error","argIndex","replace","name","framesToPop","process","useDragDropManager","dragDropManager","useContext","DndContext","useIsomorphicLayoutEffect","window","useLayoutEffect","useEffect","useOptionalFactory","arg","deps","memoDeps","push","useMemo","shallowEqual","objA","objB","compare","compareContext","compareResult","call","keysA","Object","keys","keysB","length","bHasOwnProperty","prototype","hasOwnProperty","bind","idx","key","valueA","valueB","throwIfCompositeComponentElement","element","type","displayName","wrapConnectorHooks","hooks","wrappedHooks","forEach","hook","endsWith","wrappedHook","elementOrNode","options","isValidElement","node","cloneWithRef","wrapHookToRecognizeElement","setRef","ref","current","newRef","previousRef","cloneElement","isRef","obj","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","useMonitorOutput","monitor","collect","onCollect","onUpdate","useState","collected","setCollected","updateCollected","useCallback","nextValue","equal","useCollector","handlerId","getHandlerId","subscribeToStateChange","handlerIds","useCollectedProps","collector","connector","reconnect","createContext","module","exports","a","b","constructor","i","RegExp","source","flags","valueOf","toString","scope","global","self","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","makeRequestCallFromTimer","callback","timeoutHandle","setTimeout","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","makeRequestCall","toggle","observer","document","createTextNode","observe","characterData","data","memoize","fn","result","EnterLeaveCounter","isNodeInDocument","entered","this","enteringNode","previousLength","itemsA","itemsB","set","Set","insertItem","item","add","union","filter","contains","leavingNode","items","NativeDragSource","config","initializeExposedProperties","exposeProperties","property","defineProperty","configurable","enumerable","get","console","warn","dataTransfer","newProperties","propertyFn","value","matchesTypes","defineProperties","handle","getSourceId","FILE","URL","TEXT","HTML","getDataFromDataTransfer","typesToTry","defaultValue","reduce","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","files","slice","html","urls","split","text","matchNativeItemType","dataTransferTypes","types","nativeItemType","typeConfig","some","t","indexOf","isFirefox","test","navigator","userAgent","isSafari","Boolean","safari","MonotonicInterpolant","xs","ys","indexes","sort","dx","dy","dys","dxs","ms","c1s","m2","mNext","dxNext","common","m","c2s","c3s","c1","invDx","x","mid","low","high","xHere","Math","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","getBoundingClientRect","top","left","y","getEventClientOffset","e","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","clientOffset","anchorPoint","offsetPoint","isImage","nodeName","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","OptionsReader","globalContext","ownerDocument","optionsArgs","rootElement","HTML5BackendImpl","manager","sourcePreviewNodes","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","lastClientOffset","hoverRafId","getSourceClientOffset","sourceId","endDragNativeItem","isDraggingNativeItem","actions","endDrag","registry","removeSource","body","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","isDragging","cancelHover","scheduleHover","requestAnimationFrame","hover","cancelAnimationFrame","handleTopDragStartCapture","handleTopDragStart","defaultPrevented","beginDrag","publishSource","nativeType","setDragImage","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","err","setCurrentDragSourceNode","target","captureDraggingState","publishDragSource","beginDragNativeItem","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","loadDataTransfer","enterLeaveCounter","enter","handleTopDragEnter","altKey","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","leave","handleTopDropCapture","reset","handleTopDrop","drop","handleSelectStart","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","size","root","__isReactDndBackendSetUp","addEventListeners","removeEventListeners","delete","handleDragStart","setAttribute","addEventListener","removeEventListener","handleDragEnter","handleDragOver","handleDrop","getCurrentSourceNodeOptions","itemType","getItemType","createNativeDragSource","addSource","unshift","_e","HTML5Backend","context","registerTarget","addTarget","removeTarget","registerSource","refCount","INSTANCE_SYM","for","DndProvider","memo","children","props","backend","getGlobalContext","debugMode","ctx","createDragDropManager","createSingletonDndContext","isGlobalInstance","getDndContextValue","Provider","getBody","xhr","responseText","response","JSON","parse","upload","option","XMLHttpRequest","onProgress","onprogress","total","percent","loaded","formData","FormData","append","concat","file","Blob","filename","onerror","onError","onload","status","msg","method","action","url","getError","onSuccess","open","withCredentials","headers","setRequestHeader","h","send","abort","now","Date","index","uid","acceptedFiles","acceptedFilesArray","fileName","mimeType","baseMimeType","str","suffix","validType","trim","charAt","toLowerCase","traverseFileTree","isAccepted","_traverseFileTree","path","isFile","fullPath","webkitRelativePath","writable","isDirectory","dirReader","createReader","fileList","sequence","readEntries","entries","entryList","apply","loopFiles","entryItem","webkitGetAsEntry","AjaxUploader","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","arguments","state","getUid","reqs","onChange","uploadFiles","onClick","fileInput","_this$props","parent","parentNode","focus","querySelector","blur","click","onKeyDown","onFileDrop","multiple","directory","_file","attrAccept","accept","postFiles","map","saveFileInput","_createClass","_isMounted","_this2","beforeUpload","before","then","processedFile","processedFileType","post","catch","log","Promise","resolve","_this3","onStart","_props$transformFile","transformFile","originFile","actionRet","request","customRequest","defaultRequest","transformedFile","all","_ref","_ref2","_slicedToArray","requestOption","ret","setState","_classNames","_this$props2","Tag","component","prefixCls","className","disabled","id","style","openFileDialogOnClick","onMouseEnter","onMouseLeave","otherProps","_objectWithoutProperties","cls","classNames","_defineProperty","dirProps","webkitdirectory","events","onDrop","onDragOver","tabIndex","React","createElement","_extends","role","pickAttrs","aria","stopPropagation","display","Component","empty","Upload","saveUploader","uploader","AjaxUpload","defaultProps","multipart","__rest","s","p","getOwnPropertySymbols","propertyIsEnumerable","InternalDragger","_a","restProps","Dragger","PaperClipOutlined","AntdIcon","assign","icon","PaperClipOutlinedSvg","PictureTwoTone","primaryColor","secondaryColor","PictureTwoToneSvg","FileTwoTone","FileTwoToneSvg","fileToObject","lastModified","lastModifiedDate","originFileObj","getFileItem","matchKey","isImageFileType","MEASURE_SIZE","DeleteOutlined","DeleteOutlinedSvg","DownloadOutlined","DownloadOutlinedSvg","validProgress","progress","getSuccessPercent","success","successPercent","devWarning","handleGradient","strokeColor","directionConfig","_strokeColor$from","presetPrimaryColors","blue","_strokeColor$to","to","_strokeColor$directio","direction","rest","sortedGradients","gradients","tempArr","formattedKey","parseFloat","isNaN","join","sortGradient","backgroundImage","Line","strokeWidth","strokeLinecap","trailColor","backgroundProps","background","trailStyle","backgroundColor","percentStyle","borderRadius","successPercentStyle","successSegment","trailWidth","useTransitionDuration","percentList","paths","useRef","prevTimeStamp","updated","pathStyle","transitionDuration","transition","gapPosition","strokeColorList","_useTransitionDuratio","center","right","pathString","viewBoxString","stackPtg","viewBox","preserveAspectRatio","d","stroke","fillOpacity","ptg","dashPercent","strokeDasharray","strokeDashoffset","color","gradientSeed","stripPercentToNumber","toArray","symArray","getPathStyles","offset","gapDegree","radius","beginPositionX","beginPositionY","endPositionX","endPositionY","len","PI","Circle","gradientId","_getPathStyles","gradient","find","x1","y1","x2","y2","stopColor","pathStyles","opacity","getStokeList","reverse","getPercentage","realSuccessPercent","circleSize","circleStyle","fontSize","circleWidth","gapPos","green","getStrokeColor","isGradient","wrapperClassName","RCCircle","Steps","steps","_props$percent","_props$strokeWidth","round","stepWidth","styledSteps","ProgressStatuses","tuple","Progress","_React$Component","renderProgress","getPrefixCls","_assertThisInitialized","customizePrefixCls","showInfo","progressStatus","getProgressStatus","progressInfo","renderProcessInfo","classString","omit","_this$props$percent","parseInt","getPercentNumber","isLineType","percentNumber","CloseCircleFilled","CloseOutlined","CheckCircleFilled","CheckOutlined","title","ConfigConsumer","ListItem","_classNames3","_b","locale","listType","progressProps","iconRender","actionIconRender","itemRender","isImgUrl","showPreviewIcon","showRemoveIcon","showDownloadIcon","customRemoveIcon","removeIcon","customDownloadIcon","downloadIcon","onPreview","onDownload","onClose","_React$useState","_React$useState2","showProgress","setShowProgress","progressRafRef","spanClassName","iconNode","thumbUrl","uploadingClassName","_classNames2","thumbnail","src","alt","aClassName","href","rel","message","infoUploadingClass","linkProps","removeFile","downloadFile","downloadOrDelete","picture","listItemNameClass","preview","previewIcon","pointerEvents","previewFile","EyeOutlined","statusText","uploadError","iconAndPreview","dom","CSSMotion","motionName","visible","motionClassName","loadingProgress","listContainerNameClass","Tooltip","getPopupContainer","listItemMotion","collapseMotion","onAppearEnd","onEnterEnd","onLeaveEnd","InternalUploadList","onRemove","isImageUrl","_ref$items","appendAction","forceUpdate","useForceUpdate","motionAppear","setMotionAppear","FileReader","File","previewDataUrl","onInternalPreview","onInternalDownload","onInternalClose","internalIconRender","isLoading","fileIcon","LoadingOutlined","uploading","customIcon","btnProps","btnIcon","Button","handlePreview","handleDownload","_React$useContext","ConfigContext","listClassNames","motionKeyList","animationDirection","motionConfig","CSSMotionList","motionStyle","_ref3","oriProps","UploadList","canvas","cssText","appendChild","getContext","img","Image","drawWidth","drawHeight","drawImage","dataURL","toDataURL","removeChild","createObjectURL","extension","temp","filenameWithoutSuffix","exec","extname","useFreshState","propValue","valueRef","rafRef","setValue","newValue","cleanUp","raf","cancel","displayValue","InternalUpload","fileListProp","defaultFileList","showUploadList","propLocale","maxCount","dragState","setDragState","_useFreshState","_useFreshState2","getFileList","setFileList","timestamp","onInternalChange","info","cloneList","targetItem","nextFileList","fileIndex","findIndex","event","handleRemove","currentFile","removedFileList","removed","removeFileItem","rcUploadProps","fileListArgs","beforeUploadProp","uniqueList","f","every","uf","renderUploadList","button","LocaleReceiver","componentName","defaultLocale","dragCls","onDragLeave","RcUpload","uploadButtonCls","uploadButton","supportServerRender","formatProdErrorMessage","code","$$observable","observable","randomString","random","substring","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","getState","subscribe","listener","isSubscribed","splice","dispatch","listeners","replaceReducer","nextReducer","outerSubscribe","observeState","next","unsubscribe","c","without","isObject","input","xor","Map","has","count","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","sourceClientOffset","payload","ResetCoordinatesAction","createBeginDrag","sourceIds","verifyInvariants","getDraggableSource","verifyGetSourceClientOffsetIsFunction","getSource","verifyItemIsObject","pinSource","getSourceType","isSourcePublic","canDragSource","createDrop","targetIds","getDroppableTargets","dropResult","determineDropResult","didDrop","getTarget","verifyDropResultType","getDropResult","getTargetIds","createEndDrag","verifyIsDragging","unpinSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","removeNonMatchingTargetIds","checkInvariants","hoverAllTargets","lastIndexOf","getTargetType","createPublishDragSource","DragDropManagerImpl","store","isSetUp","handleRefCountChange","shouldSetUp","setup","teardown","createDragDropActions","boundActions","actionCreator","subtract","NONE","ALL","areDirty","dirtyIds","__IS_NONE__","__IS_ALL__","DragDropMonitorImpl","prevStateId","stateId","handleChange","currentStateId","dirtyHandlerIds","previousState","dragOffset","nextState","canDrag","canDrop","shallow","dragOperation","initialClientOffset","initialSourceClientOffset","getDifferenceFromInitialOffset","AsapQueue","queue","pendingErrors","flushing","capacity","flush","q","currentIndex","scan","newLength","registerPendingError","requestErrorThrow","requestFlush","shift","task","RawTask","release","TaskFactory","freeTasks","tasks","pop","asapQueue","taskFactory","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","validateType","allowArray","HandlerRole","SOURCE","TARGET","nextUniqueId","getNextHandlerId","parseRoleFromHandlerId","mapContainsValue","searchValue","isDone","done","HandlerRegistryImpl","dragSources","dropTargets","pinnedSourceId","pinnedSource","validateSourceContract","addHandler","validateTargetContract","handler","includePinned","isSourceId","isPinned","isTargetId","enqueueTask","create","strictEquality","areCoordsEqual","offsetA","offsetB","areArraysEqual","isEqual","prevTargetIds","didChange","prevInnermostTargetId","innermostTargetId","initialState","backendFactory","backendOptions","makeStoreInstance","receiveBackend","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId","useConnectDropTarget","dropTarget","TargetConnector","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","dropTargetOptionsInternal","lastConnectedHandlerId","lastConnectedDropTarget","lastConnectedDropTargetOptions","didHandlerIdChange","didDropTargetChange","didOptionsChange","disconnectDropTarget","unsubscribeDropTarget","connectDropTarget","newHandlerId","isCallingCanDrop","DropTargetMonitorImpl","internalMonitor","isOverTarget","getItem","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","DropTargetImpl","spec","useRegisteredDropTarget","useDropTarget","useAccept","unregister","receiveHandlerId","useDrop","specArg","useDropTargetMonitor","getBackend","useDropTargetConnector","useConnectDragSource","dragSource","useConnectDragPreview","SourceConnector","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","dragSourceOptionsInternal","dragPreviewOptionsInternal","lastConnectedDragSource","lastConnectedDragSourceOptions","lastConnectedDragPreview","lastConnectedDragPreviewOptions","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","dragSourceUnsubscribe","connectDragSource","forceDidChange","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","dragPreviewUnsubscribe","connectDragPreview","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","isDraggingSource","subscribeToOffsetChange","DragSourceImpl","globalMonitor","end","useRegisteredDragSource","useDragSource","useDragType","useDrag","begin","useDragSourceMonitor","useDragSourceConnector","previewOptions","getRandomValues","rnds8","Uint8Array","rng","crypto","validate","byteToHex","unsafeStringify","stringify","_nodeId","_clockseq","_lastMSecs","_lastNSecs","v1","buf","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","n"],"mappings":"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","file":"static/js/6.86ead78f.chunk.js","sourcesContent":["export * from './asap.js'\nexport * from './AsapQueue.js'\nexport * from './TaskFactory.js'\nexport * from './types.js'\n","import { invariant } from '@react-dnd/invariant'\nimport type { DragDropManager } from 'dnd-core'\nimport { useContext } from 'react'\n\nimport { DndContext } from '../core/index.js'\n\n/**\n * A hook to retrieve the DragDropManager from Context\n */\nexport function useDragDropManager(): DragDropManager {\n\tconst { dragDropManager } = useContext(DndContext)\n\tinvariant(dragDropManager != null, 'Expected drag drop context')\n\treturn dragDropManager as DragDropManager\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\n// suppress the useLayoutEffect warning on server side.\nexport const useIsomorphicLayoutEffect =\n\ttypeof window !== 'undefined' ? useLayoutEffect : useEffect\n","import { useMemo } from 'react'\n\nimport type { FactoryOrInstance } from './types.js'\n\nexport function useOptionalFactory<T>(\n\targ: FactoryOrInstance<T>,\n\tdeps?: unknown[],\n): T {\n\tconst memoDeps = [...(deps || [])]\n\tif (deps == null && typeof arg !== 'function') {\n\t\tmemoDeps.push(arg)\n\t}\n\treturn useMemo<T>(() => {\n\t\treturn typeof arg === 'function' ? (arg as () => T)() : (arg as T)\n\t}, memoDeps)\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { ReactElement } from 'react'\nimport { cloneElement, isValidElement } from 'react'\n\nfunction throwIfCompositeComponentElement(element: ReactElement<any>) {\n\t// Custom components can no longer be wrapped directly in React DnD 2.0\n\t// so that we don't need to depend on findDOMNode() from react-dom.\n\tif (typeof element.type === 'string') {\n\t\treturn\n\t}\n\n\tconst displayName =\n\t\t(element.type as any).displayName || element.type.name || 'the component'\n\n\tthrow new Error(\n\t\t'Only native element nodes can now be passed to React DnD connectors.' +\n\t\t\t`You can either wrap ${displayName} into a <div>, or turn it into a ` +\n\t\t\t'drag source or a drop target itself.',\n\t)\n}\n\nfunction wrapHookToRecognizeElement(hook: (node: any, options: any) => void) {\n\treturn (elementOrNode = null, options = null) => {\n\t\t// When passed a node, call the hook straight away.\n\t\tif (!isValidElement(elementOrNode)) {\n\t\t\tconst node = elementOrNode\n\t\t\thook(node, options)\n\t\t\t// return the node so it can be chained (e.g. when within callback refs\n\t\t\t// <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\t\t\treturn node\n\t\t}\n\n\t\t// If passed a ReactElement, clone it and attach this function as a ref.\n\t\t// This helps us achieve a neat API where user doesn't even know that refs\n\t\t// are being used under the hood.\n\t\tconst element: ReactElement | null = elementOrNode\n\t\tthrowIfCompositeComponentElement(element as any)\n\n\t\t// When no options are passed, use the hook directly\n\t\tconst ref = options ? (node: Element) => hook(node, options) : hook\n\t\treturn cloneWithRef(element, ref)\n\t}\n}\n\nexport function wrapConnectorHooks(hooks: any) {\n\tconst wrappedHooks: any = {}\n\n\tObject.keys(hooks).forEach((key) => {\n\t\tconst hook = hooks[key]\n\n\t\t// ref objects should be passed straight through without wrapping\n\t\tif (key.endsWith('Ref')) {\n\t\t\twrappedHooks[key] = hooks[key]\n\t\t} else {\n\t\t\tconst wrappedHook = wrapHookToRecognizeElement(hook)\n\t\t\twrappedHooks[key] = () => wrappedHook\n\t\t}\n\t})\n\n\treturn wrappedHooks\n}\n\nfunction setRef(ref: any, node: any) {\n\tif (typeof ref === 'function') {\n\t\tref(node)\n\t} else {\n\t\tref.current = node\n\t}\n}\n\nfunction cloneWithRef(element: any, newRef: any): ReactElement<any> {\n\tconst previousRef = element.ref\n\tinvariant(\n\t\ttypeof previousRef !== 'string',\n\t\t'Cannot connect React DnD to an element with an existing string ref. ' +\n\t\t\t'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' +\n\t\t\t'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs',\n\t)\n\n\tif (!previousRef) {\n\t\t// When there is no ref on the element, use the new ref directly\n\t\treturn cloneElement(element, {\n\t\t\tref: newRef,\n\t\t})\n\t} else {\n\t\treturn cloneElement(element, {\n\t\t\tref: (node: any) => {\n\t\t\t\tsetRef(previousRef, node)\n\t\t\t\tsetRef(newRef, node)\n\t\t\t},\n\t\t})\n\t}\n}\n","export interface Ref<T> {\n\tcurrent: T\n}\n\nexport function isRef(obj: unknown): boolean {\n\treturn (\n\t\t// eslint-disable-next-line no-prototype-builtins\n\t\tobj !== null &&\n\t\ttypeof obj === 'object' &&\n\t\tObject.prototype.hasOwnProperty.call(obj, 'current')\n\t)\n}\n","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useCollector } from './useCollector.js'\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\n\nexport function useMonitorOutput<Monitor extends HandlerManager, Collected>(\n\tmonitor: Monitor & MonitorEventEmitter,\n\tcollect: (monitor: Monitor) => Collected,\n\tonCollect?: () => void,\n): Collected {\n\tconst [collected, updateCollected] = useCollector(monitor, collect, onCollect)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction subscribeToMonitorStateChange() {\n\t\t\tconst handlerId = monitor.getHandlerId()\n\t\t\tif (handlerId == null) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn monitor.subscribeToStateChange(updateCollected, {\n\t\t\t\thandlerIds: [handlerId],\n\t\t\t})\n\t\t},\n\t\t[monitor, updateCollected],\n\t)\n\n\treturn collected\n}\n","import equal from 'fast-deep-equal'\nimport { useCallback, useState } from 'react'\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.js'\n\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\nexport function useCollector<T, S>(\n\tmonitor: T,\n\tcollect: (monitor: T) => S,\n\tonUpdate?: () => void,\n): [S, () => void] {\n\tconst [collected, setCollected] = useState(() => collect(monitor))\n\n\tconst updateCollected = useCallback(() => {\n\t\tconst nextValue = collect(monitor)\n\t\t// This needs to be a deep-equality check because some monitor-collected values\n\t\t// include XYCoord objects that may be equivalent, but do not have instance equality.\n\t\tif (!equal(collected, nextValue)) {\n\t\t\tsetCollected(nextValue)\n\t\t\tif (onUpdate) {\n\t\t\t\tonUpdate()\n\t\t\t}\n\t\t}\n\t}, [collected, monitor, onUpdate])\n\n\t// update the collected properties after react renders.\n\t// Note that the \"Dustbin Stress Test\" fails if this is not\n\t// done when the component updates\n\tuseIsomorphicLayoutEffect(updateCollected)\n\n\treturn [collected, updateCollected]\n}\n","import type { Connector } from '../internals/index.js'\nimport type { HandlerManager, MonitorEventEmitter } from '../types/index.js'\nimport { useMonitorOutput } from './useMonitorOutput.js'\n\nexport function useCollectedProps<Collected, Monitor extends HandlerManager>(\n\tcollector: ((monitor: Monitor) => Collected) | undefined,\n\tmonitor: Monitor & MonitorEventEmitter,\n\tconnector: Connector,\n) {\n\treturn useMonitorOutput(monitor, collector || (() => ({} as Collected)), () =>\n\t\tconnector.reconnect(),\n\t)\n}\n","import type { DragDropManager } from 'dnd-core'\nimport { createContext } from 'react'\n\n/**\n * The React context type\n */\nexport interface DndContextType {\n\tdragDropManager: DragDropManager | undefined\n}\n\n/**\n * Create the React Context\n */\nexport const DndContext = createContext<DndContextType>({\n\tdragDropManager: undefined,\n})\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nconst scope = typeof global !== 'undefined' ? global : self\nconst BrowserMutationObserver =\n\t(scope as any).MutationObserver || (scope as any).WebKitMutationObserver\n\nexport function makeRequestCallFromTimer(callback: () => void) {\n\treturn function requestCall() {\n\t\t// We dispatch a timeout with a specified delay of 0 for engines that\n\t\t// can reliably accommodate that request. This will usually be snapped\n\t\t// to a 4 milisecond delay, but once we're flushing, there's no delay\n\t\t// between events.\n\t\tconst timeoutHandle = setTimeout(handleTimer, 0)\n\t\t// However, since this timer gets frequently dropped in Firefox\n\t\t// workers, we enlist an interval handle that will try to fire\n\t\t// an event 20 times per second until it succeeds.\n\t\tconst intervalHandle = setInterval(handleTimer, 50)\n\n\t\tfunction handleTimer() {\n\t\t\t// Whichever timer succeeds will cancel both timers and\n\t\t\t// execute the callback.\n\t\t\tclearTimeout(timeoutHandle)\n\t\t\tclearInterval(intervalHandle)\n\t\t\tcallback()\n\t\t}\n\t}\n}\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback: () => void) {\n\tlet toggle = 1\n\tconst observer = new BrowserMutationObserver(callback)\n\tconst node = document.createTextNode('')\n\tobserver.observe(node, { characterData: true })\n\treturn function requestCall() {\n\t\ttoggle = -toggle\n\t\t;(node as any).data = toggle\n\t}\n}\n\nexport const makeRequestCall =\n\ttypeof BrowserMutationObserver === 'function'\n\t\t? // MutationObservers are desirable because they have high priority and work\n\t\t  // reliably everywhere they are implemented.\n\t\t  // They are implemented in all modern browsers.\n\t\t  //\n\t\t  // - Android 4-4.3\n\t\t  // - Chrome 26-34\n\t\t  // - Firefox 14-29\n\t\t  // - Internet Explorer 11\n\t\t  // - iPad Safari 6-7.1\n\t\t  // - iPhone Safari 7-7.1\n\t\t  // - Safari 6-7\n\t\t  makeRequestCallFromMutationObserver\n\t\t: // MessageChannels are desirable because they give direct access to the HTML\n\t\t  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t\t  // 11-12, and in web workers in many engines.\n\t\t  // Although message channels yield to any queued rendering and IO tasks, they\n\t\t  // would be better than imposing the 4ms delay of timers.\n\t\t  // However, they do not work reliably in Internet Explorer or Safari.\n\n\t\t  // Internet Explorer 10 is the only browser that has setImmediate but does\n\t\t  // not have MutationObservers.\n\t\t  // Although setImmediate yields to the browser's renderer, it would be\n\t\t  // preferrable to falling back to setTimeout since it does not have\n\t\t  // the minimum 4ms penalty.\n\t\t  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t\t  // Desktop to a lesser extent) that renders both setImmediate and\n\t\t  // MessageChannel useless for the purposes of ASAP.\n\t\t  // https://github.com/kriskowal/q/issues/396\n\n\t\t  // Timers are implemented universally.\n\t\t  // We fall back to timers in workers in most engines, and in foreground\n\t\t  // contexts in the following browsers.\n\t\t  // However, note that even this simple case requires nuances to operate in a\n\t\t  // broad spectrum of browsers.\n\t\t  //\n\t\t  // - Firefox 3-13\n\t\t  // - Internet Explorer 6-9\n\t\t  // - iPad Safari 4.3\n\t\t  // - Lynx 2.8.7\n\t\t  makeRequestCallFromTimer\n","// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get<T>(obj: any, path: string, defaultValue: T): T {\n\treturn path\n\t\t.split('.')\n\t\t.reduce((a, c) => (a && a[c] ? a[c] : defaultValue || null), obj) as T\n}\n\n/**\n * drop-in replacement for _.without\n */\nexport function without<T>(items: T[], item: T): T[] {\n\treturn items.filter((i) => i !== item)\n}\n\n/**\n * drop-in replacement for _.isString\n * @param input\n */\nexport function isString(input: any): boolean {\n\treturn typeof input === 'string'\n}\n\n/**\n * drop-in replacement for _.isString\n * @param input\n */\nexport function isObject(input: any): boolean {\n\treturn typeof input === 'object'\n}\n\n/**\n * replacement for _.xor\n * @param itemsA\n * @param itemsB\n */\nexport function xor<T extends string | number>(itemsA: T[], itemsB: T[]): T[] {\n\tconst map = new Map<T, number>()\n\tconst insertItem = (item: T) => {\n\t\tmap.set(item, map.has(item) ? (map.get(item) as number) + 1 : 1)\n\t}\n\titemsA.forEach(insertItem)\n\titemsB.forEach(insertItem)\n\n\tconst result: T[] = []\n\tmap.forEach((count, key) => {\n\t\tif (count === 1) {\n\t\t\tresult.push(key)\n\t\t}\n\t})\n\treturn result\n}\n\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\nexport function intersection<T>(itemsA: T[], itemsB: T[]): T[] {\n\treturn itemsA.filter((t) => itemsB.indexOf(t) > -1)\n}\n","import { union, without } from './utils/js_utils.js'\n\ntype NodePredicate = (node: Node | null | undefined) => boolean\n\nexport class EnterLeaveCounter {\n\tprivate entered: any[] = []\n\tprivate isNodeInDocument: NodePredicate\n\n\tpublic constructor(isNodeInDocument: NodePredicate) {\n\t\tthis.isNodeInDocument = isNodeInDocument\n\t}\n\n\tpublic enter(enteringNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tconst isNodeEntered = (node: Node): boolean =>\n\t\t\tthis.isNodeInDocument(node) &&\n\t\t\t(!node.contains || node.contains(enteringNode as Node))\n\n\t\tthis.entered = union(this.entered.filter(isNodeEntered), [enteringNode])\n\n\t\treturn previousLength === 0 && this.entered.length > 0\n\t}\n\n\tpublic leave(leavingNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tthis.entered = without(\n\t\t\tthis.entered.filter(this.isNodeInDocument),\n\t\t\tleavingNode,\n\t\t)\n\n\t\treturn previousLength > 0 && this.entered.length === 0\n\t}\n\n\tpublic reset(): void {\n\t\tthis.entered = []\n\t}\n}\n","import type { DragDropMonitor } from 'dnd-core'\n\nimport type { NativeItemConfig } from './nativeTypesConfig.js'\n\nexport class NativeDragSource {\n\tpublic item: any\n\tprivate config: NativeItemConfig\n\n\tpublic constructor(config: NativeItemConfig) {\n\t\tthis.config = config\n\t\tthis.item = {}\n\t\tthis.initializeExposedProperties()\n\t}\n\n\tprivate initializeExposedProperties() {\n\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\tObject.defineProperty(this.item, property, {\n\t\t\t\tconfigurable: true, // This is needed to allow redefining it later\n\t\t\t\tenumerable: true,\n\t\t\t\tget() {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Browser doesn't allow reading \"${property}\" until the drop event.`,\n\t\t\t\t\t)\n\t\t\t\t\treturn null\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\tpublic loadDataTransfer(dataTransfer: DataTransfer | null | undefined): void {\n\t\tif (dataTransfer) {\n\t\t\tconst newProperties: PropertyDescriptorMap = {}\n\t\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\t\tconst propertyFn = this.config.exposeProperties[property]\n\t\t\t\tif (propertyFn != null) {\n\t\t\t\t\tnewProperties[property] = {\n\t\t\t\t\t\tvalue: propertyFn(dataTransfer, this.config.matchesTypes),\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tObject.defineProperties(this.item, newProperties)\n\t\t}\n\t}\n\n\tpublic canDrag(): boolean {\n\t\treturn true\n\t}\n\n\tpublic beginDrag(): any {\n\t\treturn this.item\n\t}\n\n\tpublic isDragging(monitor: DragDropMonitor, handle: string): boolean {\n\t\treturn handle === monitor.getSourceId()\n\t}\n\n\tpublic endDrag(): void {\n\t\t// empty\n\t}\n}\n","export const FILE = '__NATIVE_FILE__'\nexport const URL = '__NATIVE_URL__'\nexport const TEXT = '__NATIVE_TEXT__'\nexport const HTML = '__NATIVE_HTML__'\n","export function getDataFromDataTransfer(\n\tdataTransfer: DataTransfer,\n\ttypesToTry: string[],\n\tdefaultValue: string,\n): string {\n\tconst result = typesToTry.reduce(\n\t\t(resultSoFar, typeToTry) => resultSoFar || dataTransfer.getData(typeToTry),\n\t\t'',\n\t)\n\n\treturn result != null ? result : defaultValue\n}\n","import * as NativeTypes from '../NativeTypes.js'\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js'\n\nexport interface NativeItemConfigExposePropreties {\n\t[property: string]: (\n\t\tdataTransfer: DataTransfer,\n\t\tmatchesTypes: string[],\n\t) => any\n}\n\nexport interface NativeItemConfig {\n\texposeProperties: NativeItemConfigExposePropreties\n\tmatchesTypes: string[]\n}\n\nexport const nativeTypesConfig: {\n\t[key: string]: NativeItemConfig\n} = {\n\t[NativeTypes.FILE]: {\n\t\texposeProperties: {\n\t\t\tfiles: (dataTransfer: DataTransfer): File[] =>\n\t\t\t\tArray.prototype.slice.call(dataTransfer.files),\n\t\t\titems: (dataTransfer: DataTransfer): DataTransferItemList =>\n\t\t\t\tdataTransfer.items,\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Files'],\n\t},\n\t[NativeTypes.HTML]: {\n\t\texposeProperties: {\n\t\t\thtml: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Html', 'text/html'],\n\t},\n\t[NativeTypes.URL]: {\n\t\texposeProperties: {\n\t\t\turls: (dataTransfer: DataTransfer, matchesTypes: string[]): string[] =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n'),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Url', 'text/uri-list'],\n\t},\n\t[NativeTypes.TEXT]: {\n\t\texposeProperties: {\n\t\t\ttext: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Text', 'text/plain'],\n\t},\n}\n","import { NativeDragSource } from './NativeDragSource.js'\nimport { nativeTypesConfig } from './nativeTypesConfig.js'\n\nexport function createNativeDragSource(\n\ttype: string,\n\tdataTransfer?: DataTransfer,\n): NativeDragSource {\n\tconst config = nativeTypesConfig[type]\n\tif (!config) {\n\t\tthrow new Error(`native type ${type} has no configuration`)\n\t}\n\tconst result = new NativeDragSource(config)\n\tresult.loadDataTransfer(dataTransfer)\n\treturn result\n}\n\nexport function matchNativeItemType(\n\tdataTransfer: DataTransfer | null,\n): string | null {\n\tif (!dataTransfer) {\n\t\treturn null\n\t}\n\n\tconst dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || [])\n\treturn (\n\t\tObject.keys(nativeTypesConfig).filter((nativeItemType) => {\n\t\t\tconst typeConfig = nativeTypesConfig[nativeItemType]\n\t\t\tif (!typeConfig?.matchesTypes) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn typeConfig.matchesTypes.some(\n\t\t\t\t(t) => dataTransferTypes.indexOf(t) > -1,\n\t\t\t)\n\t\t})[0] || null\n\t)\n}\n","import { memoize } from './utils/js_utils.js'\n\ndeclare global {\n\tinterface Window extends HTMLElement {\n\t\tsafari: any\n\t}\n}\n\nexport type Predicate = () => boolean\nexport const isFirefox: Predicate = memoize(() =>\n\t/firefox/i.test(navigator.userAgent),\n)\nexport const isSafari: Predicate = memoize(() => Boolean(window.safari))\n","export class MonotonicInterpolant {\n\tprivate xs: any\n\tprivate ys: any\n\tprivate c1s: any\n\tprivate c2s: any\n\tprivate c3s: any\n\n\tpublic constructor(xs: number[], ys: number[]) {\n\t\tconst { length } = xs\n\n\t\t// Rearrange xs and ys so that xs is sorted\n\t\tconst indexes = []\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tindexes.push(i)\n\t\t}\n\t\tindexes.sort((a, b) => ((xs[a] as number) < (xs[b] as number) ? -1 : 1))\n\n\t\t// Get consecutive differences and slopes\n\t\tconst dys = []\n\t\tconst dxs = []\n\t\tconst ms = []\n\t\tlet dx\n\t\tlet dy\n\t\tfor (let i = 0; i < length - 1; i++) {\n\t\t\tdx = (xs[i + 1] as number) - (xs[i] as number)\n\t\t\tdy = (ys[i + 1] as number) - (ys[i] as number)\n\t\t\tdxs.push(dx)\n\t\t\tdys.push(dy)\n\t\t\tms.push(dy / dx)\n\t\t}\n\n\t\t// Get degree-1 coefficients\n\t\tconst c1s = [ms[0]]\n\t\tfor (let i = 0; i < dxs.length - 1; i++) {\n\t\t\tconst m2 = ms[i] as number\n\t\t\tconst mNext = ms[i + 1] as number\n\t\t\tif (m2 * mNext <= 0) {\n\t\t\t\tc1s.push(0)\n\t\t\t} else {\n\t\t\t\tdx = dxs[i] as number\n\t\t\t\tconst dxNext = dxs[i + 1] as number\n\t\t\t\tconst common = dx + dxNext\n\t\t\t\tc1s.push(\n\t\t\t\t\t(3 * common) / ((common + dxNext) / m2 + (common + dx) / mNext),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tc1s.push(ms[ms.length - 1])\n\n\t\t// Get degree-2 and degree-3 coefficients\n\t\tconst c2s = []\n\t\tconst c3s = []\n\t\tlet m\n\t\tfor (let i = 0; i < c1s.length - 1; i++) {\n\t\t\tm = ms[i] as number\n\t\t\tconst c1 = c1s[i] as number\n\t\t\tconst invDx = 1 / (dxs[i] as number)\n\t\t\tconst common = c1 + (c1s[i + 1] as number) - m - m\n\t\t\tc2s.push((m - c1 - common) * invDx)\n\t\t\tc3s.push(common * invDx * invDx)\n\t\t}\n\n\t\tthis.xs = xs\n\t\tthis.ys = ys\n\t\tthis.c1s = c1s\n\t\tthis.c2s = c2s\n\t\tthis.c3s = c3s\n\t}\n\n\tpublic interpolate(x: number): number {\n\t\tconst { xs, ys, c1s, c2s, c3s } = this\n\n\t\t// The rightmost point in the dataset should give an exact result\n\t\tlet i = xs.length - 1\n\t\tif (x === xs[i]) {\n\t\t\treturn ys[i]\n\t\t}\n\n\t\t// Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\t\tlet low = 0\n\t\tlet high = c3s.length - 1\n\t\tlet mid\n\t\twhile (low <= high) {\n\t\t\tmid = Math.floor(0.5 * (low + high))\n\t\t\tconst xHere = xs[mid]\n\t\t\tif (xHere < x) {\n\t\t\t\tlow = mid + 1\n\t\t\t} else if (xHere > x) {\n\t\t\t\thigh = mid - 1\n\t\t\t} else {\n\t\t\t\treturn ys[mid]\n\t\t\t}\n\t\t}\n\t\ti = Math.max(0, high)\n\n\t\t// Interpolate\n\t\tconst diff = x - xs[i]\n\t\tconst diffSq = diff * diff\n\t\treturn ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq\n\t}\n}\n","import type { XYCoord } from 'dnd-core'\n\nimport { isFirefox, isSafari } from './BrowserDetector.js'\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Node): XYCoord | null {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\n\tif (!el) {\n\t\treturn null\n\t}\n\n\tconst { top, left } = (el as HTMLElement).getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientOffset(e: MouseEvent): XYCoord {\n\treturn {\n\t\tx: e.clientX,\n\t\ty: e.clientY,\n\t}\n}\n\nfunction isImageNode(node: any) {\n\treturn (\n\t\tnode.nodeName === 'IMG' &&\n\t\t(isFirefox() || !document.documentElement?.contains(node))\n\t)\n}\n\nfunction getDragPreviewSize(\n\tisImage: boolean,\n\tdragPreview: any,\n\tsourceWidth: number,\n\tsourceHeight: number,\n) {\n\tlet dragPreviewWidth = isImage ? dragPreview.width : sourceWidth\n\tlet dragPreviewHeight = isImage ? dragPreview.height : sourceHeight\n\n\t// Work around @2x coordinate discrepancies in browsers\n\tif (isSafari() && isImage) {\n\t\tdragPreviewHeight /= window.devicePixelRatio\n\t\tdragPreviewWidth /= window.devicePixelRatio\n\t}\n\treturn { dragPreviewWidth, dragPreviewHeight }\n}\n\nexport function getDragPreviewOffset(\n\tsourceNode: HTMLElement,\n\tdragPreview: HTMLElement,\n\tclientOffset: XYCoord,\n\tanchorPoint: { anchorX: number; anchorY: number },\n\toffsetPoint: { offsetX: number; offsetY: number },\n): XYCoord {\n\t// The browsers will use the image intrinsic size under different conditions.\n\t// Firefox only cares if it's an image, but WebKit also wants it to be detached.\n\tconst isImage = isImageNode(dragPreview)\n\tconst dragPreviewNode = isImage ? sourceNode : dragPreview\n\tconst dragPreviewNodeOffsetFromClient = getNodeClientOffset(\n\t\tdragPreviewNode,\n\t) as XYCoord\n\tconst offsetFromDragPreview = {\n\t\tx: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n\t\ty: clientOffset.y - dragPreviewNodeOffsetFromClient.y,\n\t}\n\tconst { offsetWidth: sourceWidth, offsetHeight: sourceHeight } = sourceNode\n\tconst { anchorX, anchorY } = anchorPoint\n\tconst { dragPreviewWidth, dragPreviewHeight } = getDragPreviewSize(\n\t\tisImage,\n\t\tdragPreview,\n\t\tsourceWidth,\n\t\tsourceHeight,\n\t)\n\n\tconst calculateYOffset = () => {\n\t\tconst interpolantY = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the top\n\t\t\t\toffsetFromDragPreview.y,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n\t\t\t\t// Dock to the bottom\n\t\t\t\toffsetFromDragPreview.y + dragPreviewHeight - sourceHeight,\n\t\t\t],\n\t\t)\n\t\tlet y = interpolantY.interpolate(anchorY)\n\t\t// Work around Safari 8 positioning bug\n\t\tif (isSafari() && isImage) {\n\t\t\t// We'll have to wait for @3x to see if this is entirely correct\n\t\t\ty += (window.devicePixelRatio - 1) * dragPreviewHeight\n\t\t}\n\t\treturn y\n\t}\n\n\tconst calculateXOffset = () => {\n\t\t// Interpolate coordinates depending on anchor point\n\t\t// If you know a simpler way to do this, let me know\n\t\tconst interpolantX = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the left\n\t\t\t\toffsetFromDragPreview.x,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n\t\t\t\t// Dock to the right\n\t\t\t\toffsetFromDragPreview.x + dragPreviewWidth - sourceWidth,\n\t\t\t],\n\t\t)\n\t\treturn interpolantX.interpolate(anchorX)\n\t}\n\n\t// Force offsets if specified in the options.\n\tconst { offsetX, offsetY } = offsetPoint\n\tconst isManualOffsetX = offsetX === 0 || offsetX\n\tconst isManualOffsetY = offsetY === 0 || offsetY\n\treturn {\n\t\tx: isManualOffsetX ? offsetX : calculateXOffset(),\n\t\ty: isManualOffsetY ? offsetY : calculateYOffset(),\n\t}\n}\n","import type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport class OptionsReader {\n\tpublic ownerDocument: Document | null = null\n\tprivate globalContext: HTML5BackendContext\n\tprivate optionsArgs: HTML5BackendOptions | undefined\n\n\tpublic constructor(\n\t\tglobalContext: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.globalContext = globalContext\n\t\tthis.optionsArgs = options\n\t}\n\n\tpublic get window(): Window | undefined {\n\t\tif (this.globalContext) {\n\t\t\treturn this.globalContext\n\t\t} else if (typeof window !== 'undefined') {\n\t\t\treturn window\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic get document(): Document | undefined {\n\t\tif (this.globalContext?.document) {\n\t\t\treturn this.globalContext.document\n\t\t} else if (this.window) {\n\t\t\treturn this.window.document\n\t\t} else {\n\t\t\treturn undefined\n\t\t}\n\t}\n\n\tpublic get rootElement(): Node | undefined {\n\t\treturn this.optionsArgs?.rootElement || this.window\n\t}\n}\n","import type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js'\nimport {\n\tcreateNativeDragSource,\n\tmatchNativeItemType,\n} from './NativeDragSources/index.js'\nimport type { NativeDragSource } from './NativeDragSources/NativeDragSource.js'\nimport * as NativeTypes from './NativeTypes.js'\nimport {\n\tgetDragPreviewOffset,\n\tgetEventClientOffset,\n\tgetNodeClientOffset,\n} from './OffsetUtils.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\ntype RootNode = Node & { __isReactDndBackendSetUp: boolean | undefined }\n\nexport class HTML5BackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-Dnd Components\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\tprivate registry: HandlerRegistry\n\n\t// Internal State\n\tprivate enterLeaveCounter: EnterLeaveCounter\n\n\tprivate sourcePreviewNodes: Map<string, Element> = new Map()\n\tprivate sourcePreviewNodeOptions: Map<string, any> = new Map()\n\tprivate sourceNodes: Map<string, Element> = new Map()\n\tprivate sourceNodeOptions: Map<string, any> = new Map()\n\n\tprivate dragStartSourceIds: string[] | null = null\n\tprivate dropTargetIds: string[] = []\n\tprivate dragEnterTargetIds: string[] = []\n\tprivate currentNativeSource: NativeDragSource | null = null\n\tprivate currentNativeHandle: Identifier | null = null\n\tprivate currentDragSourceNode: Element | null = null\n\tprivate altKeyPressed = false\n\tprivate mouseMoveTimeoutTimer: number | null = null\n\tprivate asyncEndDragFrameId: number | null = null\n\tprivate dragOverTargetIds: string[] | null = null\n\n\tprivate lastClientOffset: XYCoord | null = null\n\tprivate hoverRafId: number | null = null\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tglobalContext?: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.options = new OptionsReader(globalContext, options)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\t\tthis.registry = manager.getRegistry()\n\t\tthis.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument)\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\tsourceNodeOptions: this.sourceNodeOptions.size,\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tdragStartSourceIds: this.dragStartSourceIds?.length || 0,\n\t\t\tdropTargetIds: this.dropTargetIds.length,\n\t\t\tdragEnterTargetIds: this.dragEnterTargetIds.length,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get window(): Window | undefined {\n\t\treturn this.options.window\n\t}\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\t/**\n\t * Get the root element to use for event subscriptions\n\t */\n\tprivate get rootElement(): Node | undefined {\n\t\treturn this.options.rootElement as Node\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.rootElement as RootNode | undefined\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tif (root.__isReactDndBackendSetUp) {\n\t\t\tthrow new Error('Cannot have two HTML5 backends at the same time.')\n\t\t}\n\t\troot.__isReactDndBackendSetUp = true\n\t\tthis.addEventListeners(root)\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.rootElement as RootNode\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\troot.__isReactDndBackendSetUp = false\n\t\tthis.removeEventListeners(this.rootElement as Element)\n\t\tthis.clearCurrentDragSourceNode()\n\t\tif (this.asyncEndDragFrameId) {\n\t\t\tthis.window?.cancelAnimationFrame(this.asyncEndDragFrameId)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDragSource(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourceNodes.set(sourceId, node)\n\t\tthis.sourceNodeOptions.set(sourceId, options)\n\n\t\tconst handleDragStart = (e: any) => this.handleDragStart(e, sourceId)\n\t\tconst handleSelectStart = (e: any) => this.handleSelectStart(e)\n\n\t\tnode.setAttribute('draggable', 'true')\n\t\tnode.addEventListener('dragstart', handleDragStart)\n\t\tnode.addEventListener('selectstart', handleSelectStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.sourceNodeOptions.delete(sourceId)\n\n\t\t\tnode.removeEventListener('dragstart', handleDragStart)\n\t\t\tnode.removeEventListener('selectstart', handleSelectStart)\n\t\t\tnode.setAttribute('draggable', 'false')\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleDragEnter = (e: DragEvent) => this.handleDragEnter(e, targetId)\n\t\tconst handleDragOver = (e: DragEvent) => this.handleDragOver(e, targetId)\n\t\tconst handleDrop = (e: DragEvent) => this.handleDrop(e, targetId)\n\n\t\tnode.addEventListener('dragenter', handleDragEnter)\n\t\tnode.addEventListener('dragover', handleDragOver)\n\t\tnode.addEventListener('drop', handleDrop)\n\n\t\treturn (): void => {\n\t\t\tnode.removeEventListener('dragenter', handleDragEnter)\n\t\t\tnode.removeEventListener('dragover', handleDragOver)\n\t\t\tnode.removeEventListener('drop', handleDrop)\n\t\t}\n\t}\n\n\tprivate addEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.addEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.addEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStart as EventListener,\n\t\t)\n\t\ttarget.addEventListener('dragstart', this.handleTopDragStartCapture, true)\n\t\ttarget.addEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('dragover', this.handleTopDragOver as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate removeEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.removeEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.removeEventListener('dragstart', this.handleTopDragStart as any)\n\t\ttarget.removeEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStartCapture,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOver as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.removeEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate getCurrentSourceNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourceNodeOptions = this.sourceNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tdropEffect: this.altKeyPressed ? 'copy' : 'move',\n\t\t\t...(sourceNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getCurrentDropEffect() {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\t// It makes more sense to default to 'copy' for native resources\n\t\t\treturn 'copy'\n\t\t}\n\n\t\treturn this.getCurrentSourceNodeOptions().dropEffect\n\t}\n\n\tprivate getCurrentSourcePreviewNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tanchorX: 0.5,\n\t\t\tanchorY: 0.5,\n\t\t\tcaptureDraggingState: false,\n\t\t\t...(sourcePreviewNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | null => {\n\t\tconst source = this.sourceNodes.get(sourceId)\n\t\treturn (source && getNodeClientOffset(source as HTMLElement)) || null\n\t}\n\n\tprivate isDraggingNativeItem() {\n\t\tconst itemType = this.monitor.getItemType()\n\t\treturn Object.keys(NativeTypes).some(\n\t\t\t(key: string) => (NativeTypes as any)[key] === itemType,\n\t\t)\n\t}\n\n\tprivate beginDragNativeItem(type: string, dataTransfer?: DataTransfer) {\n\t\tthis.clearCurrentDragSourceNode()\n\n\t\tthis.currentNativeSource = createNativeDragSource(type, dataTransfer)\n\t\tthis.currentNativeHandle = this.registry.addSource(\n\t\t\ttype,\n\t\t\tthis.currentNativeSource,\n\t\t)\n\t\tthis.actions.beginDrag([this.currentNativeHandle])\n\t}\n\n\tprivate endDragNativeItem = (): void => {\n\t\tif (!this.isDraggingNativeItem()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.actions.endDrag()\n\t\tif (this.currentNativeHandle) {\n\t\t\tthis.registry.removeSource(this.currentNativeHandle)\n\t\t}\n\t\tthis.currentNativeHandle = null\n\t\tthis.currentNativeSource = null\n\t}\n\n\tprivate isNodeInDocument = (node: Node | null | undefined): boolean => {\n\t\t// Check the node either in the main document or in the current context\n\t\treturn Boolean(\n\t\t\tnode &&\n\t\t\t\tthis.document &&\n\t\t\t\tthis.document.body &&\n\t\t\t\tthis.document.body.contains(node),\n\t\t)\n\t}\n\n\tprivate endDragIfSourceWasRemovedFromDOM = (): void => {\n\t\tconst node = this.currentDragSourceNode\n\t\tif (node == null || this.isNodeInDocument(node)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tprivate setCurrentDragSourceNode(node: Element | null) {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.currentDragSourceNode = node\n\n\t\t// A timeout of > 0 is necessary to resolve Firefox issue referenced\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\tconst MOUSE_MOVE_TIMEOUT = 1000\n\n\t\t// Receiving a mouse event in the middle of a dragging operation\n\t\t// means it has ended and the drag source node disappeared from DOM,\n\t\t// so the browser didn't dispatch the dragend event.\n\t\t//\n\t\t// We need to wait before we start listening for mousemove events.\n\t\t// This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n\t\t// immediately in some browsers.\n\t\t//\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\t//\n\t\tthis.mouseMoveTimeoutTimer = setTimeout(() => {\n\t\t\treturn this.rootElement?.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}, MOUSE_MOVE_TIMEOUT) as any as number\n\t}\n\n\tprivate clearCurrentDragSourceNode() {\n\t\tif (this.currentDragSourceNode) {\n\t\t\tthis.currentDragSourceNode = null\n\n\t\t\tif (this.rootElement) {\n\t\t\t\tthis.window?.clearTimeout(this.mouseMoveTimeoutTimer || undefined)\n\t\t\t\tthis.rootElement.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.mouseMoveTimeoutTimer = null\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tprivate scheduleHover = (dragOverTargetIds: string[] | null) => {\n\t\tif (\n\t\t\tthis.hoverRafId === null &&\n\t\t\ttypeof requestAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tthis.hoverRafId = requestAnimationFrame(() => {\n\t\t\t\tif (this.monitor.isDragging()) {\n\t\t\t\t\tthis.actions.hover(dragOverTargetIds || [], {\n\t\t\t\t\t\tclientOffset: this.lastClientOffset,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.hoverRafId = null\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancelHover = () => {\n\t\tif (\n\t\t\tthis.hoverRafId !== null &&\n\t\t\ttypeof cancelAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tcancelAnimationFrame(this.hoverRafId)\n\t\t\tthis.hoverRafId = null\n\t\t}\n\t}\n\n\tpublic handleTopDragStartCapture = (): void => {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.dragStartSourceIds = []\n\t}\n\n\tpublic handleDragStart(e: DragEvent, sourceId: string): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.dragStartSourceIds) {\n\t\t\tthis.dragStartSourceIds = []\n\t\t}\n\t\tthis.dragStartSourceIds.unshift(sourceId)\n\t}\n\n\tpublic handleTopDragStart = (e: DragEvent): void => {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dragStartSourceIds } = this\n\t\tthis.dragStartSourceIds = null\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\n\t\t// Avoid crashing if we missed a drop event or our previous drag died\n\t\tif (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t\tthis.cancelHover()\n\t\t}\n\n\t\t// Don't publish the source just yet (see why below)\n\t\tthis.actions.beginDrag(dragStartSourceIds || [], {\n\t\t\tpublishSource: false,\n\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\tclientOffset,\n\t\t})\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (this.monitor.isDragging()) {\n\t\t\tif (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n\t\t\t\t// Use custom drag image if user specifies it.\n\t\t\t\t// If child drag source refuses drag but parent agrees,\n\t\t\t\t// use parent's node as drag image. Neither works in IE though.\n\t\t\t\tconst sourceId: string = this.monitor.getSourceId() as string\n\t\t\t\tconst sourceNode = this.sourceNodes.get(sourceId)\n\t\t\t\tconst dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode\n\n\t\t\t\tif (dragPreview) {\n\t\t\t\t\tconst { anchorX, anchorY, offsetX, offsetY } =\n\t\t\t\t\t\tthis.getCurrentSourcePreviewNodeOptions()\n\t\t\t\t\tconst anchorPoint = { anchorX, anchorY }\n\t\t\t\t\tconst offsetPoint = { offsetX, offsetY }\n\t\t\t\t\tconst dragPreviewOffset = getDragPreviewOffset(\n\t\t\t\t\t\tsourceNode as HTMLElement,\n\t\t\t\t\t\tdragPreview as HTMLElement,\n\t\t\t\t\t\tclientOffset,\n\t\t\t\t\t\tanchorPoint,\n\t\t\t\t\t\toffsetPoint,\n\t\t\t\t\t)\n\n\t\t\t\t\tdataTransfer.setDragImage(\n\t\t\t\t\t\tdragPreview,\n\t\t\t\t\t\tdragPreviewOffset.x,\n\t\t\t\t\t\tdragPreviewOffset.y,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Firefox won't drag without setting data\n\t\t\t\tdataTransfer?.setData('application/json', {} as any)\n\t\t\t} catch (err) {\n\t\t\t\t// IE doesn't support MIME types in setData\n\t\t\t}\n\n\t\t\t// Store drag source node so we can check whether\n\t\t\t// it is removed from DOM and trigger endDrag manually.\n\t\t\tthis.setCurrentDragSourceNode(e.target as Element)\n\n\t\t\t// Now we are ready to publish the drag source.. or are we not?\n\t\t\tconst { captureDraggingState } = this.getCurrentSourcePreviewNodeOptions()\n\t\t\tif (!captureDraggingState) {\n\t\t\t\t// Usually we want to publish it in the next tick so that browser\n\t\t\t\t// is able to screenshot the current (not yet dragging) state.\n\t\t\t\t//\n\t\t\t\t// It also neatly avoids a situation where render() returns null\n\t\t\t\t// in the same tick for the source element, and browser freaks out.\n\t\t\t\tsetTimeout(() => this.actions.publishDragSource(), 0)\n\t\t\t} else {\n\t\t\t\t// In some cases the user may want to override this behavior, e.g.\n\t\t\t\t// to work around IE not supporting custom drag previews.\n\t\t\t\t//\n\t\t\t\t// When using a custom drag layer, the only way to prevent\n\t\t\t\t// the default drag preview from drawing in IE is to screenshot\n\t\t\t\t// the dragging state in which the node itself has zero opacity\n\t\t\t\t// and height. In this case, though, returning null from render()\n\t\t\t\t// will abruptly end the dragging, which is not obvious.\n\t\t\t\t//\n\t\t\t\t// This is the reason such behavior is strictly opt-in.\n\t\t\t\tthis.actions.publishDragSource()\n\t\t\t}\n\t\t} else if (nativeType) {\n\t\t\t// A native item (such as URL) dragged from inside the document\n\t\t\tthis.beginDragNativeItem(nativeType)\n\t\t} else if (\n\t\t\tdataTransfer &&\n\t\t\t!dataTransfer.types &&\n\t\t\t((e.target && !(e.target as Element).hasAttribute) ||\n\t\t\t\t!(e.target as Element).hasAttribute('draggable'))\n\t\t) {\n\t\t\t// Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n\t\t\t// Just let it drag. It's a native type (URL or text) and will be picked up in\n\t\t\t// dragenter handler.\n\t\t\treturn\n\t\t} else {\n\t\t\t// If by this time no drag source reacted, tell browser not to drag.\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tpublic handleTopDragEndCapture = (): void => {\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\t// Firefox can dispatch this event in an infinite loop\n\t\t\t// if dragend handler does something like showing an alert.\n\t\t\t// Only proceed if we have not handled it already.\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDragEnterCapture = (e: DragEvent): void => {\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\n\t\tconst isFirstEnter = this.enterLeaveCounter.enter(e.target)\n\t\tif (!isFirstEnter || this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (nativeType) {\n\t\t\t// A native item (such as file or URL) dragged from outside the document\n\t\t\tthis.beginDragNativeItem(nativeType, dataTransfer as DataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragEnter(_e: DragEvent, targetId: string): void {\n\t\tthis.dragEnterTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragEnter = (e: DragEvent): void => {\n\t\tconst { dragEnterTargetIds } = this\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\n\t\t// If the target changes position as the result of `dragenter`, `dragover` might still\n\t\t// get dispatched despite target being no longer there. The easy solution is to check\n\t\t// whether there actually is a target before firing `hover`.\n\t\tif (dragEnterTargetIds.length > 0) {\n\t\t\tthis.actions.hover(dragEnterTargetIds, {\n\t\t\t\tclientOffset: getEventClientOffset(e),\n\t\t\t})\n\t\t}\n\n\t\tconst canDrop = dragEnterTargetIds.some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// IE requires this to fire dragover events\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragOverCapture = (e: DragEvent): void => {\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragOver(_e: DragEvent, targetId: string): void {\n\t\tif (this.dragOverTargetIds === null) {\n\t\t\tthis.dragOverTargetIds = []\n\t\t}\n\t\tthis.dragOverTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragOver = (e: DragEvent): void => {\n\t\tconst { dragOverTargetIds } = this\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\t// Prevent default \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\t\tthis.lastClientOffset = getEventClientOffset(e)\n\n\t\tthis.scheduleHover(dragOverTargetIds)\n\n\t\tconst canDrop = (dragOverTargetIds || []).some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// Show user-specified drop effect.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t} else if (this.isDraggingNativeItem()) {\n\t\t\t// Don't show a nice cursor but still prevent default\n\t\t\t// \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragLeaveCapture = (e: DragEvent): void => {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tconst isLastLeave = this.enterLeaveCounter.leave(e.target)\n\t\tif (!isLastLeave) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tsetTimeout(() => this.endDragNativeItem(), 0)\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDropCapture = (e: DragEvent): void => {\n\t\tthis.dropTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t} else if (matchNativeItemType(e.dataTransfer)) {\n\t\t\t// Dragging some elements, like <a> and <img> may still behave like a native drag event,\n\t\t\t// even if the current drag event matches a user-defined type.\n\t\t\t// Stop the default behavior when we're not expecting a native item to be dropped.\n\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tthis.enterLeaveCounter.reset()\n\t}\n\n\tpublic handleDrop(_e: DragEvent, targetId: string): void {\n\t\tthis.dropTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDrop = (e: DragEvent): void => {\n\t\tconst { dropTargetIds } = this\n\t\tthis.dropTargetIds = []\n\n\t\tthis.actions.hover(dropTargetIds, {\n\t\t\tclientOffset: getEventClientOffset(e),\n\t\t})\n\t\tthis.actions.drop({ dropEffect: this.getCurrentDropEffect() })\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.endDragNativeItem()\n\t\t} else if (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleSelectStart = (e: DragEvent): void => {\n\t\tconst target = e.target as HTMLElement & { dragDrop: () => void }\n\n\t\t// Only IE requires us to explicitly say\n\t\t// we want drag drop operation to start\n\t\tif (typeof target.dragDrop !== 'function') {\n\t\t\treturn\n\t\t}\n\n\t\t// Inputs and textareas should be selectable\n\t\tif (\n\t\t\ttarget.tagName === 'INPUT' ||\n\t\t\ttarget.tagName === 'SELECT' ||\n\t\t\ttarget.tagName === 'TEXTAREA' ||\n\t\t\ttarget.isContentEditable\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\t// For other targets, ask IE\n\t\t// to enable drag and drop\n\t\te.preventDefault()\n\t\ttarget.dragDrop()\n\t}\n}\n","import type {\n\tDragDropManager,\n\tDragSource,\n\tDropTarget,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n\tUnsubscribe,\n} from 'dnd-core'\n\nexport function registerTarget(\n\ttype: TargetType,\n\ttarget: DropTarget,\n\tmanager: DragDropManager,\n): [Identifier, Unsubscribe] {\n\tconst registry = manager.getRegistry()\n\tconst targetId = registry.addTarget(type, target)\n\n\treturn [targetId, () => registry.removeTarget(targetId)]\n}\n\nexport function registerSource(\n\ttype: SourceType,\n\tsource: DragSource,\n\tmanager: DragDropManager,\n): [Identifier, Unsubscribe] {\n\tconst registry = manager.getRegistry()\n\tconst sourceId = registry.addSource(type, source)\n\n\treturn [sourceId, () => registry.removeSource(sourceId)]\n}\n","import type { BackendFactory, DragDropManager } from 'dnd-core'\nimport { createDragDropManager } from 'dnd-core'\nimport type { FC, ReactNode } from 'react'\nimport { memo, useEffect } from 'react'\n\nimport { DndContext } from './DndContext.js'\n\nexport type DndProviderProps<BackendContext, BackendOptions> =\n\t| {\n\t\t\tchildren?: ReactNode\n\t\t\tmanager: DragDropManager\n\t  }\n\t| {\n\t\t\tbackend: BackendFactory\n\t\t\tchildren?: ReactNode\n\t\t\tcontext?: BackendContext\n\t\t\toptions?: BackendOptions\n\t\t\tdebugMode?: boolean\n\t  }\n\nlet refCount = 0\nconst INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__')\n\n/**\n * A React component that provides the React-DnD context\n */\nexport const DndProvider: FC<DndProviderProps<unknown, unknown>> = memo(\n\tfunction DndProvider({ children, ...props }) {\n\t\tconst [manager, isGlobalInstance] = getDndContextValue(props) // memoized from props\n\t\t/**\n\t\t * If the global context was used to store the DND context\n\t\t * then where theres no more references to it we should\n\t\t * clean it up to avoid memory leaks\n\t\t */\n\t\tuseEffect(() => {\n\t\t\tif (isGlobalInstance) {\n\t\t\t\tconst context = getGlobalContext()\n\t\t\t\t++refCount\n\n\t\t\t\treturn () => {\n\t\t\t\t\tif (--refCount === 0) {\n\t\t\t\t\t\tcontext[INSTANCE_SYM] = null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn\n\t\t}, [])\n\n\t\treturn <DndContext.Provider value={manager}>{children}</DndContext.Provider>\n\t},\n)\n\nfunction getDndContextValue(props: DndProviderProps<unknown, unknown>) {\n\tif ('manager' in props) {\n\t\tconst manager = { dragDropManager: props.manager }\n\t\treturn [manager, false]\n\t}\n\n\tconst manager = createSingletonDndContext(\n\t\tprops.backend,\n\t\tprops.context,\n\t\tprops.options,\n\t\tprops.debugMode,\n\t)\n\tconst isGlobalInstance = !props.context\n\n\treturn [manager, isGlobalInstance]\n}\n\nfunction createSingletonDndContext<BackendContext, BackendOptions>(\n\tbackend: BackendFactory,\n\tcontext: BackendContext = getGlobalContext(),\n\toptions: BackendOptions,\n\tdebugMode?: boolean,\n) {\n\tconst ctx = context as any\n\tif (!ctx[INSTANCE_SYM]) {\n\t\tctx[INSTANCE_SYM] = {\n\t\t\tdragDropManager: createDragDropManager(\n\t\t\t\tbackend,\n\t\t\t\tcontext,\n\t\t\t\toptions,\n\t\t\t\tdebugMode,\n\t\t\t),\n\t\t}\n\t}\n\treturn ctx[INSTANCE_SYM]\n}\n\ndeclare const global: any\nfunction getGlobalContext() {\n\treturn typeof global !== 'undefined' ? global : (window as any)\n}\n","function getError(option, xhr) {\n  var msg = \"cannot \".concat(option.method, \" \").concat(option.action, \" \").concat(xhr.status, \"'\");\n  var err = new Error(msg);\n  err.status = xhr.status;\n  err.method = option.method;\n  err.url = option.action;\n  return err;\n}\n\nfunction getBody(xhr) {\n  var text = xhr.responseText || xhr.response;\n\n  if (!text) {\n    return text;\n  }\n\n  try {\n    return JSON.parse(text);\n  } catch (e) {\n    return text;\n  }\n}\n\nexport default function upload(option) {\n  // eslint-disable-next-line no-undef\n  var xhr = new XMLHttpRequest();\n\n  if (option.onProgress && xhr.upload) {\n    xhr.upload.onprogress = function progress(e) {\n      if (e.total > 0) {\n        e.percent = e.loaded / e.total * 100;\n      }\n\n      option.onProgress(e);\n    };\n  } // eslint-disable-next-line no-undef\n\n\n  var formData = new FormData();\n\n  if (option.data) {\n    Object.keys(option.data).forEach(function (key) {\n      var value = option.data[key]; // support key-value array data\n\n      if (Array.isArray(value)) {\n        value.forEach(function (item) {\n          // { list: [ 11, 22 ] }\n          // formData.append('list[]', 11);\n          formData.append(\"\".concat(key, \"[]\"), item);\n        });\n        return;\n      }\n\n      formData.append(key, option.data[key]);\n    });\n  } // eslint-disable-next-line no-undef\n\n\n  if (option.file instanceof Blob) {\n    formData.append(option.filename, option.file, option.file.name);\n  } else {\n    formData.append(option.filename, option.file);\n  }\n\n  xhr.onerror = function error(e) {\n    option.onError(e);\n  };\n\n  xhr.onload = function onload() {\n    // allow success when 2xx status\n    // see https://github.com/react-component/upload/issues/34\n    if (xhr.status < 200 || xhr.status >= 300) {\n      return option.onError(getError(option, xhr), getBody(xhr));\n    }\n\n    return option.onSuccess(getBody(xhr), xhr);\n  };\n\n  xhr.open(option.method, option.action, true); // Has to be after `.open()`. See https://github.com/enyo/dropzone/issues/179\n\n  if (option.withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true;\n  }\n\n  var headers = option.headers || {}; // when set headers['X-Requested-With'] = null , can close default XHR header\n  // see https://github.com/react-component/upload/issues/33\n\n  if (headers['X-Requested-With'] !== null) {\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  }\n\n  Object.keys(headers).forEach(function (h) {\n    if (headers[h] !== null) {\n      xhr.setRequestHeader(h, headers[h]);\n    }\n  });\n  xhr.send(formData);\n  return {\n    abort: function abort() {\n      xhr.abort();\n    }\n  };\n}","var now = +new Date();\nvar index = 0;\nexport default function uid() {\n  // eslint-disable-next-line no-plusplus\n  return \"rc-upload-\".concat(now, \"-\").concat(++index);\n}","function endsWith(str, suffix) {\n  return str.indexOf(suffix, str.length - suffix.length) !== -1;\n}\n\nexport default (function (file, acceptedFiles) {\n  if (file && acceptedFiles) {\n    var acceptedFilesArray = Array.isArray(acceptedFiles) ? acceptedFiles : acceptedFiles.split(',');\n    var fileName = file.name || '';\n    var mimeType = file.type || '';\n    var baseMimeType = mimeType.replace(/\\/.*$/, '');\n    return acceptedFilesArray.some(function (type) {\n      var validType = type.trim();\n\n      if (validType.charAt(0) === '.') {\n        return endsWith(fileName.toLowerCase(), validType.toLowerCase());\n      }\n\n      if (/\\/\\*$/.test(validType)) {\n        // This is something like a image/* mime type\n        return baseMimeType === validType.replace(/\\/.*$/, '');\n      }\n\n      return mimeType === validType;\n    });\n  }\n\n  return true;\n});","function loopFiles(item, callback) {\n  var dirReader = item.createReader();\n  var fileList = [];\n\n  function sequence() {\n    dirReader.readEntries(function (entries) {\n      var entryList = Array.prototype.slice.apply(entries);\n      fileList = fileList.concat(entryList); // Check if all the file has been viewed\n\n      var isFinished = !entryList.length;\n\n      if (isFinished) {\n        callback(fileList);\n      } else {\n        sequence();\n      }\n    });\n  }\n\n  sequence();\n}\n\nvar traverseFileTree = function traverseFileTree(files, callback, isAccepted) {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  var _traverseFileTree = function _traverseFileTree(item, path) {\n    // eslint-disable-next-line no-param-reassign\n    item.path = path || '';\n\n    if (item.isFile) {\n      item.file(function (file) {\n        if (isAccepted(file)) {\n          // https://github.com/ant-design/ant-design/issues/16426\n          if (item.fullPath && !file.webkitRelativePath) {\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: true\n              }\n            }); // eslint-disable-next-line no-param-reassign\n\n            file.webkitRelativePath = item.fullPath.replace(/^\\//, '');\n            Object.defineProperties(file, {\n              webkitRelativePath: {\n                writable: false\n              }\n            });\n          }\n\n          callback([file]);\n        }\n      });\n    } else if (item.isDirectory) {\n      loopFiles(item, function (entries) {\n        entries.forEach(function (entryItem) {\n          _traverseFileTree(entryItem, \"\".concat(path).concat(item.name, \"/\"));\n        });\n      });\n    }\n  };\n\n  files.forEach(function (file) {\n    _traverseFileTree(file.webkitGetAsEntry());\n  });\n};\n\nexport default traverseFileTree;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\n/* eslint react/no-is-mounted:0,react/sort-comp:0,react/prop-types:0 */\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport defaultRequest from './request';\nimport getUid from './uid';\nimport attrAccept from './attr-accept';\nimport traverseFileTree from './traverseFileTree';\n\nvar AjaxUploader = /*#__PURE__*/function (_Component) {\n  _inherits(AjaxUploader, _Component);\n\n  var _super = _createSuper(AjaxUploader);\n\n  function AjaxUploader() {\n    var _this;\n\n    _classCallCheck(this, AjaxUploader);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      uid: getUid()\n    };\n    _this.reqs = {};\n\n    _this.onChange = function (e) {\n      var files = e.target.files;\n\n      _this.uploadFiles(files);\n\n      _this.reset();\n    };\n\n    _this.onClick = function (e) {\n      var el = _this.fileInput;\n\n      if (!el) {\n        return;\n      }\n\n      var _this$props = _this.props,\n          children = _this$props.children,\n          onClick = _this$props.onClick;\n\n      if (children && children.type === 'button') {\n        var parent = el.parentNode;\n        parent.focus();\n        parent.querySelector('button').blur();\n      }\n\n      el.click();\n\n      if (onClick) {\n        onClick(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick(e);\n      }\n    };\n\n    _this.onFileDrop = function (e) {\n      var multiple = _this.props.multiple;\n      e.preventDefault();\n\n      if (e.type === 'dragover') {\n        return;\n      }\n\n      if (_this.props.directory) {\n        traverseFileTree(Array.prototype.slice.call(e.dataTransfer.items), _this.uploadFiles, function (_file) {\n          return attrAccept(_file, _this.props.accept);\n        });\n      } else {\n        var files = Array.prototype.slice.call(e.dataTransfer.files).filter(function (file) {\n          return attrAccept(file, _this.props.accept);\n        });\n\n        if (multiple === false) {\n          files = files.slice(0, 1);\n        }\n\n        _this.uploadFiles(files);\n      }\n    };\n\n    _this.uploadFiles = function (files) {\n      var postFiles = Array.prototype.slice.call(files);\n      postFiles.map(function (file) {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return file;\n      }).forEach(function (file) {\n        _this.upload(file, postFiles);\n      });\n    };\n\n    _this.saveFileInput = function (node) {\n      _this.fileInput = node;\n    };\n\n    return _this;\n  }\n\n  _createClass(AjaxUploader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(file, fileList) {\n      var _this2 = this;\n\n      var props = this.props;\n\n      if (!props.beforeUpload) {\n        // always async in case use react state to keep fileList\n        Promise.resolve().then(function () {\n          _this2.post(file);\n        });\n        return;\n      }\n\n      var before = props.beforeUpload(file, fileList);\n\n      if (before && typeof before !== 'boolean' && before.then) {\n        before.then(function (processedFile) {\n          var processedFileType = Object.prototype.toString.call(processedFile);\n\n          if (processedFileType === '[object File]' || processedFileType === '[object Blob]') {\n            _this2.post(processedFile);\n\n            return;\n          }\n\n          _this2.post(file);\n        }).catch(function (e) {\n          // eslint-disable-next-line no-console\n          console.log(e);\n        });\n      } else if (before !== false) {\n        Promise.resolve().then(function () {\n          _this2.post(file);\n        });\n      }\n    }\n  }, {\n    key: \"post\",\n    value: function post(file) {\n      var _this3 = this;\n\n      if (!this._isMounted) {\n        return;\n      }\n\n      var props = this.props;\n      var onStart = props.onStart,\n          onProgress = props.onProgress,\n          _props$transformFile = props.transformFile,\n          transformFile = _props$transformFile === void 0 ? function (originFile) {\n        return originFile;\n      } : _props$transformFile;\n      new Promise(function (resolve) {\n        var actionRet = props.action;\n\n        if (typeof actionRet === 'function') {\n          actionRet = actionRet(file);\n        }\n\n        return resolve(actionRet);\n      }).then(function (action) {\n        var uid = file.uid;\n        var request = props.customRequest || defaultRequest;\n        var transform = Promise.resolve(transformFile(file)).then(function (transformedFile) {\n          var data = props.data;\n\n          if (typeof data === 'function') {\n            data = data(transformedFile);\n          }\n\n          return Promise.all([transformedFile, data]);\n        }).catch(function (e) {\n          console.error(e); // eslint-disable-line no-console\n        });\n        transform.then(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              transformedFile = _ref2[0],\n              data = _ref2[1];\n\n          var requestOption = {\n            action: action,\n            filename: props.name,\n            data: data,\n            file: transformedFile,\n            headers: props.headers,\n            withCredentials: props.withCredentials,\n            method: props.method || 'post',\n            onProgress: onProgress ? function (e) {\n              onProgress(e, file);\n            } : null,\n            onSuccess: function onSuccess(ret, xhr) {\n              delete _this3.reqs[uid];\n              props.onSuccess(ret, file, xhr);\n            },\n            onError: function onError(err, ret) {\n              delete _this3.reqs[uid];\n              props.onError(err, ret, file);\n            }\n          };\n          onStart(file);\n          _this3.reqs[uid] = request(requestOption);\n        });\n      });\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort(file) {\n      var reqs = this.reqs;\n\n      if (file) {\n        var uid = file.uid ? file.uid : file;\n\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classNames;\n\n      var _this$props2 = this.props,\n          Tag = _this$props2.component,\n          prefixCls = _this$props2.prefixCls,\n          className = _this$props2.className,\n          disabled = _this$props2.disabled,\n          id = _this$props2.id,\n          style = _this$props2.style,\n          multiple = _this$props2.multiple,\n          accept = _this$props2.accept,\n          children = _this$props2.children,\n          directory = _this$props2.directory,\n          openFileDialogOnClick = _this$props2.openFileDialogOnClick,\n          onMouseEnter = _this$props2.onMouseEnter,\n          onMouseLeave = _this$props2.onMouseLeave,\n          otherProps = _objectWithoutProperties(_this$props2, [\"component\", \"prefixCls\", \"className\", \"disabled\", \"id\", \"style\", \"multiple\", \"accept\", \"children\", \"directory\", \"openFileDialogOnClick\", \"onMouseEnter\", \"onMouseLeave\"]);\n\n      var cls = classNames((_classNames = {}, _defineProperty(_classNames, prefixCls, true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, className, className), _classNames)); // because input don't have directory/webkitdirectory type declaration\n\n      var dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDrop,\n        tabIndex: '0'\n      };\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, events, {\n        className: cls,\n        role: \"button\",\n        style: style\n      }), /*#__PURE__*/React.createElement(\"input\", _extends({}, pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      }), {\n        id: id,\n        type: \"file\",\n        ref: this.saveFileInput,\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        } // https://github.com/ant-design/ant-design/issues/19948\n        ,\n        key: this.state.uid,\n        style: {\n          display: 'none'\n        },\n        accept: accept\n      }, dirProps, {\n        multiple: multiple,\n        onChange: this.onChange\n      })), children);\n    }\n  }]);\n\n  return AjaxUploader;\n}(Component);\n\nexport default AjaxUploader;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\n/* eslint react/prop-types:0 */\nimport React, { Component } from 'react';\nimport AjaxUpload from './AjaxUploader';\n\nfunction empty() {}\n\nvar Upload = /*#__PURE__*/function (_Component) {\n  _inherits(Upload, _Component);\n\n  var _super = _createSuper(Upload);\n\n  function Upload() {\n    var _this;\n\n    _classCallCheck(this, Upload);\n\n    _this = _super.apply(this, arguments);\n\n    _this.saveUploader = function (node) {\n      _this.uploader = node;\n    };\n\n    return _this;\n  }\n\n  _createClass(Upload, [{\n    key: \"abort\",\n    value: function abort(file) {\n      this.uploader.abort(file);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(AjaxUpload, _extends({}, this.props, {\n        ref: this.saveUploader\n      }));\n    }\n  }]);\n\n  return Upload;\n}(Component);\n\nUpload.defaultProps = {\n  component: 'span',\n  prefixCls: 'rc-upload',\n  data: {},\n  headers: {},\n  name: 'file',\n  multipart: false,\n  onStart: empty,\n  onError: empty,\n  onSuccess: empty,\n  multiple: false,\n  beforeUpload: null,\n  customRequest: null,\n  withCredentials: false,\n  openFileDialogOnClick: true\n};\nexport default Upload;","import Upload from './Upload';\nexport default Upload;","import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport Upload from './Upload';\n\nvar InternalDragger = function InternalDragger(_a, ref) {\n  var style = _a.style,\n      height = _a.height,\n      restProps = __rest(_a, [\"style\", \"height\"]);\n\n  return /*#__PURE__*/React.createElement(Upload, _extends({\n    ref: ref\n  }, restProps, {\n    type: \"drag\",\n    style: _extends(_extends({}, style), {\n      height: height\n    })\n  }));\n};\n\nvar Dragger = /*#__PURE__*/React.forwardRef(InternalDragger);\nDragger.displayName = 'Dragger';\nexport default Dragger;","// This icon file is generated automatically.\nvar PaperClipOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z\" } }] }, \"name\": \"paper-clip\", \"theme\": \"outlined\" };\nexport default PaperClipOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PaperClipOutlinedSvg from \"@ant-design/icons-svg/es/asn/PaperClipOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PaperClipOutlined = function PaperClipOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PaperClipOutlinedSvg\n  }));\n};\n\nPaperClipOutlined.displayName = 'PaperClipOutlined';\nexport default /*#__PURE__*/React.forwardRef(PaperClipOutlined);","// This icon file is generated automatically.\nvar PictureTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z\", \"fill\": primaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M276 368a28 28 0 1056 0 28 28 0 10-56 0z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z\", \"fill\": primaryColor } }] }; }, \"name\": \"picture\", \"theme\": \"twotone\" };\nexport default PictureTwoTone;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PictureTwoToneSvg from \"@ant-design/icons-svg/es/asn/PictureTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PictureTwoTone = function PictureTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: PictureTwoToneSvg\n  }));\n};\n\nPictureTwoTone.displayName = 'PictureTwoTone';\nexport default /*#__PURE__*/React.forwardRef(PictureTwoTone);","// This icon file is generated automatically.\nvar FileTwoTone = { \"icon\": function render(primaryColor, secondaryColor) { return { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z\", \"fill\": secondaryColor } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z\", \"fill\": primaryColor } }] }; }, \"name\": \"file\", \"theme\": \"twotone\" };\nexport default FileTwoTone;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport FileTwoToneSvg from \"@ant-design/icons-svg/es/asn/FileTwoTone\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar FileTwoTone = function FileTwoTone(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: FileTwoToneSvg\n  }));\n};\n\nFileTwoTone.displayName = 'FileTwoTone';\nexport default /*#__PURE__*/React.forwardRef(FileTwoTone);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nexport function T() {\n  return true;\n} // Fix IE file.status problem\n// via coping a new Object\n\nexport function fileToObject(file) {\n  return _extends(_extends({}, file), {\n    lastModified: file.lastModified,\n    lastModifiedDate: file.lastModifiedDate,\n    name: file.name,\n    size: file.size,\n    type: file.type,\n    uid: file.uid,\n    percent: 0,\n    originFileObj: file\n  });\n}\nexport function getFileItem(file, fileList) {\n  var matchKey = file.uid !== undefined ? 'uid' : 'name';\n  return fileList.filter(function (item) {\n    return item[matchKey] === file[matchKey];\n  })[0];\n}\nexport function removeFileItem(file, fileList) {\n  var matchKey = file.uid !== undefined ? 'uid' : 'name';\n  var removed = fileList.filter(function (item) {\n    return item[matchKey] !== file[matchKey];\n  });\n\n  if (removed.length === fileList.length) {\n    return null;\n  }\n\n  return removed;\n} // ==================== Default Image Preview ====================\n\nvar extname = function extname() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var temp = url.split('/');\n  var filename = temp[temp.length - 1];\n  var filenameWithoutSuffix = filename.split(/#|\\?/)[0];\n  return (/\\.[^./\\\\]*$/.exec(filenameWithoutSuffix) || [''])[0];\n};\n\nvar isImageFileType = function isImageFileType(type) {\n  return type.indexOf('image/') === 0;\n};\n\nexport var isImageUrl = function isImageUrl(file) {\n  if (file.type && !file.thumbUrl) {\n    return isImageFileType(file.type);\n  }\n\n  var url = file.thumbUrl || file.url;\n  var extension = extname(url);\n\n  if (/^data:image\\//.test(url) || /(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i.test(extension)) {\n    return true;\n  }\n\n  if (/^data:/.test(url)) {\n    // other file types of base64\n    return false;\n  }\n\n  if (extension) {\n    // other file types which have extension\n    return false;\n  }\n\n  return true;\n};\nvar MEASURE_SIZE = 200;\nexport function previewImage(file) {\n  return new Promise(function (resolve) {\n    if (!file.type || !isImageFileType(file.type)) {\n      resolve('');\n      return;\n    }\n\n    var canvas = document.createElement('canvas');\n    canvas.width = MEASURE_SIZE;\n    canvas.height = MEASURE_SIZE;\n    canvas.style.cssText = \"position: fixed; left: 0; top: 0; width: \".concat(MEASURE_SIZE, \"px; height: \").concat(MEASURE_SIZE, \"px; z-index: 9999; display: none;\");\n    document.body.appendChild(canvas);\n    var ctx = canvas.getContext('2d');\n    var img = new Image();\n\n    img.onload = function () {\n      var width = img.width,\n          height = img.height;\n      var drawWidth = MEASURE_SIZE;\n      var drawHeight = MEASURE_SIZE;\n      var offsetX = 0;\n      var offsetY = 0;\n\n      if (width > height) {\n        drawHeight = height * (MEASURE_SIZE / width);\n        offsetY = -(drawHeight - drawWidth) / 2;\n      } else {\n        drawWidth = width * (MEASURE_SIZE / height);\n        offsetX = -(drawWidth - drawHeight) / 2;\n      }\n\n      ctx.drawImage(img, offsetX, offsetY, drawWidth, drawHeight);\n      var dataURL = canvas.toDataURL();\n      document.body.removeChild(canvas);\n      resolve(dataURL);\n    };\n\n    img.src = window.URL.createObjectURL(file);\n  });\n}","// This icon file is generated automatically.\nvar DeleteOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\" } }] }, \"name\": \"delete\", \"theme\": \"outlined\" };\nexport default DeleteOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DeleteOutlinedSvg from \"@ant-design/icons-svg/es/asn/DeleteOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DeleteOutlined = function DeleteOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DeleteOutlinedSvg\n  }));\n};\n\nDeleteOutlined.displayName = 'DeleteOutlined';\nexport default /*#__PURE__*/React.forwardRef(DeleteOutlined);","// This icon file is generated automatically.\nvar DownloadOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z\" } }] }, \"name\": \"download\", \"theme\": \"outlined\" };\nexport default DownloadOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport DownloadOutlinedSvg from \"@ant-design/icons-svg/es/asn/DownloadOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar DownloadOutlined = function DownloadOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: DownloadOutlinedSvg\n  }));\n};\n\nDownloadOutlined.displayName = 'DownloadOutlined';\nexport default /*#__PURE__*/React.forwardRef(DownloadOutlined);","import devWarning from '../_util/devWarning';\nexport function validProgress(progress) {\n  if (!progress || progress < 0) {\n    return 0;\n  }\n\n  if (progress > 100) {\n    return 100;\n  }\n\n  return progress;\n}\nexport function getSuccessPercent(_ref) {\n  var success = _ref.success,\n      successPercent = _ref.successPercent;\n  var percent = successPercent;\n  /** @deprecated Use `percent` instead */\n\n  if (success && 'progress' in success) {\n    devWarning(false, 'Progress', '`success.progress` is deprecated. Please use `success.percent` instead.');\n    percent = success.progress;\n  }\n\n  if (success && 'percent' in success) {\n    percent = success.percent;\n  }\n\n  return percent;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport { presetPrimaryColors } from '@ant-design/colors';\nimport { validProgress, getSuccessPercent } from './utils';\n/**\n * @example\n *   {\n *     \"0%\": \"#afc163\",\n *     \"75%\": \"#009900\",\n *     \"50%\": \"green\", // ====> '#afc163 0%, #66FF00 25%, #00CC00 50%, #009900 75%, #ffffff 100%'\n *     \"25%\": \"#66FF00\",\n *     \"100%\": \"#ffffff\"\n *   }\n */\n\nexport var sortGradient = function sortGradient(gradients) {\n  var tempArr = [];\n  Object.keys(gradients).forEach(function (key) {\n    var formattedKey = parseFloat(key.replace(/%/g, ''));\n\n    if (!isNaN(formattedKey)) {\n      tempArr.push({\n        key: formattedKey,\n        value: gradients[key]\n      });\n    }\n  });\n  tempArr = tempArr.sort(function (a, b) {\n    return a.key - b.key;\n  });\n  return tempArr.map(function (_ref) {\n    var key = _ref.key,\n        value = _ref.value;\n    return \"\".concat(value, \" \").concat(key, \"%\");\n  }).join(', ');\n};\n/**\n * Then this man came to realize the truth: Besides six pence, there is the moon. Besides bread and\n * butter, there is the bug. And... Besides women, there is the code.\n *\n * @example\n *   {\n *     \"0%\": \"#afc163\",\n *     \"25%\": \"#66FF00\",\n *     \"50%\": \"#00CC00\", // ====>  linear-gradient(to right, #afc163 0%, #66FF00 25%,\n *     \"75%\": \"#009900\", //        #00CC00 50%, #009900 75%, #ffffff 100%)\n *     \"100%\": \"#ffffff\"\n *   }\n */\n\nexport var handleGradient = function handleGradient(strokeColor, directionConfig) {\n  var _strokeColor$from = strokeColor.from,\n      from = _strokeColor$from === void 0 ? presetPrimaryColors.blue : _strokeColor$from,\n      _strokeColor$to = strokeColor.to,\n      to = _strokeColor$to === void 0 ? presetPrimaryColors.blue : _strokeColor$to,\n      _strokeColor$directio = strokeColor.direction,\n      direction = _strokeColor$directio === void 0 ? directionConfig === 'rtl' ? 'to left' : 'to right' : _strokeColor$directio,\n      rest = __rest(strokeColor, [\"from\", \"to\", \"direction\"]);\n\n  if (Object.keys(rest).length !== 0) {\n    var sortedGradients = sortGradient(rest);\n    return {\n      backgroundImage: \"linear-gradient(\".concat(direction, \", \").concat(sortedGradients, \")\")\n    };\n  }\n\n  return {\n    backgroundImage: \"linear-gradient(\".concat(direction, \", \").concat(from, \", \").concat(to, \")\")\n  };\n};\n\nvar Line = function Line(props) {\n  var prefixCls = props.prefixCls,\n      directionConfig = props.direction,\n      percent = props.percent,\n      strokeWidth = props.strokeWidth,\n      size = props.size,\n      strokeColor = props.strokeColor,\n      strokeLinecap = props.strokeLinecap,\n      children = props.children,\n      trailColor = props.trailColor,\n      success = props.success;\n  var backgroundProps = strokeColor && typeof strokeColor !== 'string' ? handleGradient(strokeColor, directionConfig) : {\n    background: strokeColor\n  };\n  var trailStyle = trailColor ? {\n    backgroundColor: trailColor\n  } : undefined;\n\n  var percentStyle = _extends({\n    width: \"\".concat(validProgress(percent), \"%\"),\n    height: strokeWidth || (size === 'small' ? 6 : 8),\n    borderRadius: strokeLinecap === 'square' ? 0 : ''\n  }, backgroundProps);\n\n  var successPercent = getSuccessPercent(props);\n  var successPercentStyle = {\n    width: \"\".concat(validProgress(successPercent), \"%\"),\n    height: strokeWidth || (size === 'small' ? 6 : 8),\n    borderRadius: strokeLinecap === 'square' ? 0 : '',\n    backgroundColor: success === null || success === void 0 ? void 0 : success.strokeColor\n  };\n  var successSegment = successPercent !== undefined ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-success-bg\"),\n    style: successPercentStyle\n  }) : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-outer\")\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-inner\"),\n    style: trailStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-bg\"),\n    style: percentStyle\n  }), successSegment)), children);\n};\n\nexport default Line;","import { useRef, useEffect } from 'react';\nexport var defaultProps = {\n  className: '',\n  percent: 0,\n  prefixCls: 'rc-progress',\n  strokeColor: '#2db7f5',\n  strokeLinecap: 'round',\n  strokeWidth: 1,\n  style: {},\n  trailColor: '#D9D9D9',\n  trailWidth: 1\n};\nexport var useTransitionDuration = function useTransitionDuration(percentList) {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  var paths = percentList.map(function () {\n    return useRef();\n  });\n  var prevTimeStamp = useRef(null);\n  useEffect(function () {\n    var now = Date.now();\n    var updated = false;\n    Object.keys(paths).forEach(function (key) {\n      var path = paths[key].current;\n\n      if (!path) {\n        return;\n      }\n\n      updated = true;\n      var pathStyle = path.style;\n      pathStyle.transitionDuration = '.3s, .3s, .3s, .06s';\n\n      if (prevTimeStamp.current && now - prevTimeStamp.current < 100) {\n        pathStyle.transitionDuration = '0s, 0s';\n      }\n    });\n\n    if (updated) {\n      prevTimeStamp.current = Date.now();\n    }\n  });\n  return [paths];\n};","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useTransitionDuration, defaultProps } from './common';\n\nvar Line = function Line(_ref) {\n  var className = _ref.className,\n      percent = _ref.percent,\n      prefixCls = _ref.prefixCls,\n      strokeColor = _ref.strokeColor,\n      strokeLinecap = _ref.strokeLinecap,\n      strokeWidth = _ref.strokeWidth,\n      style = _ref.style,\n      trailColor = _ref.trailColor,\n      trailWidth = _ref.trailWidth,\n      transition = _ref.transition,\n      restProps = _objectWithoutProperties(_ref, [\"className\", \"percent\", \"prefixCls\", \"strokeColor\", \"strokeLinecap\", \"strokeWidth\", \"style\", \"trailColor\", \"trailWidth\", \"transition\"]);\n\n  // eslint-disable-next-line no-param-reassign\n  delete restProps.gapPosition;\n  var percentList = Array.isArray(percent) ? percent : [percent];\n  var strokeColorList = Array.isArray(strokeColor) ? strokeColor : [strokeColor];\n\n  var _useTransitionDuratio = useTransitionDuration(percentList),\n      _useTransitionDuratio2 = _slicedToArray(_useTransitionDuratio, 1),\n      paths = _useTransitionDuratio2[0];\n\n  var center = strokeWidth / 2;\n  var right = 100 - strokeWidth / 2;\n  var pathString = \"M \".concat(strokeLinecap === 'round' ? center : 0, \",\").concat(center, \"\\n         L \").concat(strokeLinecap === 'round' ? right : 100, \",\").concat(center);\n  var viewBoxString = \"0 0 100 \".concat(strokeWidth);\n  var stackPtg = 0;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: classNames(\"\".concat(prefixCls, \"-line\"), className),\n    viewBox: viewBoxString,\n    preserveAspectRatio: \"none\",\n    style: style\n  }, restProps), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"\".concat(prefixCls, \"-line-trail\"),\n    d: pathString,\n    strokeLinecap: strokeLinecap,\n    stroke: trailColor,\n    strokeWidth: trailWidth || strokeWidth,\n    fillOpacity: \"0\"\n  }), percentList.map(function (ptg, index) {\n    var dashPercent = 1;\n\n    switch (strokeLinecap) {\n      case 'round':\n        dashPercent = 1 - strokeWidth / 100;\n        break;\n\n      case 'square':\n        dashPercent = 1 - strokeWidth / 2 / 100;\n        break;\n\n      default:\n        dashPercent = 1;\n        break;\n    }\n\n    var pathStyle = {\n      strokeDasharray: \"\".concat(ptg * dashPercent, \"px, 100px\"),\n      strokeDashoffset: \"-\".concat(stackPtg, \"px\"),\n      transition: transition || 'stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear'\n    };\n    var color = strokeColorList[index] || strokeColorList[strokeColorList.length - 1];\n    stackPtg += ptg;\n    return /*#__PURE__*/React.createElement(\"path\", {\n      key: index,\n      className: \"\".concat(prefixCls, \"-line-path\"),\n      d: pathString,\n      strokeLinecap: strokeLinecap,\n      stroke: color,\n      strokeWidth: strokeWidth,\n      fillOpacity: \"0\",\n      ref: paths[index],\n      style: pathStyle\n    });\n  }));\n};\n\nLine.defaultProps = defaultProps;\nLine.displayName = 'Line';\nexport default Line;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { useTransitionDuration, defaultProps } from './common';\nvar gradientSeed = 0;\n\nfunction stripPercentToNumber(percent) {\n  return +percent.replace('%', '');\n}\n\nfunction toArray(symArray) {\n  return Array.isArray(symArray) ? symArray : [symArray];\n}\n\nfunction getPathStyles(offset, percent, strokeColor, strokeWidth) {\n  var gapDegree = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  var gapPosition = arguments.length > 5 ? arguments[5] : undefined;\n  var radius = 50 - strokeWidth / 2;\n  var beginPositionX = 0;\n  var beginPositionY = -radius;\n  var endPositionX = 0;\n  var endPositionY = -2 * radius;\n\n  switch (gapPosition) {\n    case 'left':\n      beginPositionX = -radius;\n      beginPositionY = 0;\n      endPositionX = 2 * radius;\n      endPositionY = 0;\n      break;\n\n    case 'right':\n      beginPositionX = radius;\n      beginPositionY = 0;\n      endPositionX = -2 * radius;\n      endPositionY = 0;\n      break;\n\n    case 'bottom':\n      beginPositionY = radius;\n      endPositionY = 2 * radius;\n      break;\n\n    default:\n  }\n\n  var pathString = \"M 50,50 m \".concat(beginPositionX, \",\").concat(beginPositionY, \"\\n   a \").concat(radius, \",\").concat(radius, \" 0 1 1 \").concat(endPositionX, \",\").concat(-endPositionY, \"\\n   a \").concat(radius, \",\").concat(radius, \" 0 1 1 \").concat(-endPositionX, \",\").concat(endPositionY);\n  var len = Math.PI * 2 * radius;\n  var pathStyle = {\n    stroke: strokeColor,\n    strokeDasharray: \"\".concat(percent / 100 * (len - gapDegree), \"px \").concat(len, \"px\"),\n    strokeDashoffset: \"-\".concat(gapDegree / 2 + offset / 100 * (len - gapDegree), \"px\"),\n    transition: 'stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s'\n  };\n  return {\n    pathString: pathString,\n    pathStyle: pathStyle\n  };\n}\n\nvar Circle = function Circle(_ref) {\n  var prefixCls = _ref.prefixCls,\n      strokeWidth = _ref.strokeWidth,\n      trailWidth = _ref.trailWidth,\n      gapDegree = _ref.gapDegree,\n      gapPosition = _ref.gapPosition,\n      trailColor = _ref.trailColor,\n      strokeLinecap = _ref.strokeLinecap,\n      style = _ref.style,\n      className = _ref.className,\n      strokeColor = _ref.strokeColor,\n      percent = _ref.percent,\n      restProps = _objectWithoutProperties(_ref, [\"prefixCls\", \"strokeWidth\", \"trailWidth\", \"gapDegree\", \"gapPosition\", \"trailColor\", \"strokeLinecap\", \"style\", \"className\", \"strokeColor\", \"percent\"]);\n\n  var gradientId = React.useMemo(function () {\n    gradientSeed += 1;\n    return gradientSeed;\n  }, []);\n\n  var _getPathStyles = getPathStyles(0, 100, trailColor, strokeWidth, gapDegree, gapPosition),\n      pathString = _getPathStyles.pathString,\n      pathStyle = _getPathStyles.pathStyle;\n\n  var percentList = toArray(percent);\n  var strokeColorList = toArray(strokeColor);\n  var gradient = strokeColorList.find(function (color) {\n    return Object.prototype.toString.call(color) === '[object Object]';\n  });\n\n  var _useTransitionDuratio = useTransitionDuration(percentList),\n      _useTransitionDuratio2 = _slicedToArray(_useTransitionDuratio, 1),\n      paths = _useTransitionDuratio2[0];\n\n  var getStokeList = function getStokeList() {\n    var stackPtg = 0;\n    return percentList.map(function (ptg, index) {\n      var color = strokeColorList[index] || strokeColorList[strokeColorList.length - 1];\n      var stroke = Object.prototype.toString.call(color) === '[object Object]' ? \"url(#\".concat(prefixCls, \"-gradient-\").concat(gradientId, \")\") : '';\n      var pathStyles = getPathStyles(stackPtg, ptg, color, strokeWidth, gapDegree, gapPosition);\n      stackPtg += ptg;\n      return /*#__PURE__*/React.createElement(\"path\", {\n        key: index,\n        className: \"\".concat(prefixCls, \"-circle-path\"),\n        d: pathStyles.pathString,\n        stroke: stroke,\n        strokeLinecap: strokeLinecap,\n        strokeWidth: strokeWidth,\n        opacity: ptg === 0 ? 0 : 1,\n        fillOpacity: \"0\",\n        style: pathStyles.pathStyle,\n        ref: paths[index]\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    className: classNames(\"\".concat(prefixCls, \"-circle\"), className),\n    viewBox: \"0 0 100 100\",\n    style: style\n  }, restProps), gradient && /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    id: \"\".concat(prefixCls, \"-gradient-\").concat(gradientId),\n    x1: \"100%\",\n    y1: \"0%\",\n    x2: \"0%\",\n    y2: \"0%\"\n  }, Object.keys(gradient).sort(function (a, b) {\n    return stripPercentToNumber(a) - stripPercentToNumber(b);\n  }).map(function (key, index) {\n    return /*#__PURE__*/React.createElement(\"stop\", {\n      key: index,\n      offset: key,\n      stopColor: gradient[key]\n    });\n  }))), /*#__PURE__*/React.createElement(\"path\", {\n    className: \"\".concat(prefixCls, \"-circle-trail\"),\n    d: pathString,\n    stroke: trailColor,\n    strokeLinecap: strokeLinecap,\n    strokeWidth: trailWidth || strokeWidth,\n    fillOpacity: \"0\",\n    style: pathStyle\n  }), getStokeList().reverse());\n};\n\nCircle.defaultProps = defaultProps;\nCircle.displayName = 'Circle';\nexport default Circle;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport { Circle as RCCircle } from 'rc-progress';\nimport { presetPrimaryColors } from '@ant-design/colors';\nimport classNames from 'classnames';\nimport { validProgress, getSuccessPercent } from './utils';\n\nfunction getPercentage(_ref) {\n  var percent = _ref.percent,\n      success = _ref.success,\n      successPercent = _ref.successPercent;\n  var ptg = validProgress(percent);\n  var realSuccessPercent = getSuccessPercent({\n    success: success,\n    successPercent: successPercent\n  });\n\n  if (!realSuccessPercent) {\n    return ptg;\n  }\n\n  return [validProgress(realSuccessPercent), validProgress(ptg - validProgress(realSuccessPercent))];\n}\n\nfunction getStrokeColor(_ref2) {\n  var success = _ref2.success,\n      strokeColor = _ref2.strokeColor,\n      successPercent = _ref2.successPercent;\n  var color = strokeColor || null;\n  var realSuccessPercent = getSuccessPercent({\n    success: success,\n    successPercent: successPercent\n  });\n\n  if (!realSuccessPercent) {\n    return color;\n  }\n\n  return [presetPrimaryColors.green, color];\n}\n\nvar Circle = function Circle(props) {\n  var prefixCls = props.prefixCls,\n      width = props.width,\n      strokeWidth = props.strokeWidth,\n      trailColor = props.trailColor,\n      strokeLinecap = props.strokeLinecap,\n      gapPosition = props.gapPosition,\n      gapDegree = props.gapDegree,\n      type = props.type,\n      children = props.children;\n  var circleSize = width || 120;\n  var circleStyle = {\n    width: circleSize,\n    height: circleSize,\n    fontSize: circleSize * 0.15 + 6\n  };\n  var circleWidth = strokeWidth || 6;\n  var gapPos = gapPosition || type === 'dashboard' && 'bottom' || 'top';\n\n  var getGapDegree = function getGapDegree() {\n    // Support gapDeg = 0 when type = 'dashboard'\n    if (gapDegree || gapDegree === 0) {\n      return gapDegree;\n    }\n\n    if (type === 'dashboard') {\n      return 75;\n    }\n\n    return undefined;\n  }; // using className to style stroke color\n\n\n  var strokeColor = getStrokeColor(props);\n  var isGradient = Object.prototype.toString.call(strokeColor) === '[object Object]';\n  var wrapperClassName = classNames(\"\".concat(prefixCls, \"-inner\"), _defineProperty({}, \"\".concat(prefixCls, \"-circle-gradient\"), isGradient));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: wrapperClassName,\n    style: circleStyle\n  }, /*#__PURE__*/React.createElement(RCCircle, {\n    percent: getPercentage(props),\n    strokeWidth: circleWidth,\n    trailWidth: circleWidth,\n    strokeColor: strokeColor,\n    strokeLinecap: strokeLinecap,\n    trailColor: trailColor,\n    prefixCls: prefixCls,\n    gapDegree: getGapDegree(),\n    gapPosition: gapPos\n  }), children);\n};\n\nexport default Circle;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nvar Steps = function Steps(props) {\n  var size = props.size,\n      steps = props.steps,\n      _props$percent = props.percent,\n      percent = _props$percent === void 0 ? 0 : _props$percent,\n      _props$strokeWidth = props.strokeWidth,\n      strokeWidth = _props$strokeWidth === void 0 ? 8 : _props$strokeWidth,\n      strokeColor = props.strokeColor,\n      trailColor = props.trailColor,\n      prefixCls = props.prefixCls,\n      children = props.children;\n  var current = Math.round(steps * (percent / 100));\n  var stepWidth = size === 'small' ? 2 : 14;\n  var styledSteps = [];\n\n  for (var i = 0; i < steps; i += 1) {\n    styledSteps.push( /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      className: classNames(\"\".concat(prefixCls, \"-steps-item\"), _defineProperty({}, \"\".concat(prefixCls, \"-steps-item-active\"), i <= current - 1)),\n      style: {\n        backgroundColor: i <= current - 1 ? strokeColor : trailColor,\n        width: stepWidth,\n        height: strokeWidth\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-steps-outer\")\n  }, styledSteps, children);\n};\n\nexport default Steps;","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport omit from \"rc-util/es/omit\";\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport CheckOutlined from \"@ant-design/icons/es/icons/CheckOutlined\";\nimport CheckCircleFilled from \"@ant-design/icons/es/icons/CheckCircleFilled\";\nimport CloseCircleFilled from \"@ant-design/icons/es/icons/CloseCircleFilled\";\nimport { ConfigConsumer } from '../config-provider';\nimport { tuple } from '../_util/type';\nimport devWarning from '../_util/devWarning';\nimport Line from './Line';\nimport Circle from './Circle';\nimport Steps from './Steps';\nimport { validProgress, getSuccessPercent } from './utils';\nvar ProgressTypes = tuple('line', 'circle', 'dashboard');\nvar ProgressStatuses = tuple('normal', 'exception', 'active', 'success');\n\nvar Progress = /*#__PURE__*/function (_React$Component) {\n  _inherits(Progress, _React$Component);\n\n  var _super = _createSuper(Progress);\n\n  function Progress() {\n    var _this;\n\n    _classCallCheck(this, Progress);\n\n    _this = _super.apply(this, arguments);\n\n    _this.renderProgress = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls,\n          direction = _ref.direction;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          props = _assertThisInitialize.props;\n\n      var customizePrefixCls = props.prefixCls,\n          className = props.className,\n          size = props.size,\n          type = props.type,\n          steps = props.steps,\n          showInfo = props.showInfo,\n          strokeColor = props.strokeColor,\n          restProps = __rest(props, [\"prefixCls\", \"className\", \"size\", \"type\", \"steps\", \"showInfo\", \"strokeColor\"]);\n\n      var prefixCls = getPrefixCls('progress', customizePrefixCls);\n\n      var progressStatus = _this.getProgressStatus();\n\n      var progressInfo = _this.renderProcessInfo(prefixCls, progressStatus);\n\n      devWarning(!('successPercent' in props), 'Progress', '`successPercent` is deprecated. Please use `success.percent` instead.');\n      var progress; // Render progress shape\n\n      if (type === 'line') {\n        progress = steps ? /*#__PURE__*/React.createElement(Steps, _extends({}, _this.props, {\n          strokeColor: typeof strokeColor === 'string' ? strokeColor : undefined,\n          prefixCls: prefixCls,\n          steps: steps\n        }), progressInfo) : /*#__PURE__*/React.createElement(Line, _extends({}, _this.props, {\n          prefixCls: prefixCls,\n          direction: direction\n        }), progressInfo);\n      } else if (type === 'circle' || type === 'dashboard') {\n        progress = /*#__PURE__*/React.createElement(Circle, _extends({}, _this.props, {\n          prefixCls: prefixCls,\n          progressStatus: progressStatus\n        }), progressInfo);\n      }\n\n      var classString = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(type === 'dashboard' && 'circle' || steps && 'steps' || type), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-status-\").concat(progressStatus), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-show-info\"), showInfo), _defineProperty(_classNames, \"\".concat(prefixCls, \"-\").concat(size), size), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n      return /*#__PURE__*/React.createElement(\"div\", _extends({}, omit(restProps, ['status', 'format', 'trailColor', 'strokeWidth', 'width', 'gapDegree', 'gapPosition', 'strokeLinecap', 'percent', 'success', 'successPercent']), {\n        className: classString\n      }), progress);\n    };\n\n    return _this;\n  }\n\n  _createClass(Progress, [{\n    key: \"getPercentNumber\",\n    value: function getPercentNumber() {\n      var _this$props$percent = this.props.percent,\n          percent = _this$props$percent === void 0 ? 0 : _this$props$percent;\n      var successPercent = getSuccessPercent(this.props);\n      return parseInt(successPercent !== undefined ? successPercent.toString() : percent.toString(), 10);\n    }\n  }, {\n    key: \"getProgressStatus\",\n    value: function getProgressStatus() {\n      var status = this.props.status;\n\n      if (ProgressStatuses.indexOf(status) < 0 && this.getPercentNumber() >= 100) {\n        return 'success';\n      }\n\n      return status || 'normal';\n    }\n  }, {\n    key: \"renderProcessInfo\",\n    value: function renderProcessInfo(prefixCls, progressStatus) {\n      var _this$props = this.props,\n          showInfo = _this$props.showInfo,\n          format = _this$props.format,\n          type = _this$props.type,\n          percent = _this$props.percent;\n      var successPercent = getSuccessPercent(this.props);\n      if (!showInfo) return null;\n      var text;\n\n      var textFormatter = format || function (percentNumber) {\n        return \"\".concat(percentNumber, \"%\");\n      };\n\n      var isLineType = type === 'line';\n\n      if (format || progressStatus !== 'exception' && progressStatus !== 'success') {\n        text = textFormatter(validProgress(percent), validProgress(successPercent));\n      } else if (progressStatus === 'exception') {\n        text = isLineType ? /*#__PURE__*/React.createElement(CloseCircleFilled, null) : /*#__PURE__*/React.createElement(CloseOutlined, null);\n      } else if (progressStatus === 'success') {\n        text = isLineType ? /*#__PURE__*/React.createElement(CheckCircleFilled, null) : /*#__PURE__*/React.createElement(CheckOutlined, null);\n      }\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-text\"),\n        title: typeof text === 'string' ? text : undefined\n      }, text);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(ConfigConsumer, null, this.renderProgress);\n    }\n  }]);\n\n  return Progress;\n}(React.Component);\n\nexport { Progress as default };\nProgress.defaultProps = {\n  type: 'line',\n  percent: 0,\n  showInfo: true,\n  // null for different theme definition\n  trailColor: null,\n  size: 'default',\n  gapDegree: undefined,\n  strokeLinecap: 'round'\n};","import Progress from './progress';\nexport default Progress;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport CSSMotion from 'rc-motion';\nimport classNames from 'classnames';\nimport EyeOutlined from \"@ant-design/icons/es/icons/EyeOutlined\";\nimport DeleteOutlined from \"@ant-design/icons/es/icons/DeleteOutlined\";\nimport DownloadOutlined from \"@ant-design/icons/es/icons/DownloadOutlined\";\nimport Tooltip from '../../tooltip';\nimport Progress from '../../progress';\nvar ListItem = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var _classNames3;\n\n  var prefixCls = _ref.prefixCls,\n      className = _ref.className,\n      style = _ref.style,\n      locale = _ref.locale,\n      listType = _ref.listType,\n      file = _ref.file,\n      items = _ref.items,\n      progressProps = _ref.progress,\n      iconRender = _ref.iconRender,\n      actionIconRender = _ref.actionIconRender,\n      itemRender = _ref.itemRender,\n      isImgUrl = _ref.isImgUrl,\n      showPreviewIcon = _ref.showPreviewIcon,\n      showRemoveIcon = _ref.showRemoveIcon,\n      showDownloadIcon = _ref.showDownloadIcon,\n      customRemoveIcon = _ref.removeIcon,\n      customDownloadIcon = _ref.downloadIcon,\n      onPreview = _ref.onPreview,\n      onDownload = _ref.onDownload,\n      onClose = _ref.onClose;\n\n  var _a, _b; // Delay to show the progress bar\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      showProgress = _React$useState2[0],\n      setShowProgress = _React$useState2[1];\n\n  var progressRafRef = React.useRef();\n  React.useEffect(function () {\n    progressRafRef.current = setTimeout(function () {\n      setShowProgress(true);\n    }, 300);\n    return function () {\n      window.clearTimeout(progressRafRef.current);\n    };\n  }, []); // This is used for legacy span make scrollHeight the wrong value.\n  // We will force these to be `display: block` with non `picture-card`\n\n  var spanClassName = \"\".concat(prefixCls, \"-span\");\n  var iconNode = iconRender(file);\n  var icon = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-text-icon\")\n  }, iconNode);\n\n  if (listType === 'picture' || listType === 'picture-card') {\n    if (file.status === 'uploading' || !file.thumbUrl && !file.url) {\n      var _classNames;\n\n      var uploadingClassName = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-item-thumbnail\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-item-file\"), file.status !== 'uploading'), _classNames));\n      icon = /*#__PURE__*/React.createElement(\"div\", {\n        className: uploadingClassName\n      }, iconNode);\n    } else {\n      var _classNames2;\n\n      var thumbnail = (isImgUrl === null || isImgUrl === void 0 ? void 0 : isImgUrl(file)) ? /*#__PURE__*/React.createElement(\"img\", {\n        src: file.thumbUrl || file.url,\n        alt: file.name,\n        className: \"\".concat(prefixCls, \"-list-item-image\")\n      }) : iconNode;\n      var aClassName = classNames((_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-list-item-thumbnail\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-list-item-file\"), isImgUrl && !isImgUrl(file)), _classNames2));\n      icon = /*#__PURE__*/React.createElement(\"a\", {\n        className: aClassName,\n        onClick: function onClick(e) {\n          return onPreview(file, e);\n        },\n        href: file.url || file.thumbUrl,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\"\n      }, thumbnail);\n    }\n  }\n\n  var infoUploadingClass = classNames((_classNames3 = {}, _defineProperty(_classNames3, \"\".concat(prefixCls, \"-list-item\"), true), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-list-item-\").concat(file.status), true), _defineProperty(_classNames3, \"\".concat(prefixCls, \"-list-item-list-type-\").concat(listType), true), _classNames3));\n  var linkProps = typeof file.linkProps === 'string' ? JSON.parse(file.linkProps) : file.linkProps;\n  var removeIcon = showRemoveIcon ? actionIconRender((typeof customRemoveIcon === 'function' ? customRemoveIcon(file) : customRemoveIcon) || /*#__PURE__*/React.createElement(DeleteOutlined, null), function () {\n    return onClose(file);\n  }, prefixCls, locale.removeFile) : null;\n  var downloadIcon = showDownloadIcon && file.status === 'done' ? actionIconRender((typeof customDownloadIcon === 'function' ? customDownloadIcon(file) : customDownloadIcon) || /*#__PURE__*/React.createElement(DownloadOutlined, null), function () {\n    return onDownload(file);\n  }, prefixCls, locale.downloadFile) : null;\n  var downloadOrDelete = listType !== 'picture-card' && /*#__PURE__*/React.createElement(\"span\", {\n    key: \"download-delete\",\n    className: classNames(\"\".concat(prefixCls, \"-list-item-card-actions\"), {\n      picture: listType === 'picture'\n    })\n  }, downloadIcon, removeIcon);\n  var listItemNameClass = classNames(\"\".concat(prefixCls, \"-list-item-name\"));\n  var preview = file.url ? [/*#__PURE__*/React.createElement(\"a\", _extends({\n    key: \"view\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: listItemNameClass,\n    title: file.name\n  }, linkProps, {\n    href: file.url,\n    onClick: function onClick(e) {\n      return onPreview(file, e);\n    }\n  }), file.name), downloadOrDelete] : [/*#__PURE__*/React.createElement(\"span\", {\n    key: \"view\",\n    className: listItemNameClass,\n    onClick: function onClick(e) {\n      return onPreview(file, e);\n    },\n    title: file.name\n  }, file.name), downloadOrDelete];\n  var previewStyle = {\n    pointerEvents: 'none',\n    opacity: 0.5\n  };\n  var previewIcon = showPreviewIcon ? /*#__PURE__*/React.createElement(\"a\", {\n    href: file.url || file.thumbUrl,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    style: file.url || file.thumbUrl ? undefined : previewStyle,\n    onClick: function onClick(e) {\n      return onPreview(file, e);\n    },\n    title: locale.previewFile\n  }, /*#__PURE__*/React.createElement(EyeOutlined, null)) : null;\n  var actions = listType === 'picture-card' && file.status !== 'uploading' && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-list-item-actions\")\n  }, previewIcon, file.status === 'done' && downloadIcon, removeIcon);\n  var message;\n\n  if (file.response && typeof file.response === 'string') {\n    message = file.response;\n  } else {\n    message = ((_a = file.error) === null || _a === void 0 ? void 0 : _a.statusText) || ((_b = file.error) === null || _b === void 0 ? void 0 : _b.message) || locale.uploadError;\n  }\n\n  var iconAndPreview = /*#__PURE__*/React.createElement(\"span\", {\n    className: spanClassName\n  }, icon, preview);\n  var dom = /*#__PURE__*/React.createElement(\"div\", {\n    className: infoUploadingClass\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-list-item-info\")\n  }, iconAndPreview), actions, showProgress && /*#__PURE__*/React.createElement(CSSMotion, {\n    motionName: \"fade\",\n    visible: file.status === 'uploading'\n  }, function (_ref2) {\n    var motionClassName = _ref2.className;\n    // show loading icon if upload progress listener is disabled\n    var loadingProgress = 'percent' in file ? /*#__PURE__*/React.createElement(Progress, _extends({}, progressProps, {\n      type: \"line\",\n      percent: file.percent\n    })) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(\"\".concat(prefixCls, \"-list-item-progress\"), motionClassName)\n    }, loadingProgress);\n  }));\n  var listContainerNameClass = classNames(\"\".concat(prefixCls, \"-list-\").concat(listType, \"-container\"), className);\n  var item = file.status === 'error' ? /*#__PURE__*/React.createElement(Tooltip, {\n    title: message,\n    getPopupContainer: function getPopupContainer(node) {\n      return node.parentNode;\n    }\n  }, dom) : dom;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: listContainerNameClass,\n    style: style,\n    ref: ref\n  }, itemRender ? itemRender(item, file, items) : item);\n});\nexport default ListItem;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport CSSMotion, { CSSMotionList } from 'rc-motion';\nimport classNames from 'classnames';\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport PaperClipOutlined from \"@ant-design/icons/es/icons/PaperClipOutlined\";\nimport PictureTwoTone from \"@ant-design/icons/es/icons/PictureTwoTone\";\nimport FileTwoTone from \"@ant-design/icons/es/icons/FileTwoTone\";\nimport { cloneElement, isValidElement } from '../../_util/reactNode';\nimport { previewImage, isImageUrl } from '../utils';\nimport collapseMotion from '../../_util/motion';\nimport { ConfigContext } from '../../config-provider';\nimport Button from '../../button';\nimport useForceUpdate from '../../_util/hooks/useForceUpdate';\nimport ListItem from './ListItem';\n\nvar listItemMotion = _extends({}, collapseMotion);\n\ndelete listItemMotion.onAppearEnd;\ndelete listItemMotion.onEnterEnd;\ndelete listItemMotion.onLeaveEnd;\n\nvar InternalUploadList = function InternalUploadList(_ref, ref) {\n  var _classNames;\n\n  var listType = _ref.listType,\n      previewFile = _ref.previewFile,\n      onPreview = _ref.onPreview,\n      onDownload = _ref.onDownload,\n      onRemove = _ref.onRemove,\n      locale = _ref.locale,\n      iconRender = _ref.iconRender,\n      isImgUrl = _ref.isImageUrl,\n      customizePrefixCls = _ref.prefixCls,\n      _ref$items = _ref.items,\n      items = _ref$items === void 0 ? [] : _ref$items,\n      showPreviewIcon = _ref.showPreviewIcon,\n      showRemoveIcon = _ref.showRemoveIcon,\n      showDownloadIcon = _ref.showDownloadIcon,\n      removeIcon = _ref.removeIcon,\n      downloadIcon = _ref.downloadIcon,\n      progress = _ref.progress,\n      appendAction = _ref.appendAction,\n      itemRender = _ref.itemRender;\n  var forceUpdate = useForceUpdate();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      motionAppear = _React$useState2[0],\n      setMotionAppear = _React$useState2[1]; // ============================= Effect =============================\n\n\n  React.useEffect(function () {\n    if (listType !== 'picture' && listType !== 'picture-card') {\n      return;\n    }\n\n    (items || []).forEach(function (file) {\n      if (typeof document === 'undefined' || typeof window === 'undefined' || !window.FileReader || !window.File || !(file.originFileObj instanceof File || file.originFileObj instanceof Blob) || file.thumbUrl !== undefined) {\n        return;\n      }\n\n      file.thumbUrl = '';\n\n      if (previewFile) {\n        previewFile(file.originFileObj).then(function (previewDataUrl) {\n          // Need append '' to avoid dead loop\n          file.thumbUrl = previewDataUrl || '';\n          forceUpdate();\n        });\n      }\n    });\n  }, [listType, items, previewFile]);\n  React.useEffect(function () {\n    setMotionAppear(true);\n  }, []); // ============================= Events =============================\n\n  var onInternalPreview = function onInternalPreview(file, e) {\n    if (!onPreview) {\n      return;\n    }\n\n    e.preventDefault();\n    return onPreview(file);\n  };\n\n  var onInternalDownload = function onInternalDownload(file) {\n    if (typeof onDownload === 'function') {\n      onDownload(file);\n    } else if (file.url) {\n      window.open(file.url);\n    }\n  };\n\n  var onInternalClose = function onInternalClose(file) {\n    if (onRemove) {\n      onRemove(file);\n    }\n  };\n\n  var internalIconRender = function internalIconRender(file) {\n    if (iconRender) {\n      return iconRender(file, listType);\n    }\n\n    var isLoading = file.status === 'uploading';\n    var fileIcon = isImgUrl && isImgUrl(file) ? /*#__PURE__*/React.createElement(PictureTwoTone, null) : /*#__PURE__*/React.createElement(FileTwoTone, null);\n    var icon = isLoading ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : /*#__PURE__*/React.createElement(PaperClipOutlined, null);\n\n    if (listType === 'picture') {\n      icon = isLoading ? /*#__PURE__*/React.createElement(LoadingOutlined, null) : fileIcon;\n    } else if (listType === 'picture-card') {\n      icon = isLoading ? locale.uploading : fileIcon;\n    }\n\n    return icon;\n  };\n\n  var actionIconRender = function actionIconRender(customIcon, callback, prefixCls, title) {\n    var btnProps = {\n      type: 'text',\n      size: 'small',\n      title: title,\n      onClick: function onClick(e) {\n        callback();\n\n        if (isValidElement(customIcon) && customIcon.props.onClick) {\n          customIcon.props.onClick(e);\n        }\n      },\n      className: \"\".concat(prefixCls, \"-list-item-card-actions-btn\")\n    };\n\n    if (isValidElement(customIcon)) {\n      var btnIcon = cloneElement(customIcon, _extends(_extends({}, customIcon.props), {\n        onClick: function onClick() {}\n      }));\n      return /*#__PURE__*/React.createElement(Button, _extends({}, btnProps, {\n        icon: btnIcon\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(Button, btnProps, /*#__PURE__*/React.createElement(\"span\", null, customIcon));\n  }; // ============================== Ref ===============================\n  // Test needs\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      handlePreview: onInternalPreview,\n      handleDownload: onInternalDownload\n    };\n  });\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction; // ============================= Render =============================\n\n\n  var prefixCls = getPrefixCls('upload', customizePrefixCls);\n  var listClassNames = classNames((_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-list\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-\").concat(listType), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-list-rtl\"), direction === 'rtl'), _classNames)); // >>> Motion config\n\n  var motionKeyList = _toConsumableArray(items.map(function (file) {\n    return {\n      key: file.uid,\n      file: file\n    };\n  }));\n\n  var animationDirection = listType === 'picture-card' ? 'animate-inline' : 'animate'; // const transitionName = list.length === 0 ? '' : `${prefixCls}-${animationDirection}`;\n\n  var motionConfig = {\n    motionName: \"\".concat(prefixCls, \"-\").concat(animationDirection),\n    keys: motionKeyList,\n    motionAppear: motionAppear\n  };\n\n  if (listType !== 'picture-card') {\n    motionConfig = _extends(_extends({}, listItemMotion), motionConfig);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: listClassNames\n  }, /*#__PURE__*/React.createElement(CSSMotionList, _extends({}, motionConfig, {\n    component: false\n  }), function (_ref2) {\n    var key = _ref2.key,\n        file = _ref2.file,\n        motionClassName = _ref2.className,\n        motionStyle = _ref2.style;\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: key,\n      locale: locale,\n      prefixCls: prefixCls,\n      className: motionClassName,\n      style: motionStyle,\n      file: file,\n      items: items,\n      progress: progress,\n      listType: listType,\n      isImgUrl: isImgUrl,\n      showPreviewIcon: showPreviewIcon,\n      showRemoveIcon: showRemoveIcon,\n      showDownloadIcon: showDownloadIcon,\n      removeIcon: removeIcon,\n      downloadIcon: downloadIcon,\n      iconRender: internalIconRender,\n      actionIconRender: actionIconRender,\n      itemRender: itemRender,\n      onPreview: onInternalPreview,\n      onDownload: onInternalDownload,\n      onClose: onInternalClose\n    });\n  }), appendAction && /*#__PURE__*/React.createElement(CSSMotion, motionConfig, function (_ref3) {\n    var motionClassName = _ref3.className,\n        motionStyle = _ref3.style;\n    return cloneElement(appendAction, function (oriProps) {\n      return {\n        className: classNames(oriProps.className, motionClassName),\n        style: _extends(_extends({}, motionStyle), oriProps.style)\n      };\n    });\n  }));\n};\n\nvar UploadList = /*#__PURE__*/React.forwardRef(InternalUploadList);\nUploadList.displayName = 'UploadList';\nUploadList.defaultProps = {\n  listType: 'text',\n  progress: {\n    strokeWidth: 2,\n    showInfo: false\n  },\n  showRemoveIcon: true,\n  showDownloadIcon: false,\n  showPreviewIcon: true,\n  previewFile: previewImage,\n  isImageUrl: isImageUrl\n};\nexport default UploadList;","import { useRef, useEffect } from 'react';\nimport raf from \"rc-util/es/raf\";\nimport useForceUpdate from '../_util/hooks/useForceUpdate'; // Note. Only for upload usage. Do not export to global util hooks\n\nexport default function useFreshState(defaultValue, propValue) {\n  var valueRef = useRef(defaultValue);\n  var forceUpdate = useForceUpdate();\n  var rafRef = useRef(); // Set value\n\n  function setValue(newValue) {\n    valueRef.current = newValue;\n    forceUpdate();\n  }\n\n  function cleanUp() {\n    raf.cancel(rafRef.current);\n  }\n\n  function rafSyncValue(newValue) {\n    cleanUp();\n    rafRef.current = raf(function () {\n      setValue(newValue);\n    });\n  } // Get value\n\n\n  function getValue() {\n    var displayValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n    if (displayValue) {\n      return propValue || valueRef.current;\n    }\n\n    return valueRef.current;\n  } // Effect will always update in a next frame to avoid sync state overwrite current processing state\n\n\n  useEffect(function () {\n    if (propValue) {\n      rafSyncValue(propValue);\n    }\n  }, [propValue]); // Clean up\n\n  useEffect(function () {\n    return function () {\n      cleanUp();\n    };\n  }, []);\n  return [getValue, setValue];\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport RcUpload from 'rc-upload';\nimport classNames from 'classnames';\nimport Dragger from './Dragger';\nimport UploadList from './UploadList';\nimport { T, fileToObject, getFileItem, removeFileItem } from './utils';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale/default';\nimport { ConfigContext } from '../config-provider';\nimport devWarning from '../_util/devWarning';\nimport useForceUpdate from '../_util/hooks/useForceUpdate';\nimport useFreshState from './useFreshState';\n\nvar InternalUpload = function InternalUpload(props, ref) {\n  var _classNames2;\n\n  var fileListProp = props.fileList,\n      defaultFileList = props.defaultFileList,\n      onRemove = props.onRemove,\n      showUploadList = props.showUploadList,\n      listType = props.listType,\n      onPreview = props.onPreview,\n      onDownload = props.onDownload,\n      onChange = props.onChange,\n      previewFile = props.previewFile,\n      disabled = props.disabled,\n      propLocale = props.locale,\n      iconRender = props.iconRender,\n      isImageUrl = props.isImageUrl,\n      progress = props.progress,\n      customizePrefixCls = props.prefixCls,\n      className = props.className,\n      type = props.type,\n      children = props.children,\n      style = props.style,\n      itemRender = props.itemRender,\n      maxCount = props.maxCount;\n\n  var _React$useState = React.useState('drop'),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dragState = _React$useState2[0],\n      setDragState = _React$useState2[1];\n\n  var forceUpdate = useForceUpdate(); // Refresh always use fresh data\n\n  var _useFreshState = useFreshState(fileListProp || defaultFileList || [], fileListProp),\n      _useFreshState2 = _slicedToArray(_useFreshState, 2),\n      getFileList = _useFreshState2[0],\n      setFileList = _useFreshState2[1];\n\n  var upload = React.useRef();\n  React.useEffect(function () {\n    devWarning('fileList' in props || !('value' in props), 'Upload', '`value` is not a valid prop, do you mean `fileList`?');\n    devWarning(!('transformFile' in props), 'Upload', '`transformFile` is deprecated. Please use `beforeUpload` directly.');\n  }, []); // Control mode will auto fill file uid if not provided\n\n  React.useEffect(function () {\n    var timestamp = Date.now();\n    (fileListProp || []).forEach(function (file, index) {\n      var _a;\n\n      file.uid = (_a = file.uid) !== null && _a !== void 0 ? _a : \"__AUTO__\".concat(timestamp, \"_\").concat(index, \"__\");\n    });\n  }, [fileListProp]);\n\n  var onInternalChange = function onInternalChange(info) {\n    var cloneList = _toConsumableArray(info.fileList); // Cut to match count\n\n\n    if (maxCount === 1) {\n      cloneList = cloneList.slice(-1);\n    } else if (maxCount) {\n      cloneList = cloneList.slice(0, maxCount);\n    }\n\n    setFileList(cloneList);\n    onChange === null || onChange === void 0 ? void 0 : onChange(_extends(_extends({}, info), {\n      fileList: cloneList\n    }));\n  };\n\n  var onStart = function onStart(file) {\n    var targetItem = fileToObject(file);\n    targetItem.status = 'uploading';\n    var nextFileList = getFileList().concat();\n    var fileIndex = nextFileList.findIndex(function (_ref) {\n      var uid = _ref.uid;\n      return uid === targetItem.uid;\n    });\n\n    if (fileIndex === -1) {\n      nextFileList.push(targetItem);\n    } else {\n      nextFileList[fileIndex] = targetItem;\n    }\n\n    onInternalChange({\n      file: targetItem,\n      fileList: nextFileList\n    });\n  };\n\n  var onSuccess = function onSuccess(response, file, xhr) {\n    try {\n      if (typeof response === 'string') {\n        response = JSON.parse(response);\n      }\n    } catch (e) {\n      /* do nothing */\n    }\n\n    var targetItem = getFileItem(file, getFileList()); // removed\n\n    if (!targetItem) {\n      return;\n    }\n\n    targetItem.status = 'done';\n    targetItem.response = response;\n    targetItem.xhr = xhr;\n    onInternalChange({\n      file: _extends({}, targetItem),\n      fileList: getFileList().concat()\n    });\n  };\n\n  var onProgress = function onProgress(e, file) {\n    var targetItem = getFileItem(file, getFileList()); // removed\n\n    if (!targetItem) {\n      return;\n    }\n\n    targetItem.percent = e.percent;\n    onInternalChange({\n      event: e,\n      file: _extends({}, targetItem),\n      fileList: getFileList().concat()\n    });\n  };\n\n  var onError = function onError(error, response, file) {\n    var targetItem = getFileItem(file, getFileList()); // removed\n\n    if (!targetItem) {\n      return;\n    }\n\n    targetItem.error = error;\n    targetItem.response = response;\n    targetItem.status = 'error';\n    onInternalChange({\n      file: _extends({}, targetItem),\n      fileList: getFileList().concat()\n    });\n  };\n\n  var handleRemove = function handleRemove(file) {\n    var currentFile;\n    Promise.resolve(typeof onRemove === 'function' ? onRemove(file) : onRemove).then(function (ret) {\n      var _a; // Prevent removing file\n\n\n      if (ret === false) {\n        return;\n      }\n\n      var fileList = getFileList();\n      var removedFileList = removeFileItem(file, fileList);\n\n      if (removedFileList) {\n        currentFile = _extends(_extends({}, file), {\n          status: 'removed'\n        });\n        fileList === null || fileList === void 0 ? void 0 : fileList.forEach(function (item) {\n          var matchKey = currentFile.uid !== undefined ? 'uid' : 'name';\n\n          if (item[matchKey] === currentFile[matchKey]) {\n            item.status = 'removed';\n          }\n        });\n        (_a = upload.current) === null || _a === void 0 ? void 0 : _a.abort(currentFile);\n        onInternalChange({\n          file: currentFile,\n          fileList: removedFileList\n        });\n      }\n    });\n  };\n\n  var onFileDrop = function onFileDrop(e) {\n    setDragState(e.type);\n  };\n\n  var beforeUpload = function beforeUpload(file, fileListArgs) {\n    var beforeUploadProp = props.beforeUpload;\n\n    if (!beforeUploadProp) {\n      return true;\n    }\n\n    var result = beforeUploadProp(file, fileListArgs);\n\n    if (result === false) {\n      // Get unique file list\n      var uniqueList = [];\n      getFileList().concat(fileListArgs.map(fileToObject)).forEach(function (f) {\n        if (uniqueList.every(function (uf) {\n          return uf.uid !== f.uid;\n        })) {\n          uniqueList.push(f);\n        }\n      });\n      onInternalChange({\n        file: file,\n        fileList: uniqueList\n      });\n      return false;\n    }\n\n    if (result && result.then) {\n      return result;\n    }\n\n    return true;\n  }; // Test needs\n\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      onStart: onStart,\n      onSuccess: onSuccess,\n      onProgress: onProgress,\n      onError: onError,\n      fileList: getFileList(),\n      upload: upload.current,\n      forceUpdate: forceUpdate\n    };\n  });\n\n  var _React$useContext = React.useContext(ConfigContext),\n      getPrefixCls = _React$useContext.getPrefixCls,\n      direction = _React$useContext.direction;\n\n  var prefixCls = getPrefixCls('upload', customizePrefixCls);\n\n  var rcUploadProps = _extends(_extends({\n    onStart: onStart,\n    onError: onError,\n    onProgress: onProgress,\n    onSuccess: onSuccess\n  }, props), {\n    prefixCls: prefixCls,\n    beforeUpload: beforeUpload,\n    onChange: undefined\n  });\n\n  delete rcUploadProps.className;\n  delete rcUploadProps.style; // Remove id to avoid open by label when trigger is hidden\n  // !children: https://github.com/ant-design/ant-design/issues/14298\n  // disabled: https://github.com/ant-design/ant-design/issues/16478\n  //           https://github.com/ant-design/ant-design/issues/24197\n\n  if (!children || disabled) {\n    delete rcUploadProps.id;\n  }\n\n  var renderUploadList = function renderUploadList(button) {\n    return showUploadList ? /*#__PURE__*/React.createElement(LocaleReceiver, {\n      componentName: \"Upload\",\n      defaultLocale: defaultLocale.Upload\n    }, function (locale) {\n      var _ref2 = typeof showUploadList === 'boolean' ? {} : showUploadList,\n          showRemoveIcon = _ref2.showRemoveIcon,\n          showPreviewIcon = _ref2.showPreviewIcon,\n          showDownloadIcon = _ref2.showDownloadIcon,\n          removeIcon = _ref2.removeIcon,\n          downloadIcon = _ref2.downloadIcon;\n\n      return /*#__PURE__*/React.createElement(UploadList, {\n        listType: listType,\n        items: getFileList(true),\n        previewFile: previewFile,\n        onPreview: onPreview,\n        onDownload: onDownload,\n        onRemove: handleRemove,\n        showRemoveIcon: !disabled && showRemoveIcon,\n        showPreviewIcon: showPreviewIcon,\n        showDownloadIcon: showDownloadIcon,\n        removeIcon: removeIcon,\n        downloadIcon: downloadIcon,\n        iconRender: iconRender,\n        locale: _extends(_extends({}, locale), propLocale),\n        isImageUrl: isImageUrl,\n        progress: progress,\n        appendAction: button,\n        itemRender: itemRender\n      });\n    }) : button;\n  };\n\n  if (type === 'drag') {\n    var _classNames;\n\n    var dragCls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-uploading\"), getFileList().some(function (file) {\n      return file.status === 'uploading';\n    })), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-hover\"), dragState === 'dragover'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), className);\n    return /*#__PURE__*/React.createElement(\"span\", null, /*#__PURE__*/React.createElement(\"div\", {\n      className: dragCls,\n      onDrop: onFileDrop,\n      onDragOver: onFileDrop,\n      onDragLeave: onFileDrop,\n      style: style\n    }, /*#__PURE__*/React.createElement(RcUpload, _extends({}, rcUploadProps, {\n      ref: upload,\n      className: \"\".concat(prefixCls, \"-btn\")\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-drag-container\")\n    }, children))), renderUploadList());\n  }\n\n  var uploadButtonCls = classNames(prefixCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select-\").concat(listType), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames2));\n  var uploadButton = /*#__PURE__*/React.createElement(\"div\", {\n    className: uploadButtonCls,\n    style: children ? undefined : {\n      display: 'none'\n    }\n  }, /*#__PURE__*/React.createElement(RcUpload, _extends({}, rcUploadProps, {\n    ref: upload\n  })));\n\n  if (listType === 'picture-card') {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      className: classNames(\"\".concat(prefixCls, \"-picture-card-wrapper\"), className)\n    }, renderUploadList(uploadButton));\n  }\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: className\n  }, uploadButton, renderUploadList());\n};\n\nvar Upload = /*#__PURE__*/React.forwardRef(InternalUpload);\nUpload.Dragger = Dragger;\nUpload.displayName = 'Upload';\nUpload.defaultProps = {\n  type: 'select',\n  multiple: false,\n  action: '',\n  data: {},\n  accept: '',\n  beforeUpload: T,\n  showUploadList: true,\n  listType: 'text',\n  className: '',\n  disabled: false,\n  supportServerRender: true\n};\nexport default Upload;","import Upload from './Upload';\nimport Dragger from './Dragger';\nUpload.Dragger = Dragger;\nexport default Upload;","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","export const INIT_COORDS = 'dnd-core/INIT_COORDS'\nexport const BEGIN_DRAG = 'dnd-core/BEGIN_DRAG'\nexport const PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE'\nexport const HOVER = 'dnd-core/HOVER'\nexport const DROP = 'dnd-core/DROP'\nexport const END_DRAG = 'dnd-core/END_DRAG'\n","import type { AnyAction } from 'redux'\n\nimport type { XYCoord } from '../../../interfaces.js'\nimport { INIT_COORDS } from '../types.js'\n\nexport function setClientOffset(\n\tclientOffset: XYCoord | null | undefined,\n\tsourceClientOffset?: XYCoord | null | undefined,\n): AnyAction {\n\treturn {\n\t\ttype: INIT_COORDS,\n\t\tpayload: {\n\t\t\tsourceClientOffset: sourceClientOffset || null,\n\t\t\tclientOffset: clientOffset || null,\n\t\t},\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tBeginDragOptions,\n\tBeginDragPayload,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tXYCoord,\n} from '../../interfaces.js'\nimport { isObject } from '../../utils/js_utils.js'\nimport { setClientOffset } from './local/setClientOffset.js'\nimport { BEGIN_DRAG, INIT_COORDS } from './types.js'\n\nconst ResetCoordinatesAction = {\n\ttype: INIT_COORDS,\n\tpayload: {\n\t\tclientOffset: null,\n\t\tsourceClientOffset: null,\n\t},\n}\n\nexport function createBeginDrag(manager: DragDropManager) {\n\treturn function beginDrag(\n\t\tsourceIds: Identifier[] = [],\n\t\toptions: BeginDragOptions = {\n\t\t\tpublishSource: true,\n\t\t},\n\t): Action<BeginDragPayload> | undefined {\n\t\tconst {\n\t\t\tpublishSource = true,\n\t\t\tclientOffset,\n\t\t\tgetSourceClientOffset,\n\t\t}: BeginDragOptions = options\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\n\t\t// Initialize the coordinates using the client offset\n\t\tmanager.dispatch(setClientOffset(clientOffset))\n\n\t\tverifyInvariants(sourceIds, monitor, registry)\n\n\t\t// Get the draggable source\n\t\tconst sourceId = getDraggableSource(sourceIds, monitor)\n\t\tif (sourceId == null) {\n\t\t\tmanager.dispatch(ResetCoordinatesAction)\n\t\t\treturn\n\t\t}\n\n\t\t// Get the source client offset\n\t\tlet sourceClientOffset: XYCoord | null = null\n\t\tif (clientOffset) {\n\t\t\tif (!getSourceClientOffset) {\n\t\t\t\tthrow new Error('getSourceClientOffset must be defined')\n\t\t\t}\n\t\t\tverifyGetSourceClientOffsetIsFunction(getSourceClientOffset)\n\t\t\tsourceClientOffset = getSourceClientOffset(sourceId)\n\t\t}\n\n\t\t// Initialize the full coordinates\n\t\tmanager.dispatch(setClientOffset(clientOffset, sourceClientOffset))\n\n\t\tconst source = registry.getSource(sourceId)\n\t\tconst item = source.beginDrag(monitor, sourceId)\n\t\t// If source.beginDrag returns null, this is an indicator to cancel the drag\n\t\tif (item == null) {\n\t\t\treturn undefined\n\t\t}\n\t\tverifyItemIsObject(item)\n\t\tregistry.pinSource(sourceId)\n\n\t\tconst itemType = registry.getSourceType(sourceId)\n\t\treturn {\n\t\t\ttype: BEGIN_DRAG,\n\t\t\tpayload: {\n\t\t\t\titemType,\n\t\t\t\titem,\n\t\t\t\tsourceId,\n\t\t\t\tclientOffset: clientOffset || null,\n\t\t\t\tsourceClientOffset: sourceClientOffset || null,\n\t\t\t\tisSourcePublic: !!publishSource,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction verifyInvariants(\n\tsourceIds: Identifier[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\tinvariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.')\n\tsourceIds.forEach(function (sourceId) {\n\t\tinvariant(\n\t\t\tregistry.getSource(sourceId),\n\t\t\t'Expected sourceIds to be registered.',\n\t\t)\n\t})\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset: any) {\n\tinvariant(\n\t\ttypeof getSourceClientOffset === 'function',\n\t\t'When clientOffset is provided, getSourceClientOffset must be a function.',\n\t)\n}\n\nfunction verifyItemIsObject(item: any) {\n\tinvariant(isObject(item), 'Item must be an object.')\n}\n\nfunction getDraggableSource(sourceIds: Identifier[], monitor: DragDropMonitor) {\n\tlet sourceId = null\n\tfor (let i = sourceIds.length - 1; i >= 0; i--) {\n\t\tif (monitor.canDragSource(sourceIds[i])) {\n\t\t\tsourceId = sourceIds[i]\n\t\t\tbreak\n\t\t}\n\t}\n\treturn sourceId\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tDragDropManager,\n\tDragDropMonitor,\n\tDropPayload,\n\tHandlerRegistry,\n\tIdentifier,\n} from '../../interfaces.js'\nimport { isObject } from '../../utils/js_utils.js'\nimport { DROP } from './types.js'\n\nexport function createDrop(manager: DragDropManager) {\n\treturn function drop(options = {}): void {\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tverifyInvariants(monitor)\n\t\tconst targetIds = getDroppableTargets(monitor)\n\n\t\t// Multiple actions are dispatched here, which is why this doesn't return an action\n\t\ttargetIds.forEach((targetId, index) => {\n\t\t\tconst dropResult = determineDropResult(targetId, index, registry, monitor)\n\t\t\tconst action: Action<DropPayload> = {\n\t\t\t\ttype: DROP,\n\t\t\t\tpayload: {\n\t\t\t\t\tdropResult: {\n\t\t\t\t\t\t...options,\n\t\t\t\t\t\t...dropResult,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t\tmanager.dispatch(action)\n\t\t})\n\t}\n}\n\nfunction verifyInvariants(monitor: DragDropMonitor) {\n\tinvariant(monitor.isDragging(), 'Cannot call drop while not dragging.')\n\tinvariant(\n\t\t!monitor.didDrop(),\n\t\t'Cannot call drop twice during one drag operation.',\n\t)\n}\n\nfunction determineDropResult(\n\ttargetId: Identifier,\n\tindex: number,\n\tregistry: HandlerRegistry,\n\tmonitor: DragDropMonitor,\n) {\n\tconst target = registry.getTarget(targetId)\n\tlet dropResult = target ? target.drop(monitor, targetId) : undefined\n\tverifyDropResultType(dropResult)\n\tif (typeof dropResult === 'undefined') {\n\t\tdropResult = index === 0 ? {} : monitor.getDropResult()\n\t}\n\treturn dropResult\n}\n\nfunction verifyDropResultType(dropResult: any) {\n\tinvariant(\n\t\ttypeof dropResult === 'undefined' || isObject(dropResult),\n\t\t'Drop result must either be an object or undefined.',\n\t)\n}\n\nfunction getDroppableTargets(monitor: DragDropMonitor) {\n\tconst targetIds = monitor\n\t\t.getTargetIds()\n\t\t.filter(monitor.canDropOnTarget, monitor)\n\ttargetIds.reverse()\n\treturn targetIds\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tSentinelAction,\n} from '../../interfaces.js'\nimport { END_DRAG } from './types.js'\n\nexport function createEndDrag(manager: DragDropManager) {\n\treturn function endDrag(): SentinelAction {\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tverifyIsDragging(monitor)\n\n\t\tconst sourceId = monitor.getSourceId()\n\t\tif (sourceId != null) {\n\t\t\tconst source = registry.getSource(sourceId, true)\n\t\t\tsource.endDrag(monitor, sourceId)\n\t\t\tregistry.unpinSource()\n\t\t}\n\t\treturn { type: END_DRAG }\n\t}\n}\n\nfunction verifyIsDragging(monitor: DragDropMonitor) {\n\tinvariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.')\n}\n","import type { Identifier } from '../interfaces.js'\n\nexport function matchesType(\n\ttargetType: Identifier | Identifier[] | null,\n\tdraggedItemType: Identifier | null,\n): boolean {\n\tif (draggedItemType === null) {\n\t\treturn targetType === null\n\t}\n\treturn Array.isArray(targetType)\n\t\t? (targetType as Identifier[]).some((t) => t === draggedItemType)\n\t\t: targetType === draggedItemType\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tAction,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tHoverOptions,\n\tHoverPayload,\n\tIdentifier,\n} from '../../interfaces.js'\nimport { matchesType } from '../../utils/matchesType.js'\nimport { HOVER } from './types.js'\n\nexport function createHover(manager: DragDropManager) {\n\treturn function hover(\n\t\ttargetIdsArg: string[],\n\t\t{ clientOffset }: HoverOptions = {},\n\t): Action<HoverPayload> {\n\t\tverifyTargetIdsIsArray(targetIdsArg)\n\t\tconst targetIds = targetIdsArg.slice(0)\n\t\tconst monitor = manager.getMonitor()\n\t\tconst registry = manager.getRegistry()\n\t\tconst draggedItemType = monitor.getItemType()\n\t\tremoveNonMatchingTargetIds(targetIds, registry, draggedItemType)\n\t\tcheckInvariants(targetIds, monitor, registry)\n\t\thoverAllTargets(targetIds, monitor, registry)\n\n\t\treturn {\n\t\t\ttype: HOVER,\n\t\t\tpayload: {\n\t\t\t\ttargetIds,\n\t\t\t\tclientOffset: clientOffset || null,\n\t\t\t},\n\t\t}\n\t}\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg: string[]) {\n\tinvariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.')\n}\n\nfunction checkInvariants(\n\ttargetIds: string[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\tinvariant(monitor.isDragging(), 'Cannot call hover while not dragging.')\n\tinvariant(!monitor.didDrop(), 'Cannot call hover after drop.')\n\tfor (let i = 0; i < targetIds.length; i++) {\n\t\tconst targetId = targetIds[i] as string\n\t\tinvariant(\n\t\t\ttargetIds.lastIndexOf(targetId) === i,\n\t\t\t'Expected targetIds to be unique in the passed array.',\n\t\t)\n\n\t\tconst target = registry.getTarget(targetId)\n\t\tinvariant(target, 'Expected targetIds to be registered.')\n\t}\n}\n\nfunction removeNonMatchingTargetIds(\n\ttargetIds: string[],\n\tregistry: HandlerRegistry,\n\tdraggedItemType: Identifier | null,\n) {\n\t// Remove those targetIds that don't match the targetType.  This\n\t// fixes shallow isOver which would only be non-shallow because of\n\t// non-matching targets.\n\tfor (let i = targetIds.length - 1; i >= 0; i--) {\n\t\tconst targetId = targetIds[i] as string\n\t\tconst targetType = registry.getTargetType(targetId)\n\t\tif (!matchesType(targetType, draggedItemType)) {\n\t\t\ttargetIds.splice(i, 1)\n\t\t}\n\t}\n}\n\nfunction hoverAllTargets(\n\ttargetIds: string[],\n\tmonitor: DragDropMonitor,\n\tregistry: HandlerRegistry,\n) {\n\t// Finally call hover on all matching targets.\n\ttargetIds.forEach(function (targetId) {\n\t\tconst target = registry.getTarget(targetId)\n\t\ttarget.hover(monitor, targetId)\n\t})\n}\n","import type { DragDropManager, SentinelAction } from '../../interfaces.js'\nimport { PUBLISH_DRAG_SOURCE } from './types.js'\n\nexport function createPublishDragSource(manager: DragDropManager) {\n\treturn function publishDragSource(): SentinelAction | undefined {\n\t\tconst monitor = manager.getMonitor()\n\t\tif (monitor.isDragging()) {\n\t\t\treturn { type: PUBLISH_DRAG_SOURCE }\n\t\t}\n\t\treturn\n\t}\n}\n","import type { Action, Store } from 'redux'\n\nimport { createDragDropActions } from '../actions/dragDrop/index.js'\nimport type {\n\tActionCreator,\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n} from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport type { DragDropMonitorImpl } from './DragDropMonitorImpl.js'\n\nexport class DragDropManagerImpl implements DragDropManager {\n\tprivate store: Store<State>\n\tprivate monitor: DragDropMonitor\n\tprivate backend: Backend | undefined\n\tprivate isSetUp = false\n\n\tpublic constructor(store: Store<State>, monitor: DragDropMonitor) {\n\t\tthis.store = store\n\t\tthis.monitor = monitor\n\t\tstore.subscribe(this.handleRefCountChange)\n\t}\n\n\tpublic receiveBackend(backend: Backend): void {\n\t\tthis.backend = backend\n\t}\n\n\tpublic getMonitor(): DragDropMonitor {\n\t\treturn this.monitor\n\t}\n\n\tpublic getBackend(): Backend {\n\t\treturn this.backend as Backend\n\t}\n\n\tpublic getRegistry(): HandlerRegistry {\n\t\treturn (this.monitor as DragDropMonitorImpl).registry\n\t}\n\n\tpublic getActions(): DragDropActions {\n\t\t/* eslint-disable-next-line @typescript-eslint/no-this-alias */\n\t\tconst manager = this\n\t\tconst { dispatch } = this.store\n\n\t\tfunction bindActionCreator(actionCreator: ActionCreator<any>) {\n\t\t\treturn (...args: any[]) => {\n\t\t\t\tconst action = actionCreator.apply(manager, args as any)\n\t\t\t\tif (typeof action !== 'undefined') {\n\t\t\t\t\tdispatch(action)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst actions = createDragDropActions(this)\n\n\t\treturn Object.keys(actions).reduce(\n\t\t\t(boundActions: DragDropActions, key: string) => {\n\t\t\t\tconst action: ActionCreator<any> = (actions as any)[\n\t\t\t\t\tkey\n\t\t\t\t] as ActionCreator<any>\n\t\t\t\t;(boundActions as any)[key] = bindActionCreator(action)\n\t\t\t\treturn boundActions\n\t\t\t},\n\t\t\t{} as DragDropActions,\n\t\t)\n\t}\n\n\tpublic dispatch(action: Action<any>): void {\n\t\tthis.store.dispatch(action)\n\t}\n\n\tprivate handleRefCountChange = (): void => {\n\t\tconst shouldSetUp = this.store.getState().refCount > 0\n\t\tif (this.backend) {\n\t\t\tif (shouldSetUp && !this.isSetUp) {\n\t\t\t\tthis.backend.setup()\n\t\t\t\tthis.isSetUp = true\n\t\t\t} else if (!shouldSetUp && this.isSetUp) {\n\t\t\t\tthis.backend.teardown()\n\t\t\t\tthis.isSetUp = false\n\t\t\t}\n\t\t}\n\t}\n}\n","import type { DragDropActions, DragDropManager } from '../../interfaces.js'\nimport { createBeginDrag } from './beginDrag.js'\nimport { createDrop } from './drop.js'\nimport { createEndDrag } from './endDrag.js'\nimport { createHover } from './hover.js'\nimport { createPublishDragSource } from './publishDragSource.js'\n\nexport * from './types.js'\n\nexport function createDragDropActions(\n\tmanager: DragDropManager,\n): DragDropActions {\n\treturn {\n\t\tbeginDrag: createBeginDrag(manager),\n\t\tpublishDragSource: createPublishDragSource(manager),\n\t\thover: createHover(manager),\n\t\tdrop: createDrop(manager),\n\t\tendDrag: createEndDrag(manager),\n\t}\n}\n","import type { XYCoord } from '../interfaces.js'\nimport type { State } from '../reducers/dragOffset.js'\n\n/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a: XYCoord, b: XYCoord): XYCoord {\n\treturn {\n\t\tx: a.x + b.x,\n\t\ty: a.y + b.y,\n\t}\n}\n\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function subtract(a: XYCoord, b: XYCoord): XYCoord {\n\treturn {\n\t\tx: a.x - b.x,\n\t\ty: a.y - b.y,\n\t}\n}\n\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\nexport function getSourceClientOffset(state: State): XYCoord | null {\n\tconst { clientOffset, initialClientOffset, initialSourceClientOffset } = state\n\tif (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n\t\treturn null\n\t}\n\treturn subtract(\n\t\tadd(clientOffset, initialSourceClientOffset),\n\t\tinitialClientOffset,\n\t)\n}\n\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\nexport function getDifferenceFromInitialOffset(state: State): XYCoord | null {\n\tconst { clientOffset, initialClientOffset } = state\n\tif (!clientOffset || !initialClientOffset) {\n\t\treturn null\n\t}\n\treturn subtract(clientOffset, initialClientOffset)\n}\n","import { intersection } from './js_utils.js'\n\nexport const NONE: string[] = []\nexport const ALL: string[] = []\n// Add these flags for debug\n;(NONE as any).__IS_NONE__ = true\n;(ALL as any).__IS_ALL__ = true\n\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\nexport function areDirty(\n\tdirtyIds: string[],\n\thandlerIds: string[] | undefined,\n): boolean {\n\tif (dirtyIds === NONE) {\n\t\treturn false\n\t}\n\n\tif (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n\t\treturn true\n\t}\n\n\tconst commonIds = intersection(handlerIds, dirtyIds)\n\treturn commonIds.length > 0\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport type {\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport {\n\tgetDifferenceFromInitialOffset,\n\tgetSourceClientOffset,\n} from '../utils/coords.js'\nimport { areDirty } from '../utils/dirtiness.js'\nimport { matchesType } from '../utils/matchesType.js'\n\nexport class DragDropMonitorImpl implements DragDropMonitor {\n\tprivate store: Store<State>\n\tpublic readonly registry: HandlerRegistry\n\n\tpublic constructor(store: Store<State>, registry: HandlerRegistry) {\n\t\tthis.store = store\n\t\tthis.registry = registry\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions: { handlerIds?: string[] } = {},\n\t): Unsubscribe {\n\t\tconst { handlerIds } = options\n\t\tinvariant(typeof listener === 'function', 'listener must be a function.')\n\t\tinvariant(\n\t\t\ttypeof handlerIds === 'undefined' || Array.isArray(handlerIds),\n\t\t\t'handlerIds, when specified, must be an array of strings.',\n\t\t)\n\n\t\tlet prevStateId = this.store.getState().stateId\n\t\tconst handleChange = () => {\n\t\t\tconst state = this.store.getState()\n\t\t\tconst currentStateId = state.stateId\n\t\t\ttry {\n\t\t\t\tconst canSkipListener =\n\t\t\t\t\tcurrentStateId === prevStateId ||\n\t\t\t\t\t(currentStateId === prevStateId + 1 &&\n\t\t\t\t\t\t!areDirty(state.dirtyHandlerIds, handlerIds))\n\n\t\t\t\tif (!canSkipListener) {\n\t\t\t\t\tlistener()\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tprevStateId = currentStateId\n\t\t\t}\n\t\t}\n\n\t\treturn this.store.subscribe(handleChange)\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\tinvariant(typeof listener === 'function', 'listener must be a function.')\n\n\t\tlet previousState = this.store.getState().dragOffset\n\t\tconst handleChange = () => {\n\t\t\tconst nextState = this.store.getState().dragOffset\n\t\t\tif (nextState === previousState) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tpreviousState = nextState\n\t\t\tlistener()\n\t\t}\n\n\t\treturn this.store.subscribe(handleChange)\n\t}\n\n\tpublic canDragSource(sourceId: string | undefined): boolean {\n\t\tif (!sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tconst source = this.registry.getSource(sourceId)\n\t\tinvariant(source, `Expected to find a valid source. sourceId=${sourceId}`)\n\n\t\tif (this.isDragging()) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn source.canDrag(this, sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: string | undefined): boolean {\n\t\t// undefined on initial render\n\t\tif (!targetId) {\n\t\t\treturn false\n\t\t}\n\t\tconst target = this.registry.getTarget(targetId)\n\t\tinvariant(target, `Expected to find a valid target. targetId=${targetId}`)\n\n\t\tif (!this.isDragging() || this.didDrop()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetType = this.registry.getTargetType(targetId)\n\t\tconst draggedItemType = this.getItemType()\n\t\treturn (\n\t\t\tmatchesType(targetType, draggedItemType) && target.canDrop(this, targetId)\n\t\t)\n\t}\n\n\tpublic isDragging(): boolean {\n\t\treturn Boolean(this.getItemType())\n\t}\n\n\tpublic isDraggingSource(sourceId: string | undefined): boolean {\n\t\t// undefined on initial render\n\t\tif (!sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tconst source = this.registry.getSource(sourceId, true)\n\t\tinvariant(source, `Expected to find a valid source. sourceId=${sourceId}`)\n\n\t\tif (!this.isDragging() || !this.isSourcePublic()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst sourceType = this.registry.getSourceType(sourceId)\n\t\tconst draggedItemType = this.getItemType()\n\t\tif (sourceType !== draggedItemType) {\n\t\t\treturn false\n\t\t}\n\n\t\treturn source.isDragging(this, sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: string | undefined,\n\t\toptions = { shallow: false },\n\t): boolean {\n\t\t// undefined on initial render\n\t\tif (!targetId) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst { shallow } = options\n\t\tif (!this.isDragging()) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetType = this.registry.getTargetType(targetId)\n\t\tconst draggedItemType = this.getItemType()\n\t\tif (draggedItemType && !matchesType(targetType, draggedItemType)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst targetIds = this.getTargetIds()\n\t\tif (!targetIds.length) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst index = targetIds.indexOf(targetId)\n\t\tif (shallow) {\n\t\t\treturn index === targetIds.length - 1\n\t\t} else {\n\t\t\treturn index > -1\n\t\t}\n\t}\n\n\tpublic getItemType(): Identifier {\n\t\treturn this.store.getState().dragOperation.itemType as Identifier\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.store.getState().dragOperation.item\n\t}\n\n\tpublic getSourceId(): string | null {\n\t\treturn this.store.getState().dragOperation.sourceId\n\t}\n\n\tpublic getTargetIds(): string[] {\n\t\treturn this.store.getState().dragOperation.targetIds\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.store.getState().dragOperation.dropResult\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.store.getState().dragOperation.didDrop\n\t}\n\n\tpublic isSourcePublic(): boolean {\n\t\treturn Boolean(this.store.getState().dragOperation.isSourcePublic)\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.initialClientOffset\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.initialSourceClientOffset\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.store.getState().dragOffset.clientOffset\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn getSourceClientOffset(this.store.getState().dragOffset)\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn getDifferenceFromInitialOffset(this.store.getState().dragOffset)\n\t}\n}\n","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */\nimport { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js'\nimport type { Task } from './types.js'\n\nexport class AsapQueue {\n\tprivate queue: Task[] = []\n\t// We queue errors to ensure they are thrown in right order (FIFO).\n\t// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\tprivate pendingErrors: any[] = []\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\t// @ts-ignore\n\tprivate flushing = false\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tprivate requestFlush: () => void\n\n\tprivate requestErrorThrow: () => void\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tprivate index = 0\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tprivate capacity = 1024\n\n\tpublic constructor() {\n\t\t// `requestFlush` requests that the high priority event queue be flushed as\n\t\t// soon as possible.\n\t\t// This is useful to prevent an error thrown in a task from stalling the event\n\t\t// queue if the exception handled by Node.jss\n\t\t// `process.on(\"uncaughtException\")` or by a domain.\n\n\t\t// `requestFlush` is implemented using a strategy based on data collected from\n\t\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\tthis.requestFlush = makeRequestCall(this.flush)\n\t\tthis.requestErrorThrow = makeRequestCallFromTimer(() => {\n\t\t\t// Throw first error\n\t\t\tif (this.pendingErrors.length) {\n\t\t\t\tthrow this.pendingErrors.shift()\n\t\t\t}\n\t\t})\n\t}\n\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tpublic enqueueTask(task: Task): void {\n\t\tconst { queue: q, requestFlush } = this\n\t\tif (!q.length) {\n\t\t\trequestFlush()\n\t\t\tthis.flushing = true\n\t\t}\n\t\t// Equivalent to push, but avoids a function call.\n\t\tq[q.length] = task\n\t}\n\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tprivate flush = () => {\n\t\tconst { queue: q } = this\n\t\twhile (this.index < q.length) {\n\t\t\tconst currentIndex = this.index\n\t\t\t// Advance the index before calling the task. This ensures that we will\n\t\t\t// begin flushing on the next task the task throws an error.\n\t\t\tthis.index++\n\t\t\tq[currentIndex]!.call()\n\t\t\t// Prevent leaking memory for long chains of recursive calls to `asap`.\n\t\t\t// If we call `asap` within tasks scheduled by `asap`, the queue will\n\t\t\t// grow, but to avoid an O(n) walk for every task we execute, we don't\n\t\t\t// shift tasks off the queue after they have been executed.\n\t\t\t// Instead, we periodically shift 1024 tasks off the queue.\n\t\t\tif (this.index > this.capacity) {\n\t\t\t\t// Manually shift all values starting at the index back to the\n\t\t\t\t// beginning of the queue.\n\t\t\t\tfor (\n\t\t\t\t\tlet scan = 0, newLength = q.length - this.index;\n\t\t\t\t\tscan < newLength;\n\t\t\t\t\tscan++\n\t\t\t\t) {\n\t\t\t\t\tq[scan] = q[scan + this.index]!\n\t\t\t\t}\n\t\t\t\tq.length -= this.index\n\t\t\t\tthis.index = 0\n\t\t\t}\n\t\t}\n\t\tq.length = 0\n\t\tthis.index = 0\n\t\tthis.flushing = false\n\t}\n\n\t// In a web browser, exceptions are not fatal. However, to avoid\n\t// slowing down the queue of pending tasks, we rethrow the error in a\n\t// lower priority turn.\n\tpublic registerPendingError = (err: any) => {\n\t\tthis.pendingErrors.push(err)\n\t\tthis.requestErrorThrow()\n\t}\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// // its existence.\n// rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","// We wrap tasks with recyclable task objects.  A task object implements\n\nimport type { Task, TaskFn } from 'types'\n\n// `call`, just like a function.\nexport class RawTask implements Task {\n\tpublic task: TaskFn | null = null\n\n\tpublic constructor(\n\t\tprivate onError: (err: any) => void,\n\t\tprivate release: (t: RawTask) => void,\n\t) {}\n\n\tpublic call() {\n\t\ttry {\n\t\t\tthis.task && this.task()\n\t\t} catch (error) {\n\t\t\tthis.onError(error)\n\t\t} finally {\n\t\t\tthis.task = null\n\t\t\tthis.release(this)\n\t\t}\n\t}\n}\n","import { RawTask } from './RawTask.js'\nimport type { Task } from './types.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n","import { AsapQueue } from './AsapQueue.js'\nimport { TaskFactory } from './TaskFactory.js'\nimport type { TaskFn } from './types.js'\n\nconst asapQueue = new AsapQueue()\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError)\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nexport function asap(task: TaskFn) {\n\tasapQueue.enqueueTask(taskFactory.create(task))\n}\n","import type { Action, SourceIdPayload, TargetIdPayload } from '../interfaces.js'\n\nexport const ADD_SOURCE = 'dnd-core/ADD_SOURCE'\nexport const ADD_TARGET = 'dnd-core/ADD_TARGET'\nexport const REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE'\nexport const REMOVE_TARGET = 'dnd-core/REMOVE_TARGET'\n\nexport function addSource(sourceId: string): Action<SourceIdPayload> {\n\treturn {\n\t\ttype: ADD_SOURCE,\n\t\tpayload: {\n\t\t\tsourceId,\n\t\t},\n\t}\n}\n\nexport function addTarget(targetId: string): Action<TargetIdPayload> {\n\treturn {\n\t\ttype: ADD_TARGET,\n\t\tpayload: {\n\t\t\ttargetId,\n\t\t},\n\t}\n}\n\nexport function removeSource(sourceId: string): Action<SourceIdPayload> {\n\treturn {\n\t\ttype: REMOVE_SOURCE,\n\t\tpayload: {\n\t\t\tsourceId,\n\t\t},\n\t}\n}\n\nexport function removeTarget(targetId: string): Action<TargetIdPayload> {\n\treturn {\n\t\ttype: REMOVE_TARGET,\n\t\tpayload: {\n\t\t\ttargetId,\n\t\t},\n\t}\n}\n","export type Identifier = string | symbol\nexport type SourceType = Identifier\nexport type TargetType = Identifier | Identifier[]\nexport type Unsubscribe = () => void\nexport type Listener = () => void\n\nexport interface XYCoord {\n\tx: number\n\ty: number\n}\n\nexport enum HandlerRole {\n\tSOURCE = 'SOURCE',\n\tTARGET = 'TARGET',\n}\n\nexport interface Backend {\n\tsetup(): void\n\tteardown(): void\n\tconnectDragSource(sourceId: any, node?: any, options?: any): Unsubscribe\n\tconnectDragPreview(sourceId: any, node?: any, options?: any): Unsubscribe\n\tconnectDropTarget(targetId: any, node?: any, options?: any): Unsubscribe\n\tprofile(): Record<string, number>\n}\n\nexport interface DragDropMonitor {\n\tsubscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: {\n\t\t\thandlerIds?: Identifier[]\n\t\t},\n\t): Unsubscribe\n\tsubscribeToOffsetChange(listener: Listener): Unsubscribe\n\tcanDragSource(sourceId: Identifier | undefined): boolean\n\tcanDropOnTarget(targetId: Identifier | undefined): boolean\n\n\t/**\n\t * Returns true if a drag operation is in progress, and either the owner initiated the drag, or its isDragging()\n\t * is defined and returns true.\n\t */\n\tisDragging(): boolean\n\tisDraggingSource(sourceId: Identifier | undefined): boolean\n\tisOverTarget(\n\t\ttargetId: Identifier | undefined,\n\t\toptions?: {\n\t\t\tshallow?: boolean\n\t\t},\n\t): boolean\n\n\t/**\n\t * Returns a string or a symbol identifying the type of the current dragged item. Returns null if no item is being dragged.\n\t */\n\tgetItemType(): Identifier | null\n\n\t/**\n\t * Returns a plain object representing the currently dragged item. Every drag source must specify it by returning an object\n\t * from its beginDrag() method. Returns null if no item is being dragged.\n\t */\n\tgetItem(): any\n\tgetSourceId(): Identifier | null\n\tgetTargetIds(): Identifier[]\n\t/**\n\t * Returns a plain object representing the last recorded drop result. The drop targets may optionally specify it by returning an\n\t * object from their drop() methods. When a chain of drop() is dispatched for the nested targets, bottom up, any parent that\n\t * explicitly returns its own result from drop() overrides the child drop result previously set by the child. Returns null if\n\t * called outside endDrag().\n\t */\n\tgetDropResult(): any\n\t/**\n\t * Returns true if some drop target has handled the drop event, false otherwise. Even if a target did not return a drop result,\n\t * didDrop() returns true. Use it inside endDrag() to test whether any drop target has handled the drop. Returns false if called\n\t * outside endDrag().\n\t */\n\tdidDrop(): boolean\n\tisSourcePublic(): boolean | null\n\t/**\n\t * Returns the { x, y } client offset of the pointer at the time when the current drag operation has started.\n\t * Returns null if no item is being dragged.\n\t */\n\tgetInitialClientOffset(): XYCoord | null\n\t/**\n\t * Returns the { x, y } client offset of the drag source component's root DOM node at the time when the current drag\n\t * operation has started. Returns null if no item is being dragged.\n\t */\n\tgetInitialSourceClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the last recorded { x, y } client offset of the pointer while a drag operation is in progress.\n\t * Returns null if no item is being dragged.\n\t */\n\tgetClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the projected { x, y } client offset of the drag source component's root DOM node, based on its position at the time\n\t * when the current drag operation has started, and the movement difference. Returns null if no item is being dragged.\n\t */\n\tgetSourceClientOffset(): XYCoord | null\n\n\t/**\n\t * Returns the { x, y } difference between the last recorded client offset of the pointer and the client offset when the current\n\t * drag operation has started. Returns null if no item is being dragged.\n\t */\n\tgetDifferenceFromInitialOffset(): XYCoord | null\n}\n\nexport interface HandlerRegistry {\n\taddSource(type: SourceType, source: DragSource): Identifier\n\taddTarget(type: TargetType, target: DropTarget): Identifier\n\tcontainsHandler(handler: DragSource | DropTarget): boolean\n\tgetSource(sourceId: Identifier, includePinned?: boolean): DragSource\n\tgetSourceType(sourceId: Identifier): SourceType\n\tgetTargetType(targetId: Identifier): TargetType\n\tgetTarget(targetId: Identifier): DropTarget\n\tisSourceId(handlerId: Identifier): boolean\n\tisTargetId(handlerId: Identifier): boolean\n\tremoveSource(sourceId: Identifier): void\n\tremoveTarget(targetId: Identifier): void\n\tpinSource(sourceId: Identifier): void\n\tunpinSource(): void\n}\n\nexport interface Action<Payload> {\n\ttype: Identifier\n\tpayload: Payload\n}\nexport interface SentinelAction {\n\ttype: Identifier\n}\n\nexport type ActionCreator<Payload> = (args: any[]) => Action<Payload>\n\nexport interface BeginDragOptions {\n\tpublishSource?: boolean\n\tclientOffset?: XYCoord\n\tgetSourceClientOffset?: (sourceId: Identifier | undefined) => XYCoord\n}\n\nexport interface InitCoordsPayload {\n\tclientOffset: XYCoord | null\n\tsourceClientOffset: XYCoord | null\n}\n\nexport interface BeginDragPayload {\n\titemType: Identifier\n\titem: any\n\tsourceId: Identifier\n\tclientOffset: XYCoord | null\n\tsourceClientOffset: XYCoord | null\n\tisSourcePublic: boolean\n}\n\nexport interface HoverPayload {\n\ttargetIds: Identifier[]\n\tclientOffset: XYCoord | null\n}\n\nexport interface HoverOptions {\n\tclientOffset?: XYCoord\n}\n\nexport interface DropPayload {\n\tdropResult: any\n}\n\nexport interface TargetIdPayload {\n\ttargetId: Identifier\n}\n\nexport interface SourceIdPayload {\n\tsourceId: Identifier\n}\n\nexport interface DragDropActions {\n\tbeginDrag(\n\t\tsourceIds?: Identifier[],\n\t\toptions?: any,\n\t): Action<BeginDragPayload> | undefined\n\tpublishDragSource(): SentinelAction | undefined\n\thover(targetIds: Identifier[], options?: any): Action<HoverPayload>\n\tdrop(options?: any): void\n\tendDrag(): SentinelAction\n}\n\nexport interface DragDropManager {\n\tgetMonitor(): DragDropMonitor\n\tgetBackend(): Backend\n\tgetRegistry(): HandlerRegistry\n\tgetActions(): DragDropActions\n\tdispatch(action: any): void\n}\n\nexport type BackendFactory = (\n\tmanager: DragDropManager,\n\tglobalContext?: any,\n\tconfiguration?: any,\n) => Backend\n\nexport interface DragSource {\n\tbeginDrag(monitor: DragDropMonitor, targetId: Identifier): void\n\tendDrag(monitor: DragDropMonitor, targetId: Identifier): void\n\tcanDrag(monitor: DragDropMonitor, targetId: Identifier): boolean\n\tisDragging(monitor: DragDropMonitor, targetId: Identifier): boolean\n}\n\nexport interface DropTarget {\n\tcanDrop(monitor: DragDropMonitor, targetId: Identifier): boolean\n\thover(monitor: DragDropMonitor, targetId: Identifier): void\n\tdrop(monitor: DragDropMonitor, targetId: Identifier): any\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type { DragSource, DropTarget, Identifier } from './interfaces.js'\n\nexport function validateSourceContract(source: DragSource): void {\n\tinvariant(\n\t\ttypeof source.canDrag === 'function',\n\t\t'Expected canDrag to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof source.beginDrag === 'function',\n\t\t'Expected beginDrag to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof source.endDrag === 'function',\n\t\t'Expected endDrag to be a function.',\n\t)\n}\n\nexport function validateTargetContract(target: DropTarget): void {\n\tinvariant(\n\t\ttypeof target.canDrop === 'function',\n\t\t'Expected canDrop to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof target.hover === 'function',\n\t\t'Expected hover to be a function.',\n\t)\n\tinvariant(\n\t\ttypeof target.drop === 'function',\n\t\t'Expected beginDrag to be a function.',\n\t)\n}\n\nexport function validateType(\n\ttype: Identifier | Identifier[],\n\tallowArray?: boolean,\n): void {\n\tif (allowArray && Array.isArray(type)) {\n\t\ttype.forEach((t) => validateType(t, false))\n\t\treturn\n\t}\n\n\tinvariant(\n\t\ttypeof type === 'string' || typeof type === 'symbol',\n\t\tallowArray\n\t\t\t? 'Type can only be a string, a symbol, or an array of either.'\n\t\t\t: 'Type can only be a string or a symbol.',\n\t)\n}\n","let nextUniqueId = 0\n\nexport function getNextUniqueId(): number {\n\treturn nextUniqueId++\n}\n","import { asap } from '@react-dnd/asap'\nimport { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport {\n\taddSource,\n\taddTarget,\n\tremoveSource,\n\tremoveTarget,\n} from '../actions/registry.js'\nimport {\n\tvalidateSourceContract,\n\tvalidateTargetContract,\n\tvalidateType,\n} from '../contracts.js'\nimport type {\n\tDragSource,\n\tDropTarget,\n\tHandlerRegistry,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n} from '../interfaces.js'\nimport { HandlerRole } from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js'\n\nfunction getNextHandlerId(role: HandlerRole): string {\n\tconst id = getNextUniqueId().toString()\n\tswitch (role) {\n\t\tcase HandlerRole.SOURCE:\n\t\t\treturn `S${id}`\n\t\tcase HandlerRole.TARGET:\n\t\t\treturn `T${id}`\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown Handler Role: ${role}`)\n\t}\n}\n\nfunction parseRoleFromHandlerId(handlerId: string) {\n\tswitch (handlerId[0]) {\n\t\tcase 'S':\n\t\t\treturn HandlerRole.SOURCE\n\t\tcase 'T':\n\t\t\treturn HandlerRole.TARGET\n\t\tdefault:\n\t\t\tthrow new Error(`Cannot parse handler ID: ${handlerId}`)\n\t}\n}\n\nfunction mapContainsValue<T>(map: Map<string, T>, searchValue: T) {\n\tconst entries = map.entries()\n\tlet isDone = false\n\tdo {\n\t\tconst {\n\t\t\tdone,\n\t\t\tvalue: [, value],\n\t\t} = entries.next()\n\t\tif (value === searchValue) {\n\t\t\treturn true\n\t\t}\n\t\tisDone = !!done\n\t} while (!isDone)\n\treturn false\n}\n\nexport class HandlerRegistryImpl implements HandlerRegistry {\n\tprivate types: Map<string, SourceType | TargetType> = new Map()\n\tprivate dragSources: Map<string, DragSource> = new Map()\n\tprivate dropTargets: Map<string, DropTarget> = new Map()\n\tprivate pinnedSourceId: string | null = null\n\tprivate pinnedSource: any = null\n\tprivate store: Store<State>\n\n\tpublic constructor(store: Store<State>) {\n\t\tthis.store = store\n\t}\n\n\tpublic addSource(type: SourceType, source: DragSource): string {\n\t\tvalidateType(type)\n\t\tvalidateSourceContract(source)\n\n\t\tconst sourceId = this.addHandler(HandlerRole.SOURCE, type, source)\n\t\tthis.store.dispatch(addSource(sourceId))\n\t\treturn sourceId\n\t}\n\n\tpublic addTarget(type: TargetType, target: DropTarget): string {\n\t\tvalidateType(type, true)\n\t\tvalidateTargetContract(target)\n\n\t\tconst targetId = this.addHandler(HandlerRole.TARGET, type, target)\n\t\tthis.store.dispatch(addTarget(targetId))\n\t\treturn targetId\n\t}\n\n\tpublic containsHandler(handler: DragSource | DropTarget): boolean {\n\t\treturn (\n\t\t\tmapContainsValue(this.dragSources, handler) ||\n\t\t\tmapContainsValue(this.dropTargets, handler)\n\t\t)\n\t}\n\n\tpublic getSource(sourceId: string, includePinned = false): DragSource {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\tconst isPinned = includePinned && sourceId === this.pinnedSourceId\n\t\tconst source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId)\n\t\treturn source\n\t}\n\n\tpublic getTarget(targetId: string): DropTarget {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.dropTargets.get(targetId) as DropTarget\n\t}\n\n\tpublic getSourceType(sourceId: string): Identifier {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\treturn this.types.get(sourceId) as Identifier\n\t}\n\n\tpublic getTargetType(targetId: string): Identifier | Identifier[] {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.types.get(targetId) as Identifier | Identifier[]\n\t}\n\n\tpublic isSourceId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.SOURCE\n\t}\n\n\tpublic isTargetId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.TARGET\n\t}\n\n\tpublic removeSource(sourceId: string): void {\n\t\tinvariant(this.getSource(sourceId), 'Expected an existing source.')\n\t\tthis.store.dispatch(removeSource(sourceId))\n\t\tasap(() => {\n\t\t\tthis.dragSources.delete(sourceId)\n\t\t\tthis.types.delete(sourceId)\n\t\t})\n\t}\n\n\tpublic removeTarget(targetId: string): void {\n\t\tinvariant(this.getTarget(targetId), 'Expected an existing target.')\n\t\tthis.store.dispatch(removeTarget(targetId))\n\t\tthis.dropTargets.delete(targetId)\n\t\tthis.types.delete(targetId)\n\t}\n\n\tpublic pinSource(sourceId: string): void {\n\t\tconst source = this.getSource(sourceId)\n\t\tinvariant(source, 'Expected an existing source.')\n\n\t\tthis.pinnedSourceId = sourceId\n\t\tthis.pinnedSource = source\n\t}\n\n\tpublic unpinSource(): void {\n\t\tinvariant(this.pinnedSource, 'No source is pinned at the time.')\n\n\t\tthis.pinnedSourceId = null\n\t\tthis.pinnedSource = null\n\t}\n\n\tprivate addHandler(\n\t\trole: HandlerRole,\n\t\ttype: SourceType | TargetType,\n\t\thandler: DragSource | DropTarget,\n\t): string {\n\t\tconst id = getNextHandlerId(role)\n\t\tthis.types.set(id, type)\n\t\tif (role === HandlerRole.SOURCE) {\n\t\t\tthis.dragSources.set(id, handler as DragSource)\n\t\t} else if (role === HandlerRole.TARGET) {\n\t\t\tthis.dropTargets.set(id, handler as DropTarget)\n\t\t}\n\t\treturn id\n\t}\n}\n","import type { XYCoord } from '../interfaces.js'\n\nexport type EqualityCheck<T> = (a: T, b: T) => boolean\nexport const strictEquality = <T>(a: T, b: T): boolean => a === b\n\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\nexport function areCoordsEqual(\n\toffsetA: XYCoord | null | undefined,\n\toffsetB: XYCoord | null | undefined,\n): boolean {\n\tif (!offsetA && !offsetB) {\n\t\treturn true\n\t} else if (!offsetA || !offsetB) {\n\t\treturn false\n\t} else {\n\t\treturn offsetA.x === offsetB.x && offsetA.y === offsetB.y\n\t}\n}\n\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\nexport function areArraysEqual<T>(\n\ta: T[],\n\tb: T[],\n\tisEqual: EqualityCheck<T> = strictEquality,\n): boolean {\n\tif (a.length !== b.length) {\n\t\treturn false\n\t}\n\tfor (let i = 0; i < a.length; ++i) {\n\t\tif (!isEqual(a[i] as T, b[i] as T)) {\n\t\t\treturn false\n\t\t}\n\t}\n\treturn true\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\nimport { ALL, NONE } from '../utils/dirtiness.js'\nimport { areArraysEqual } from '../utils/equality.js'\nimport { xor } from '../utils/js_utils.js'\n\nexport type State = string[]\n\nexport interface DirtyHandlerIdPayload {\n\ttargetIds: string[]\n\tprevTargetIds: string[]\n}\n\nexport function reduce(\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t_state: State = NONE,\n\taction: Action<DirtyHandlerIdPayload>,\n): State {\n\tswitch (action.type) {\n\t\tcase HOVER:\n\t\t\tbreak\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\tcase REMOVE_TARGET:\n\t\tcase REMOVE_SOURCE:\n\t\t\treturn NONE\n\t\tcase BEGIN_DRAG:\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\tdefault:\n\t\t\treturn ALL\n\t}\n\n\tconst { targetIds = [], prevTargetIds = [] } = action.payload\n\tconst result = xor(targetIds, prevTargetIds)\n\tconst didChange =\n\t\tresult.length > 0 || !areArraysEqual(targetIds, prevTargetIds)\n\n\tif (!didChange) {\n\t\treturn NONE\n\t}\n\n\t// Check the target ids at the innermost position. If they are valid, add them\n\t// to the result\n\tconst prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1]\n\tconst innermostTargetId = targetIds[targetIds.length - 1]\n\tif (prevInnermostTargetId !== innermostTargetId) {\n\t\tif (prevInnermostTargetId) {\n\t\t\tresult.push(prevInnermostTargetId)\n\t\t}\n\t\tif (innermostTargetId) {\n\t\t\tresult.push(innermostTargetId)\n\t\t}\n\t}\n\n\treturn result\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tINIT_COORDS,\n} from '../actions/dragDrop/index.js'\nimport type { Action, XYCoord } from '../interfaces.js'\nimport { areCoordsEqual } from '../utils/equality.js'\n\nexport interface State {\n\tinitialSourceClientOffset: XYCoord | null\n\tinitialClientOffset: XYCoord | null\n\tclientOffset: XYCoord | null\n}\n\nconst initialState: State = {\n\tinitialSourceClientOffset: null,\n\tinitialClientOffset: null,\n\tclientOffset: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\tsourceClientOffset: XYCoord\n\t\tclientOffset: XYCoord\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase INIT_COORDS:\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\tinitialSourceClientOffset: payload.sourceClientOffset,\n\t\t\t\tinitialClientOffset: payload.clientOffset,\n\t\t\t\tclientOffset: payload.clientOffset,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\tif (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tclientOffset: payload.clientOffset,\n\t\t\t}\n\t\tcase END_DRAG:\n\t\tcase DROP:\n\t\t\treturn initialState\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import {\n\tBEGIN_DRAG,\n\tDROP,\n\tEND_DRAG,\n\tHOVER,\n\tPUBLISH_DRAG_SOURCE,\n} from '../actions/dragDrop/index.js'\nimport { REMOVE_TARGET } from '../actions/registry.js'\nimport type { Action, Identifier } from '../interfaces.js'\nimport { without } from '../utils/js_utils.js'\n\nexport interface State {\n\titemType: Identifier | Identifier[] | null\n\titem: any\n\tsourceId: string | null\n\ttargetIds: string[]\n\tdropResult: any\n\tdidDrop: boolean\n\tisSourcePublic: boolean | null\n}\n\nconst initialState: State = {\n\titemType: null,\n\titem: null,\n\tsourceId: null,\n\ttargetIds: [],\n\tdropResult: null,\n\tdidDrop: false,\n\tisSourcePublic: null,\n}\n\nexport function reduce(\n\tstate: State = initialState,\n\taction: Action<{\n\t\titemType: Identifier | Identifier[]\n\t\titem: any\n\t\tsourceId: string\n\t\ttargetId: string\n\t\ttargetIds: string[]\n\t\tisSourcePublic: boolean\n\t\tdropResult: any\n\t}>,\n): State {\n\tconst { payload } = action\n\tswitch (action.type) {\n\t\tcase BEGIN_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: payload.itemType,\n\t\t\t\titem: payload.item,\n\t\t\t\tsourceId: payload.sourceId,\n\t\t\t\tisSourcePublic: payload.isSourcePublic,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t}\n\t\tcase PUBLISH_DRAG_SOURCE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisSourcePublic: true,\n\t\t\t}\n\t\tcase HOVER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: payload.targetIds,\n\t\t\t}\n\t\tcase REMOVE_TARGET:\n\t\t\tif (state.targetIds.indexOf(payload.targetId) === -1) {\n\t\t\t\treturn state\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttargetIds: without(state.targetIds, payload.targetId),\n\t\t\t}\n\t\tcase DROP:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tdropResult: payload.dropResult,\n\t\t\t\tdidDrop: true,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tcase END_DRAG:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titemType: null,\n\t\t\t\titem: null,\n\t\t\t\tsourceId: null,\n\t\t\t\tdropResult: null,\n\t\t\t\tdidDrop: false,\n\t\t\t\tisSourcePublic: null,\n\t\t\t\ttargetIds: [],\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","import {\n\tADD_SOURCE,\n\tADD_TARGET,\n\tREMOVE_SOURCE,\n\tREMOVE_TARGET,\n} from '../actions/registry.js'\nimport type { Action } from '../interfaces.js'\n\nexport type State = number\n\nexport function reduce(state: State = 0, action: Action<any>): State {\n\tswitch (action.type) {\n\t\tcase ADD_SOURCE:\n\t\tcase ADD_TARGET:\n\t\t\treturn state + 1\n\t\tcase REMOVE_SOURCE:\n\t\tcase REMOVE_TARGET:\n\t\t\treturn state - 1\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n","export type State = number\n\nexport function reduce(state: State = 0): State {\n\treturn state + 1\n}\n","import type { Action } from '../interfaces.js'\nimport { get } from '../utils/js_utils.js'\nimport type { State as DirtyHandlerIdsState } from './dirtyHandlerIds.js'\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds.js'\nimport type { State as DragOffsetState } from './dragOffset.js'\nimport { reduce as dragOffset } from './dragOffset.js'\nimport type { State as DragOperationState } from './dragOperation.js'\nimport { reduce as dragOperation } from './dragOperation.js'\nimport type { State as RefCountState } from './refCount.js'\nimport { reduce as refCount } from './refCount.js'\nimport type { State as StateIdState } from './stateId.js'\nimport { reduce as stateId } from './stateId.js'\n\nexport interface State {\n\tdirtyHandlerIds: DirtyHandlerIdsState\n\tdragOffset: DragOffsetState\n\trefCount: RefCountState\n\tdragOperation: DragOperationState\n\tstateId: StateIdState\n}\n\nexport function reduce(state: State = {} as State, action: Action<any>): State {\n\treturn {\n\t\tdirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n\t\t\ttype: action.type,\n\t\t\tpayload: {\n\t\t\t\t...action.payload,\n\t\t\t\tprevTargetIds: get<string[]>(state, 'dragOperation.targetIds', []),\n\t\t\t},\n\t\t}),\n\t\tdragOffset: dragOffset(state.dragOffset, action),\n\t\trefCount: refCount(state.refCount, action),\n\t\tdragOperation: dragOperation(state.dragOperation, action),\n\t\tstateId: stateId(state.stateId),\n\t}\n}\n","import type { Store } from 'redux'\nimport { createStore } from 'redux'\n\nimport { DragDropManagerImpl } from './classes/DragDropManagerImpl.js'\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl.js'\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl.js'\nimport type { BackendFactory, DragDropManager } from './interfaces.js'\nimport type { State } from './reducers/index.js'\nimport { reduce } from './reducers/index.js'\n\nexport function createDragDropManager(\n\tbackendFactory: BackendFactory,\n\tglobalContext: unknown = undefined,\n\tbackendOptions: unknown = {},\n\tdebugMode = false,\n): DragDropManager {\n\tconst store = makeStoreInstance(debugMode)\n\tconst monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store))\n\tconst manager = new DragDropManagerImpl(store, monitor)\n\tconst backend = backendFactory(manager, globalContext, backendOptions)\n\tmanager.receiveBackend(backend)\n\treturn manager\n}\n\nfunction makeStoreInstance(debugMode: boolean): Store<State> {\n\t// TODO: if we ever make a react-native version of this,\n\t// we'll need to consider how to pull off dev-tooling\n\tconst reduxDevTools =\n\t\ttypeof window !== 'undefined' &&\n\t\t(window as any).__REDUX_DEVTOOLS_EXTENSION__\n\treturn createStore(\n\t\treduce,\n\t\tdebugMode &&\n\t\t\treduxDevTools &&\n\t\t\treduxDevTools({\n\t\t\t\tname: 'dnd-core',\n\t\t\t\tinstanceId: 'dnd-core',\n\t\t\t}),\n\t)\n}\n","import { useMemo } from 'react'\n\nimport type { TargetConnector } from '../../internals/index.js'\n\nexport function useConnectDropTarget(connector: TargetConnector) {\n\treturn useMemo(() => connector.hooks.dropTarget(), [connector])\n}\n","import { shallowEqual } from '@react-dnd/shallowequal'\nimport type { Backend, Identifier, Unsubscribe } from 'dnd-core'\nimport type { RefObject } from 'react'\n\nimport type { DropTargetOptions } from '../types/index.js'\nimport { isRef } from './isRef.js'\nimport type { Connector } from './SourceConnector.js'\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js'\n\nexport class TargetConnector implements Connector {\n\tpublic hooks = wrapConnectorHooks({\n\t\tdropTarget: (node: any, options: DropTargetOptions) => {\n\t\t\tthis.clearDropTarget()\n\t\t\tthis.dropTargetOptions = options\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dropTargetRef = node\n\t\t\t} else {\n\t\t\t\tthis.dropTargetNode = node\n\t\t\t}\n\t\t\tthis.reconnect()\n\t\t},\n\t})\n\n\tprivate handlerId: Identifier | null = null\n\t// The drop target may either be attached via ref or connect function\n\tprivate dropTargetRef: RefObject<any> | null = null\n\tprivate dropTargetNode: any\n\tprivate dropTargetOptionsInternal: DropTargetOptions | null = null\n\tprivate unsubscribeDropTarget: Unsubscribe | undefined\n\n\tprivate lastConnectedHandlerId: Identifier | null = null\n\tprivate lastConnectedDropTarget: any = null\n\tprivate lastConnectedDropTargetOptions: DropTargetOptions | null = null\n\tprivate readonly backend: Backend\n\n\tpublic constructor(backend: Backend) {\n\t\tthis.backend = backend\n\t}\n\n\tpublic get connectTarget(): any {\n\t\treturn this.dropTarget\n\t}\n\n\tpublic reconnect(): void {\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didDropTargetChange() ||\n\t\t\tthis.didOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDropTarget()\n\t\t}\n\n\t\tconst dropTarget = this.dropTarget\n\t\tif (!this.handlerId) {\n\t\t\treturn\n\t\t}\n\t\tif (!dropTarget) {\n\t\t\tthis.lastConnectedDropTarget = dropTarget\n\t\t\treturn\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDropTarget = dropTarget\n\t\t\tthis.lastConnectedDropTargetOptions = this.dropTargetOptions\n\n\t\t\tthis.unsubscribeDropTarget = this.backend.connectDropTarget(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdropTarget,\n\t\t\t\tthis.dropTargetOptions,\n\t\t\t)\n\t\t}\n\t}\n\n\tpublic receiveHandlerId(newHandlerId: Identifier | null): void {\n\t\tif (newHandlerId === this.handlerId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.handlerId = newHandlerId\n\t\tthis.reconnect()\n\t}\n\n\tpublic get dropTargetOptions(): DropTargetOptions {\n\t\treturn this.dropTargetOptionsInternal\n\t}\n\tpublic set dropTargetOptions(options: DropTargetOptions) {\n\t\tthis.dropTargetOptionsInternal = options\n\t}\n\n\tprivate didHandlerIdChange(): boolean {\n\t\treturn this.lastConnectedHandlerId !== this.handlerId\n\t}\n\n\tprivate didDropTargetChange(): boolean {\n\t\treturn this.lastConnectedDropTarget !== this.dropTarget\n\t}\n\n\tprivate didOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDropTargetOptions,\n\t\t\tthis.dropTargetOptions,\n\t\t)\n\t}\n\n\tpublic disconnectDropTarget() {\n\t\tif (this.unsubscribeDropTarget) {\n\t\t\tthis.unsubscribeDropTarget()\n\t\t\tthis.unsubscribeDropTarget = undefined\n\t\t}\n\t}\n\n\tprivate get dropTarget() {\n\t\treturn (\n\t\t\tthis.dropTargetNode || (this.dropTargetRef && this.dropTargetRef.current)\n\t\t)\n\t}\n\n\tprivate clearDropTarget() {\n\t\tthis.dropTargetRef = null\n\t\tthis.dropTargetNode = null\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../types/index.js'\n\nlet isCallingCanDrop = false\n\nexport class DropTargetMonitorImpl implements DropTargetMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate targetId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(targetId: Identifier | null): void {\n\t\tthis.targetId = targetId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.targetId\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic canDrop(): boolean {\n\t\t// Cut out early if the target id has not been set. This should prevent errors\n\t\t// where the user has an older version of dnd-core like in\n\t\t// https://github.com/react-dnd/react-dnd/issues/1310\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingCanDrop,\n\t\t\t'You may not call monitor.canDrop() inside your canDrop() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrop = true\n\t\t\treturn this.internalMonitor.canDropOnTarget(this.targetId)\n\t\t} finally {\n\t\t\tisCallingCanDrop = false\n\t\t}\n\t}\n\n\tpublic isOver(options?: { shallow?: boolean }): boolean {\n\t\tif (!this.targetId) {\n\t\t\treturn false\n\t\t}\n\t\treturn this.internalMonitor.isOverTarget(this.targetId, options)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n","import type { DropTarget } from 'dnd-core'\n\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\n\nexport class DropTargetImpl<O, R, P> implements DropTarget {\n\tpublic constructor(\n\t\tpublic spec: DropTargetHookSpec<O, R, P>,\n\t\tprivate monitor: DropTargetMonitor<O, R>,\n\t) {}\n\n\tpublic canDrop() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\treturn spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true\n\t}\n\n\tpublic hover() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (spec.hover) {\n\t\t\tspec.hover(monitor.getItem(), monitor)\n\t\t}\n\t}\n\n\tpublic drop() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (spec.drop) {\n\t\t\treturn spec.drop(monitor.getItem(), monitor)\n\t\t}\n\t\treturn\n\t}\n}\n","import type { TargetConnector } from '../../internals/index.js'\nimport { registerTarget } from '../../internals/index.js'\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useAccept } from './useAccept.js'\nimport { useDropTarget } from './useDropTarget.js'\n\nexport function useRegisteredDropTarget<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n\tmonitor: DropTargetMonitor<O, R>,\n\tconnector: TargetConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst dropTarget = useDropTarget(spec, monitor)\n\tconst accept = useAccept(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDropTarget() {\n\t\t\tconst [handlerId, unregister] = registerTarget(\n\t\t\t\taccept,\n\t\t\t\tdropTarget,\n\t\t\t\tmanager,\n\t\t\t)\n\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\treturn unregister\n\t\t},\n\t\t[\n\t\t\tmanager,\n\t\t\tmonitor,\n\t\t\tdropTarget,\n\t\t\tconnector,\n\t\t\taccept.map((a) => a.toString()).join('|'),\n\t\t],\n\t)\n}\n","import { useEffect, useMemo } from 'react'\n\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport type { DropTargetHookSpec } from '../types.js'\nimport { DropTargetImpl } from './DropTargetImpl.js'\n\nexport function useDropTarget<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n\tmonitor: DropTargetMonitor<O, R>,\n) {\n\tconst dropTarget = useMemo(() => new DropTargetImpl(spec, monitor), [monitor])\n\tuseEffect(() => {\n\t\tdropTarget.spec = spec\n\t}, [spec])\n\treturn dropTarget\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Identifier } from 'dnd-core'\nimport { useMemo } from 'react'\n\nimport type { DropTargetHookSpec } from '../types.js'\n\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\nexport function useAccept<O, R, P>(\n\tspec: DropTargetHookSpec<O, R, P>,\n): Identifier[] {\n\tconst { accept } = spec\n\treturn useMemo(() => {\n\t\tinvariant(spec.accept != null, 'accept must be defined')\n\t\treturn Array.isArray(accept) ? accept : [accept]\n\t}, [accept])\n}\n","import type { ConnectDropTarget } from '../../types/index.js'\nimport type { DropTargetHookSpec, FactoryOrInstance } from '../types.js'\nimport { useCollectedProps } from '../useCollectedProps.js'\nimport { useOptionalFactory } from '../useOptionalFactory.js'\nimport { useConnectDropTarget } from './connectors.js'\nimport { useDropTargetConnector } from './useDropTargetConnector.js'\nimport { useDropTargetMonitor } from './useDropTargetMonitor.js'\nimport { useRegisteredDropTarget } from './useRegisteredDropTarget.js'\n\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\nexport function useDrop<\n\tDragObject = unknown,\n\tDropResult = unknown,\n\tCollectedProps = unknown,\n>(\n\tspecArg: FactoryOrInstance<\n\t\tDropTargetHookSpec<DragObject, DropResult, CollectedProps>\n\t>,\n\tdeps?: unknown[],\n): [CollectedProps, ConnectDropTarget] {\n\tconst spec = useOptionalFactory(specArg, deps)\n\tconst monitor = useDropTargetMonitor<DragObject, DropResult>()\n\tconst connector = useDropTargetConnector(spec.options)\n\tuseRegisteredDropTarget(spec, monitor, connector)\n\n\treturn [\n\t\tuseCollectedProps(spec.collect, monitor, connector),\n\t\tuseConnectDropTarget(connector),\n\t]\n}\n","import { useMemo } from 'react'\n\nimport { DropTargetMonitorImpl } from '../../internals/index.js'\nimport type { DropTargetMonitor } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\n\nexport function useDropTargetMonitor<O, R>(): DropTargetMonitor<O, R> {\n\tconst manager = useDragDropManager()\n\treturn useMemo(() => new DropTargetMonitorImpl(manager), [manager])\n}\n","import { useMemo } from 'react'\n\nimport { TargetConnector } from '../../internals/index.js'\nimport type { DropTargetOptions } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\n\nexport function useDropTargetConnector(\n\toptions: DropTargetOptions,\n): TargetConnector {\n\tconst manager = useDragDropManager()\n\tconst connector = useMemo(\n\t\t() => new TargetConnector(manager.getBackend()),\n\t\t[manager],\n\t)\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dropTargetOptions = options || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDropTarget()\n\t}, [options])\n\treturn connector\n}\n","import { useMemo } from 'react'\n\nimport type { SourceConnector } from '../../internals/index.js'\n\nexport function useConnectDragSource(connector: SourceConnector) {\n\treturn useMemo(() => connector.hooks.dragSource(), [connector])\n}\n\nexport function useConnectDragPreview(connector: SourceConnector) {\n\treturn useMemo(() => connector.hooks.dragPreview(), [connector])\n}\n","import { shallowEqual } from '@react-dnd/shallowequal'\nimport type { Backend, Identifier, Unsubscribe } from 'dnd-core'\nimport type { ReactElement, Ref, RefObject } from 'react'\n\nimport type { DragPreviewOptions, DragSourceOptions } from '../types/index.js'\nimport { isRef } from './isRef.js'\nimport { wrapConnectorHooks } from './wrapConnectorHooks.js'\n\nexport interface Connector {\n\thooks: any\n\tconnectTarget: any\n\treceiveHandlerId(handlerId: Identifier | null): void\n\treconnect(): void\n}\n\nexport class SourceConnector implements Connector {\n\tpublic hooks = wrapConnectorHooks({\n\t\tdragSource: (\n\t\t\tnode: Element | ReactElement | Ref<any>,\n\t\t\toptions?: DragSourceOptions,\n\t\t) => {\n\t\t\tthis.clearDragSource()\n\t\t\tthis.dragSourceOptions = options || null\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dragSourceRef = node as RefObject<any>\n\t\t\t} else {\n\t\t\t\tthis.dragSourceNode = node\n\t\t\t}\n\t\t\tthis.reconnectDragSource()\n\t\t},\n\t\tdragPreview: (node: any, options?: DragPreviewOptions) => {\n\t\t\tthis.clearDragPreview()\n\t\t\tthis.dragPreviewOptions = options || null\n\t\t\tif (isRef(node)) {\n\t\t\t\tthis.dragPreviewRef = node\n\t\t\t} else {\n\t\t\t\tthis.dragPreviewNode = node\n\t\t\t}\n\t\t\tthis.reconnectDragPreview()\n\t\t},\n\t})\n\tprivate handlerId: Identifier | null = null\n\n\t// The drop target may either be attached via ref or connect function\n\tprivate dragSourceRef: RefObject<any> | null = null\n\tprivate dragSourceNode: any\n\tprivate dragSourceOptionsInternal: DragSourceOptions | null = null\n\tprivate dragSourceUnsubscribe: Unsubscribe | undefined\n\n\t// The drag preview may either be attached via ref or connect function\n\tprivate dragPreviewRef: RefObject<any> | null = null\n\tprivate dragPreviewNode: any\n\tprivate dragPreviewOptionsInternal: DragPreviewOptions | null = null\n\tprivate dragPreviewUnsubscribe: Unsubscribe | undefined\n\n\tprivate lastConnectedHandlerId: Identifier | null = null\n\tprivate lastConnectedDragSource: any = null\n\tprivate lastConnectedDragSourceOptions: any = null\n\tprivate lastConnectedDragPreview: any = null\n\tprivate lastConnectedDragPreviewOptions: any = null\n\n\tprivate readonly backend: Backend\n\n\tpublic constructor(backend: Backend) {\n\t\tthis.backend = backend\n\t}\n\n\tpublic receiveHandlerId(newHandlerId: Identifier | null): void {\n\t\tif (this.handlerId === newHandlerId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.handlerId = newHandlerId\n\t\tthis.reconnect()\n\t}\n\n\tpublic get connectTarget(): any {\n\t\treturn this.dragSource\n\t}\n\n\tpublic get dragSourceOptions(): DragSourceOptions | null {\n\t\treturn this.dragSourceOptionsInternal\n\t}\n\tpublic set dragSourceOptions(options: DragSourceOptions | null) {\n\t\tthis.dragSourceOptionsInternal = options\n\t}\n\n\tpublic get dragPreviewOptions(): DragPreviewOptions | null {\n\t\treturn this.dragPreviewOptionsInternal\n\t}\n\n\tpublic set dragPreviewOptions(options: DragPreviewOptions | null) {\n\t\tthis.dragPreviewOptionsInternal = options\n\t}\n\n\tpublic reconnect(): void {\n\t\tconst didChange = this.reconnectDragSource()\n\t\tthis.reconnectDragPreview(didChange)\n\t}\n\n\tprivate reconnectDragSource(): boolean {\n\t\tconst dragSource = this.dragSource\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didConnectedDragSourceChange() ||\n\t\t\tthis.didDragSourceOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDragSource()\n\t\t}\n\n\t\tif (!this.handlerId) {\n\t\t\treturn didChange\n\t\t}\n\t\tif (!dragSource) {\n\t\t\tthis.lastConnectedDragSource = dragSource\n\t\t\treturn didChange\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDragSource = dragSource\n\t\t\tthis.lastConnectedDragSourceOptions = this.dragSourceOptions\n\t\t\tthis.dragSourceUnsubscribe = this.backend.connectDragSource(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdragSource,\n\t\t\t\tthis.dragSourceOptions,\n\t\t\t)\n\t\t}\n\t\treturn didChange\n\t}\n\n\tprivate reconnectDragPreview(forceDidChange = false): void {\n\t\tconst dragPreview = this.dragPreview\n\t\t// if nothing has changed then don't resubscribe\n\t\tconst didChange =\n\t\t\tforceDidChange ||\n\t\t\tthis.didHandlerIdChange() ||\n\t\t\tthis.didConnectedDragPreviewChange() ||\n\t\t\tthis.didDragPreviewOptionsChange()\n\n\t\tif (didChange) {\n\t\t\tthis.disconnectDragPreview()\n\t\t}\n\n\t\tif (!this.handlerId) {\n\t\t\treturn\n\t\t}\n\t\tif (!dragPreview) {\n\t\t\tthis.lastConnectedDragPreview = dragPreview\n\t\t\treturn\n\t\t}\n\n\t\tif (didChange) {\n\t\t\tthis.lastConnectedHandlerId = this.handlerId\n\t\t\tthis.lastConnectedDragPreview = dragPreview\n\t\t\tthis.lastConnectedDragPreviewOptions = this.dragPreviewOptions\n\t\t\tthis.dragPreviewUnsubscribe = this.backend.connectDragPreview(\n\t\t\t\tthis.handlerId,\n\t\t\t\tdragPreview,\n\t\t\t\tthis.dragPreviewOptions,\n\t\t\t)\n\t\t}\n\t}\n\n\tprivate didHandlerIdChange(): boolean {\n\t\treturn this.lastConnectedHandlerId !== this.handlerId\n\t}\n\n\tprivate didConnectedDragSourceChange(): boolean {\n\t\treturn this.lastConnectedDragSource !== this.dragSource\n\t}\n\n\tprivate didConnectedDragPreviewChange(): boolean {\n\t\treturn this.lastConnectedDragPreview !== this.dragPreview\n\t}\n\n\tprivate didDragSourceOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDragSourceOptions,\n\t\t\tthis.dragSourceOptions,\n\t\t)\n\t}\n\n\tprivate didDragPreviewOptionsChange(): boolean {\n\t\treturn !shallowEqual(\n\t\t\tthis.lastConnectedDragPreviewOptions,\n\t\t\tthis.dragPreviewOptions,\n\t\t)\n\t}\n\n\tpublic disconnectDragSource() {\n\t\tif (this.dragSourceUnsubscribe) {\n\t\t\tthis.dragSourceUnsubscribe()\n\t\t\tthis.dragSourceUnsubscribe = undefined\n\t\t}\n\t}\n\n\tpublic disconnectDragPreview() {\n\t\tif (this.dragPreviewUnsubscribe) {\n\t\t\tthis.dragPreviewUnsubscribe()\n\t\t\tthis.dragPreviewUnsubscribe = undefined\n\t\t\tthis.dragPreviewNode = null\n\t\t\tthis.dragPreviewRef = null\n\t\t}\n\t}\n\n\tprivate get dragSource() {\n\t\treturn (\n\t\t\tthis.dragSourceNode || (this.dragSourceRef && this.dragSourceRef.current)\n\t\t)\n\t}\n\n\tprivate get dragPreview() {\n\t\treturn (\n\t\t\tthis.dragPreviewNode ||\n\t\t\t(this.dragPreviewRef && this.dragPreviewRef.current)\n\t\t)\n\t}\n\n\tprivate clearDragSource() {\n\t\tthis.dragSourceNode = null\n\t\tthis.dragSourceRef = null\n\t}\n\n\tprivate clearDragPreview() {\n\t\tthis.dragPreviewNode = null\n\t\tthis.dragPreviewRef = null\n\t}\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type {\n\tDragDropManager,\n\tDragDropMonitor,\n\tIdentifier,\n\tListener,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport type { DragSourceMonitor } from '../types/index.js'\n\nlet isCallingCanDrag = false\nlet isCallingIsDragging = false\n\nexport class DragSourceMonitorImpl implements DragSourceMonitor {\n\tprivate internalMonitor: DragDropMonitor\n\tprivate sourceId: Identifier | null = null\n\n\tpublic constructor(manager: DragDropManager) {\n\t\tthis.internalMonitor = manager.getMonitor()\n\t}\n\n\tpublic receiveHandlerId(sourceId: Identifier | null): void {\n\t\tthis.sourceId = sourceId\n\t}\n\n\tpublic getHandlerId(): Identifier | null {\n\t\treturn this.sourceId\n\t}\n\n\tpublic canDrag(): boolean {\n\t\tinvariant(\n\t\t\t!isCallingCanDrag,\n\t\t\t'You may not call monitor.canDrag() inside your canDrag() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingCanDrag = true\n\t\t\treturn this.internalMonitor.canDragSource(this.sourceId as Identifier)\n\t\t} finally {\n\t\t\tisCallingCanDrag = false\n\t\t}\n\t}\n\n\tpublic isDragging(): boolean {\n\t\tif (!this.sourceId) {\n\t\t\treturn false\n\t\t}\n\t\tinvariant(\n\t\t\t!isCallingIsDragging,\n\t\t\t'You may not call monitor.isDragging() inside your isDragging() implementation. ' +\n\t\t\t\t'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor',\n\t\t)\n\n\t\ttry {\n\t\t\tisCallingIsDragging = true\n\t\t\treturn this.internalMonitor.isDraggingSource(this.sourceId)\n\t\t} finally {\n\t\t\tisCallingIsDragging = false\n\t\t}\n\t}\n\n\tpublic subscribeToStateChange(\n\t\tlistener: Listener,\n\t\toptions?: { handlerIds?: Identifier[] },\n\t): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToStateChange(listener, options)\n\t}\n\n\tpublic isDraggingSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.isDraggingSource(sourceId)\n\t}\n\n\tpublic isOverTarget(\n\t\ttargetId: Identifier,\n\t\toptions?: { shallow: boolean },\n\t): boolean {\n\t\treturn this.internalMonitor.isOverTarget(targetId, options)\n\t}\n\n\tpublic getTargetIds(): Identifier[] {\n\t\treturn this.internalMonitor.getTargetIds()\n\t}\n\n\tpublic isSourcePublic(): boolean | null {\n\t\treturn this.internalMonitor.isSourcePublic()\n\t}\n\n\tpublic getSourceId(): Identifier | null {\n\t\treturn this.internalMonitor.getSourceId()\n\t}\n\n\tpublic subscribeToOffsetChange(listener: Listener): Unsubscribe {\n\t\treturn this.internalMonitor.subscribeToOffsetChange(listener)\n\t}\n\n\tpublic canDragSource(sourceId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDragSource(sourceId)\n\t}\n\n\tpublic canDropOnTarget(targetId: Identifier): boolean {\n\t\treturn this.internalMonitor.canDropOnTarget(targetId)\n\t}\n\n\tpublic getItemType(): Identifier | null {\n\t\treturn this.internalMonitor.getItemType()\n\t}\n\n\tpublic getItem(): any {\n\t\treturn this.internalMonitor.getItem()\n\t}\n\n\tpublic getDropResult(): any {\n\t\treturn this.internalMonitor.getDropResult()\n\t}\n\n\tpublic didDrop(): boolean {\n\t\treturn this.internalMonitor.didDrop()\n\t}\n\n\tpublic getInitialClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialClientOffset()\n\t}\n\n\tpublic getInitialSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getInitialSourceClientOffset()\n\t}\n\n\tpublic getSourceClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getSourceClientOffset()\n\t}\n\n\tpublic getClientOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getClientOffset()\n\t}\n\n\tpublic getDifferenceFromInitialOffset(): XYCoord | null {\n\t\treturn this.internalMonitor.getDifferenceFromInitialOffset()\n\t}\n}\n","import type { DragDropMonitor, DragSource, Identifier } from 'dnd-core'\n\nimport type { Connector } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragObjectFactory, DragSourceHookSpec } from '../types.js'\n\nexport class DragSourceImpl<O, R, P> implements DragSource {\n\tpublic constructor(\n\t\tpublic spec: DragSourceHookSpec<O, R, P>,\n\t\tprivate monitor: DragSourceMonitor<O, R>,\n\t\tprivate connector: Connector,\n\t) {}\n\n\tpublic beginDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\n\t\tlet result: O | null = null\n\t\tif (typeof spec.item === 'object') {\n\t\t\tresult = spec.item as O\n\t\t} else if (typeof spec.item === 'function') {\n\t\t\tresult = (spec.item as DragObjectFactory<O>)(monitor)\n\t\t} else {\n\t\t\tresult = {} as O\n\t\t}\n\t\treturn result ?? null\n\t}\n\n\tpublic canDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tif (typeof spec.canDrag === 'boolean') {\n\t\t\treturn spec.canDrag\n\t\t} else if (typeof spec.canDrag === 'function') {\n\t\t\treturn spec.canDrag(monitor)\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\tpublic isDragging(globalMonitor: DragDropMonitor, target: Identifier) {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tconst { isDragging } = spec\n\t\treturn isDragging\n\t\t\t? isDragging(monitor)\n\t\t\t: target === globalMonitor.getSourceId()\n\t}\n\n\tpublic endDrag() {\n\t\tconst spec = this.spec\n\t\tconst monitor = this.monitor\n\t\tconst connector = this.connector\n\t\tconst { end } = spec\n\t\tif (end) {\n\t\t\tend(monitor.getItem(), monitor)\n\t\t}\n\t\tconnector.reconnect()\n\t}\n}\n","import type { SourceConnector } from '../../internals/index.js'\nimport { registerSource } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\nimport { useDragSource } from './useDragSource.js'\nimport { useDragType } from './useDragType.js'\n\nexport function useRegisteredDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: SourceConnector,\n): void {\n\tconst manager = useDragDropManager()\n\tconst handler = useDragSource(spec, monitor, connector)\n\tconst itemType = useDragType(spec)\n\n\tuseIsomorphicLayoutEffect(\n\t\tfunction registerDragSource() {\n\t\t\tif (itemType != null) {\n\t\t\t\tconst [handlerId, unregister] = registerSource(\n\t\t\t\t\titemType,\n\t\t\t\t\thandler,\n\t\t\t\t\tmanager,\n\t\t\t\t)\n\t\t\t\tmonitor.receiveHandlerId(handlerId)\n\t\t\t\tconnector.receiveHandlerId(handlerId)\n\t\t\t\treturn unregister\n\t\t\t}\n\t\t\treturn\n\t\t},\n\t\t[manager, monitor, connector, handler, itemType],\n\t)\n}\n","import { useEffect, useMemo } from 'react'\n\nimport type { Connector } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport type { DragSourceHookSpec } from '../types.js'\nimport { DragSourceImpl } from './DragSourceImpl.js'\n\nexport function useDragSource<O, R, P>(\n\tspec: DragSourceHookSpec<O, R, P>,\n\tmonitor: DragSourceMonitor<O, R>,\n\tconnector: Connector,\n) {\n\tconst handler = useMemo(\n\t\t() => new DragSourceImpl(spec, monitor, connector),\n\t\t[monitor, connector],\n\t)\n\tuseEffect(() => {\n\t\thandler.spec = spec\n\t}, [spec])\n\treturn handler\n}\n","import { invariant } from '@react-dnd/invariant'\nimport type { Identifier } from 'dnd-core'\nimport { useMemo } from 'react'\n\nimport type { DragSourceHookSpec } from '../types.js'\n\nexport function useDragType(\n\tspec: DragSourceHookSpec<any, any, any>,\n): Identifier {\n\treturn useMemo(() => {\n\t\tconst result: Identifier = spec.type\n\t\tinvariant(result != null, 'spec.type must be defined')\n\t\treturn result\n\t}, [spec])\n}\n","import { invariant } from '@react-dnd/invariant'\n\nimport type {\n\tConnectDragPreview,\n\tConnectDragSource,\n} from '../../types/index.js'\nimport type { DragSourceHookSpec, FactoryOrInstance } from '../types.js'\nimport { useCollectedProps } from '../useCollectedProps.js'\nimport { useOptionalFactory } from '../useOptionalFactory.js'\nimport { useConnectDragPreview, useConnectDragSource } from './connectors.js'\nimport { useDragSourceConnector } from './useDragSourceConnector.js'\nimport { useDragSourceMonitor } from './useDragSourceMonitor.js'\nimport { useRegisteredDragSource } from './useRegisteredDragSource.js'\n\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\nexport function useDrag<\n\tDragObject = unknown,\n\tDropResult = unknown,\n\tCollectedProps = unknown,\n>(\n\tspecArg: FactoryOrInstance<\n\t\tDragSourceHookSpec<DragObject, DropResult, CollectedProps>\n\t>,\n\tdeps?: unknown[],\n): [CollectedProps, ConnectDragSource, ConnectDragPreview] {\n\tconst spec = useOptionalFactory(specArg, deps)\n\tinvariant(\n\t\t!(spec as any).begin,\n\t\t`useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)`,\n\t)\n\n\tconst monitor = useDragSourceMonitor<DragObject, DropResult>()\n\tconst connector = useDragSourceConnector(spec.options, spec.previewOptions)\n\tuseRegisteredDragSource(spec, monitor, connector)\n\n\treturn [\n\t\tuseCollectedProps(spec.collect, monitor, connector),\n\t\tuseConnectDragSource(connector),\n\t\tuseConnectDragPreview(connector),\n\t]\n}\n","import { useMemo } from 'react'\n\nimport { DragSourceMonitorImpl } from '../../internals/index.js'\nimport type { DragSourceMonitor } from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\n\nexport function useDragSourceMonitor<O, R>(): DragSourceMonitor<O, R> {\n\tconst manager = useDragDropManager()\n\treturn useMemo<DragSourceMonitor<O, R>>(\n\t\t() => new DragSourceMonitorImpl(manager),\n\t\t[manager],\n\t)\n}\n","import { useMemo } from 'react'\n\nimport { SourceConnector } from '../../internals/index.js'\nimport type {\n\tDragPreviewOptions,\n\tDragSourceOptions,\n} from '../../types/index.js'\nimport { useDragDropManager } from '../useDragDropManager.js'\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect.js'\n\nexport function useDragSourceConnector(\n\tdragSourceOptions: DragSourceOptions | undefined,\n\tdragPreviewOptions: DragPreviewOptions | undefined,\n): SourceConnector {\n\tconst manager = useDragDropManager()\n\tconst connector = useMemo(\n\t\t() => new SourceConnector(manager.getBackend()),\n\t\t[manager],\n\t)\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dragSourceOptions = dragSourceOptions || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDragSource()\n\t}, [connector, dragSourceOptions])\n\tuseIsomorphicLayoutEffect(() => {\n\t\tconnector.dragPreviewOptions = dragPreviewOptions || null\n\t\tconnector.reconnect()\n\t\treturn () => connector.disconnectDragPreview()\n\t}, [connector, dragPreviewOptions])\n\treturn connector\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport { unsafeStringify } from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || unsafeStringify(b);\n}\n\nexport default v1;"],"sourceRoot":""}